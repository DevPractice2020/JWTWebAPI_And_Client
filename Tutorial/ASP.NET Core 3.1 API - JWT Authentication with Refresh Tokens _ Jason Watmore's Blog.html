<!DOCTYPE html>
<!-- saved from url=(0097)https://jasonwatmore.com/post/2020/05/25/aspnet-core-3-api-jwt-authentication-with-refresh-tokens -->
<html ng-app="app" class="ng-scope"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/publishertag.prebid.js.download"></script><script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/osd.js.download"></script><script type="text/javascript">!function(){"use strict";var r=(i.prototype.isAdBlocked=function(t){var e=this;this.createPixel(i.allowedPixelUrl,function(){(e.allowedPixelLoaded=!0)===e.blockedPixelFailed&&t(!0)},function(){}),this.createPixel(i.blockedPixelUrl,function(){t(!1)},function(){(e.blockedPixelFailed=!0)===e.allowedPixelLoaded&&t(!0)})},i.prototype.createPixel=function(t,e,i){var r=document.createElement("img");r.src=t,r.height=1,r.width=1,r.style.display="none",r.onload=e,r.onerror=i},i.allowedPixelUrl="https://static.criteo.net/images/pixel.gif?ch=1",i.blockedPixelUrl="https://static.criteo.net/images/pixel.gif?ch=2",i);function i(){this.allowedPixelLoaded=!1,this.blockedPixelFailed=!1}var o=(t.prototype.checkLocalStorage=function(){if(!this.localStorage)return!1;var t=this.CHECK_STORAGE_KEY;try{return this.localStorage.setItem(t,t),this.localStorage.removeItem(t),!0}catch(t){return!1}},t.prototype.removeItem=function(t){this.localStorage.removeItem(t),this.localStorage.removeItem(t+this.EXPIRE_SUFFIX)},t.prototype.getItem=function(t,e){var i=(new Date).getTime(),r=this.localStorage.getItem(t+this.EXPIRE_SUFFIX),o=r?parseInt(r,10):-1;return-1!==o&&o<i||e&&(-1===o||e<o-i)?(this.removeItem(t),null):this.localStorage.getItem(t)},t.prototype.setItem=function(t,e,i){if(this.localStorage.setItem(t,e),i){var r=(new Date).getTime()+i;this.localStorage.setItem(t+this.EXPIRE_SUFFIX,r.toString())}},t.prototype.getAllItemsByPrefix=function(t){var e=[];for(var i in localStorage)0===i.indexOf(t)&&e.push(i);return e},t);function t(t){this.EXPIRE_SUFFIX="_expires",this.CHECK_STORAGE_KEY="criteo_localstorage_check",this.localStorage=function(t){try{return t.localStorage}catch(t){return}}(t||window)}var E=(e.create=function(){return new e},e.prototype.adBlockFlagEnabled=function(){if(!this.localStorageEnabled)return!1;var t=e.ADBLOCK_FLAG_KEY;return null!==this.localStorageHelper.getItem(t)},e.prototype.enableAdBlockFlag=function(){if(this.localStorageEnabled){var t=e.ADBLOCK_FLAG_KEY;this.localStorageHelper.setItem(t,"1",e.ADBLOCK_FLAG_LIFETIME)}},e.prototype.disableAdBlockFlag=function(){if(this.localStorageEnabled){var t=e.ADBLOCK_FLAG_KEY;this.localStorageHelper.removeItem(t)}},e.prototype.setAdBlockFlagTimer=function(t){var e=this;if(!this.adBlockFlagEnabled()&&this.timerEnabled&&!this.timerStarted){var i=new r;this.timerStarted=!0,setTimeout(function(){e.timerEnabled&&i.isAdBlocked(function(t){t?e.enableAdBlockFlag():e.disableAdBlockFlag()}),e.disableAdBlockFlagTimer()},t)}},e.prototype.disableAdBlockFlagTimer=function(){this.timerEnabled=!1},e.ADBLOCK_FLAG_KEY="criteo_adblock_flag",e.ADBLOCK_FLAG_LIFETIME=864e5,e);function e(){this.localStorageHelper=new o,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage(),this.timerEnabled=!0,this.timerStarted=!1}var n,s,c,a,M=((n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(d,s=function(){}),d.prototype.ResizeFrame=function(t,e){if(this.document.defaultView&&this.document.defaultView.frameElement){var i=this.document.defaultView.frameElement;i.width=t.toString(),i.height=e.toString()}},d.prototype.Write=function(t){this.document.open(),this.document.write(t),this.document.close()},d.prototype.LoadScript=function(t){this.Write("<script type='text/javascript' src='"+t+"'><\/script>")},d);function d(t){var e=s.call(this)||this;return e.document=t,e}(a=c=c||{})[a.Error=0]="Error",a[a.Warning=1]="Warning",a[a.Debug=2]="Debug";var l=["color: #fff;","background: #ff8f1c;","display: inline-block;","padding: 1px 4px;","border-radius: 3px;"].join(" "),R=(u.Log=function(t,e){if(!(u.LOGLEVEL<t)){var i=c[t].toUpperCase(),r=window.navigator.userAgent,o=0<r.indexOf("MSIE ")||0<r.indexOf("Trident/");window.console&&(o?console.log("[PubTag] "+i+": "+e):console.log("%cPubTag",l,i+": "+e))}},u.Debug=function(t){u.Log(c.Debug,t)},u.Warning=function(t){u.Log(c.Warning,t)},u.Error=function(t){u.Log(c.Error,t)},u.LOGLEVEL=c.Error,u);function u(){}var p=(h.prototype.silentModeEnabled=function(){var t=h.SILENT_MODE_KEY;return this.localStorageEnabled&&null!==this.localStorageHelper.getItem(t)},h.prototype.enableSilentMode=function(t){if(this.localStorageEnabled){var e=h.SILENT_MODE_KEY;this.localStorageHelper.setItem(e,"1",t)}},h.SILENT_MODE_KEY="criteo_silent_mode",h);function h(){this.localStorageHelper=new o,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage()}function f(t){try{return JSON.parse(t)}catch(t){return}}function v(){return(new Date).getTime()}var C=(g.prototype.toString=function(){return this.width+"x"+this.height},g);function g(t,e){this.width=t,this.height=e}var m=(y.prototype.toString=function(){return"ImpId"+this.impressionId},y);function y(t){this.impressionId=t}var I,b,_=((I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(S,b=m),S.prototype.toString=function(){return b.prototype.toString.call(this)+"_Size"+this.size+"_NetworkId"+this.networkId},S);function S(t,e,i){var r=b.call(this,t)||this;return r.size=e,r.networkId=i,r}var w,T,A=((w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(P,T=m),P.prototype.toString=function(){return T.prototype.toString.call(this)+"_ZoneId"+this.zoneId},P);function P(t,e){var i=T.call(this,t)||this;return i.zoneId=e,i}var O=(B.prototype.createKeysFromSlotRequest=function(t){if(this.useZoneIdIntegration)return[new A(t.impId,t.zoneId)];for(var e=[],i=0,r=t.sizes;i<r.length;i++){var o=r[i];e.push(new _(t.impId,o,this.networkId))}return e},B.prototype.createKeyFromSlotResponse=function(t){return this.useZoneIdIntegration?new A(t.impid,t.zoneid):new _(t.impid,new C(t.width,t.height),this.networkId)},B.prototype.createKeyFromBid=function(t){return this.useZoneIdIntegration?new A(t.impressionId,t.zoneId):new _(t.impressionId,new C(t.width,t.height),this.networkId)},B);function B(t,e){this.useZoneIdIntegration=t,this.networkId=e}var D=(x.useZoneIdIntegration=function(t,e){return void 0===e||0===t.filter(function(t){return void 0!==t.sizes&&0<t.sizes.length}).length},x.prototype.getBySlotKey=function(t,e){var i=e.toString();if(i in t){var r=t[i];if(void 0!==r)return void 0!==r.bid&&void 0!==r.expiration&&r.expiration<v()&&(r.bid=void 0,r.expiration=void 0),r}return{}},x.prototype.setBySlotKey=function(t,e,i){var r=e.toString();void 0!==i.bid||void 0!==i.expiration&&i.expiration>v()?t[r]=i:r in t&&delete t[r]},x.prototype.filterNoBidSlots=function(t){var e=[];if(this.localStorageEnabled)for(var i=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),r=i&&f(i)||{},o=0,n=t;o<n.length;o++){for(var s=n[o],a=[],d=0,c=this.slotKeyFactory.createKeysFromSlotRequest(s);d<c.length;d++){var l=c[d];this.getBidFromMap(r,l,0)!==x.NO_BID&&(l instanceof _?a.push(l.size):e.push(s))}0<a.length&&(s.sizes=a,e.push(s))}return e},x.prototype.getRequestCachedBids=function(t,e){void 0===e&&(e=5e3);var i={};if(this.localStorageEnabled){for(var r=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),o=r&&f(r)||{},n=0,s=t;n<s.length;n++)for(var a=s[n],d=0,c=this.slotKeyFactory.createKeysFromSlotRequest(a);d<c.length;d++){var l=c[d],u=this.getBidFromMap(o,l,e);void 0!==u&&u!==x.NO_BID&&(i[a.slotId]=u)}this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(o))}return i},x.prototype.getBid=function(t,e){if(void 0===e&&(e=5e3),this.localStorageEnabled){var i=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),r=i&&f(i)||{},o=this.getBidFromMap(r,t,e);return this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(r)),o}},x.prototype.getBidFromMap=function(t,e,i){void 0===i&&(i=5e3);var r=this.getBySlotKey(t,e);return void 0===r.bid&&r.expiration&&r.expiration>v()?x.NO_BID:0<i&&void 0!==r.bid?(delete t[e.toString()],r.bid):void 0},x.prototype.storeResponseBids=function(t){if(this.localStorageEnabled){for(var e=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),r=e&&f(e)||{},i=function(i){var t=o.slotKeyFactory.createKeyFromSlotResponse(i.slot);o.modifyCache(r,t,function(t){var e=v()+1e3*i.ttl;(void 0===t.expiration||t.expiration<e)&&(t.bid=i.slot,t.expiration=e)})},o=this,n=0,s=t;n<s.length;n++)i(s[n]);this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(r))}},x.prototype.storeRequestNoBids=function(t){if(this.localStorageEnabled){for(var e=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),o=e&&f(e)||{},i=function(e){for(var t=0,i=n.slotKeyFactory.createKeysFromSlotRequest(e.slot);t<i.length;t++){var r=i[t];n.modifyCache(o,r,function(t){t.bid=void 0,t.expiration=Math.max(t.expiration||0,v()+1e3*e.ttl)})}},n=this,r=0,s=t;r<s.length;r++)i(s[r]);this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(o))}},x.prototype.removeBid=function(e){if(this.localStorageEnabled){var t=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),i=t&&f(t)||{},r=this.slotKeyFactory.createKeyFromBid(e);this.modifyCache(i,r,function(t){void 0!==t.bid&&t.bid.slotid===e.slotId&&(t.bid=void 0,t.expiration=void 0)}),this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(i))}},x.prototype.modifyCache=function(t,e,i){var r=this.getBySlotKey(t,e);i(r),this.setBySlotKey(t,e,r)},x.prototype.cleanUpLegacyLocalStorageItems=function(){for(var t=0,e=this.localStorageHelper.getAllItemsByPrefix("criteo_pt_cdb_bidcache_");t<e.length;t++){var i=e[t];localStorage.removeItem(i)}},x.prototype.clearExpiredItems=function(){for(var t=this.localStorageHelper.getItem(x.BIDCACHE_STORAGE_KEY),e=t&&f(t)||{},i=0,r=Object.keys(e);i<r.length;i++){var o=r[i],n=e[o];void 0!==n&&void 0!==n.expiration&&n.expiration<v()&&delete e[o]}this.localStorageHelper.setItem(x.BIDCACHE_STORAGE_KEY,JSON.stringify(e)),this.cleanUpLegacyLocalStorageItems()},x.NO_BID="nobid",x.BIDCACHE_STORAGE_KEY="criteo_pt_cdb_bidcachemap",x);function x(t,e){this.localStorageHelper=new o,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage(),this.slotKeyFactory=new O(t,e)}var k=(L.prototype.filterNoBidSlots=function(t){var e=this.bidManager.filterNoBidSlots(t);return this.context.shouldIgnoreSilentMode?(e.length!==t.length&&this.context.setSilentModeIgnored&&this.context.setSilentModeIgnored(),t):e},L.prototype.silentModeEnabled=function(){var t=!1;return this.silentModeManager.silentModeEnabled()&&(this.context.shouldIgnoreSilentMode&&this.context.setSilentModeIgnored?this.context.setSilentModeIgnored():t=!0),t},L.prototype.getCachedBids=function(t){return this.bidManager.getRequestCachedBids(t)},L.prototype.removeBid=function(t){this.bidManager.removeBid(t)},L.prototype.handleResponse=function(t,e,i,r){var o=i.time_to_next_call;0<o&&(R.Debug("Global silent mode enabled for "+o+" seconds"),this.silentModeManager.enableSilentMode(1e3*o));var n={};if(i.slots)for(var s=0,a=i.slots;s<a.length;s++)(g=a[s]).ttl&&(n[g.imp_id]=g.ttl);var d=[];if(e.slots)for(var c=0,l=e.slots;c<l.length;c++){var u=0;(g=l[c]).slotid in n&&(u=n[g.slotid],delete n[g.slotid]),0<u&&(R.Debug("Bid for slot '"+g.impid+"' cached for "+u+" seconds"),d.push({slot:g,ttl:u}))}this.bidManager.storeResponseBids(d);var p=[];for(var h in n)if(n.hasOwnProperty(h))for(var f=0,v=t;f<v.length;f++){var g;(g=v[f]).slotId===h&&(u=n[h],R.Debug("Silent mode for slot '"+g.impId+"' enabled for "+u+" seconds"),p.push({slot:g,ttl:u}))}this.bidManager.storeRequestNoBids(p)},L.prototype.clearExpiredItems=function(){var t=this;setTimeout(function(){t.bidManager.clearExpiredItems()},3e3)},L);function L(t,e,i){var r=D.useZoneIdIntegration(e,i);this.bidManager=new D(r,i),this.silentModeManager=new p,this.context=t}var F=(N.prototype.eval=function(t){},N);function N(t){this.name=t}var U,q,W=((U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(H,q=F),H.prototype.eval=function(t){this.callback&&this.callback.apply(this)},H.NAME="genericEvent",H);function H(t){var e=q.call(this,H.NAME)||this;return e.callback=t,e}var G=(K.prototype.generateRandomId=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6)},K);function K(t,e,i,r,o,n,s){this.id=this.generateRandomId(),this.slotId=t,this.impressionId=e,this.cpm=i,this.width=r,this.height=o,this.zoneId=n,this.dealCode=s}var V,z,j=((V=function(t,e){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}V(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Y,z=G),Y.prototype.GenerateEvent=function(t){var e=this;return t.ResizeFrame(this.width,this.height),new W(function(){return t.LoadScript(e.displayUrl)})},Y.prototype.GenerateMessage=function(){return{displayUrl:this.displayUrl}},Y);function Y(t,e,i,r,o,n,s,a){var d=z.call(this,t,e,i,r,o,n,a)||this;return d.displayUrl=s,d}var X,J,Z=((X=function(t,e){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}X(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(Q,J=G),Q.prototype.GenerateEvent=function(t){var e=this;return t.ResizeFrame(this.width,this.height),new W(function(){return t.Write(e.creative)})},Q.prototype.GenerateMessage=function(){return{creative:this.creative}},Q);function Q(t,e,i,r,o,n,s,a){var d=J.call(this,t,e,i,r,o,n,a)||this;return d.creative=s,d}var $,tt,et=(($=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(it,tt=G),it.prototype.GenerateEvent=function(t){var e=this;return"function"!=typeof this.nativeCallback?(R.Error("'nativeCallback' parameter is not a function in placements object"),new W(void 0)):"object"!=typeof this.nativePayload?(R.Error("'nativePayload' parameter is not an object in placements object"),new W(void 0)):new W(function(){return e.nativeCallback(e.nativePayload)})},it.prototype.GenerateMessage=function(){return{nativePayload:this.nativePayload}},it);function it(t,e,i,r,o,n,s,a,d){var c=tt.call(this,t,e,i,r,o,n,d)||this;return c.nativeCallback=s,c.nativePayload=a,c}var rt=92,ot=function(t,e,i,r,o,n,s,a,d,c,l,u,p,h,f,v,g,m,y){this.publisherTagVersion=t,this.slots=e,this.elapsed=i,this.isTimeout=r,this.pageLoadElapsed=o,this.adapterStartElapsed=n,this.cdbCallStartElapsed=s,this.cdbCallEndElapsed=a,this.adapterEndElapsed=d,this.setTargetingElapsed=c,this.adapterTimeout=l,this.adapterIsTimeout=u,this.timeToFirstByte=p,this.id=h,this.previousBuildRequestTimestamp=f,this.silentModeRequestCount=v,this.localStorageKeyCount=g,this.connectionEstablishmentTime=m,this.domainLookupTime=y},nt=function(t,e,i,r,o){this.impressionId=t,this.zoneId=e,this.adUnitId=i,this.cachedBidUsed=r,this.isDsc=o},st=(at.prototype.withElapsed=function(t){return this.elapsed=Math.round(t),this},at.prototype.withIsTimeout=function(t){return(this.isTimeout=t)&&this.events.push({eventId:"CdbCallTimeout"}),this},at.prototype.withPageLoadElapsed=function(t){return this.pageLoadElapsed=Math.round(t),this.events.push({eventId:"AuctionStart",elapsed:this.pageLoadElapsed}),this},at.prototype.withAdapterStartElapsed=function(t){return this.adapterStartElapsed=Math.round(t),this.events.push({eventId:"AdapterBidStart",elapsed:this.adapterStartElapsed}),this},at.prototype.withCdbCallStartElapsed=function(t){return this.cdbCallStartElapsed=Math.round(t),this.events.push({eventId:"CdbCallStart",elapsed:this.cdbCallStartElapsed}),this},at.prototype.withCdbCallEndElapsed=function(t){return this.cdbCallEndElapsed=Math.round(t),this.events.push({eventId:"CdbCallEnd",elapsed:this.cdbCallEndElapsed}),this},at.prototype.withSetTargetingElapsed=function(t){return this.setTargetingElapsed=Math.round(t),this},at.prototype.withAdapterEndElapsed=function(t){return this.adapterEndElapsed=Math.round(t),this.events.push({eventId:"AdapterBidEnd",elapsed:this.adapterEndElapsed}),this},at.prototype.withAdapterTimeout=function(t){return this.adapterTimeout=t&&Math.round(t),this.events.push({eventId:"AdapterTimeout",elapsed:this.adapterTimeout}),this},at.prototype.withSlotIdsMatchedByCache=function(t){return 0<(this.slotIdsMatchedByCache=t).length&&this.events.push({eventId:"CachedBidUsed",slots:this.slotIdsMatchedByCache}),this},at.prototype.withTimeToFirstByte=function(t){return this.timeToFirstByte=t&&Math.round(t),this.timeToFirstByte&&this.events.push({eventId:"TimeToFirstByte",elapsed:this.timeToFirstByte}),this},at.prototype.withConnectionEstablishmentTime=function(t){return this.connectionEstablishmentTime=t&&Math.round(t),this.connectionEstablishmentTime&&this.events.push({eventId:"TcpConnectionElapsedTime",elapsed:this.connectionEstablishmentTime}),this},at.prototype.withDomainLookupTime=function(t){return this.domainLookupTime=t&&Math.round(t),this.domainLookupTime&&this.events.push({eventId:"DomainLookupElapsedTime",elapsed:this.domainLookupTime}),this},at.prototype.withClientRequestId=function(t){return this.clientRequestId=t,this},at.prototype.addSlot=function(e,t,i,r){var o=0<this.slotIdsMatchedByCache.filter(function(t){return t===e}).length;return this.slots.push(new nt(e,t,i,o,r)),this},at.prototype.build=function(){var t;return void 0!==this.adapterTimeout&&(t=this.adapterEndElapsed>this.adapterTimeout),new ot(rt,this.slots,this.elapsed,this.isTimeout,this.pageLoadElapsed,this.adapterStartElapsed,this.cdbCallStartElapsed,this.cdbCallEndElapsed,this.adapterEndElapsed,this.setTargetingElapsed,this.adapterTimeout,t,this.timeToFirstByte,this.clientRequestId,this.metricsManager.getPreviousBuildRequestTimestamp(),this.metricsManager.getSilentModeRequestCount(!0),this.metricsManager.getLocalStorageKeyCount(),this.connectionEstablishmentTime,this.domainLookupTime)},at.prototype.buildBidWonEvent=function(t){if(void 0===this.clientRequestId)throw new Error("buildBidWonEvent() cannot be called without a requestId!");var e={eventId:"BidWon",slots:[t]};return{requestId:this.clientRequestId,events:[e]}},at.prototype.buildSetTargetingEvent=function(){if(void 0===this.clientRequestId)throw new Error("buildSetTargetingEvent() cannot be called without a requestId!");if(this.setTargetingElapsed){var t={eventId:"SetTargeting",elapsed:Math.round(this.setTargetingElapsed)};return{requestId:this.clientRequestId,events:[t]}}throw new Error("buildSetTargetingEvent() cannot be called without a targeting elapsed value!")},at.prototype.buildEvents=function(){if(void 0===this.clientRequestId)throw new Error("buildEvents() cannot be called without a requestId!");var t=[],e=this.metricsManager.getPreviousBuildRequestTimestamp();return e&&t.push({eventId:"UserReturnTime",elapsed:(new Date).getTime()-e}),{requestId:this.clientRequestId,events:this.events.concat(t)}},at);function at(t){this.elapsed=0,this.isTimeout=!1,this.pageLoadElapsed=0,this.adapterStartElapsed=0,this.cdbCallStartElapsed=0,this.cdbCallEndElapsed=0,this.adapterEndElapsed=0,this.slotIdsMatchedByCache=[],this.slots=[],this.events=[],this.metricsManager=t}var dt=(ct.prototype.getRequest=function(){return{feedbacks:this.feedbacks}},ct.prototype.getUrl=function(){return this.urlBuilder.buildCsmUrl(this.profileId,this.adapterVersion,this.wrapperVersion)},ct);function ct(t,e,i,r,o){this.urlBuilder=t,this.profileId=e,this.adapterVersion=r,this.wrapperVersion=o,this.feedbacks=i}var lt,ut,pt=(ht.generateCacheBuster=function(){return Math.floor(99999999999*Math.random())},ht);function ht(){}function ft(t){switch(t.toLowerCase()){case"amp":return lt.AMP;default:return lt.Unspecified}}(ut=lt=lt||{})[ut.Unspecified=0]="Unspecified",ut[ut.AMP=1]="AMP";var vt=(gt.prototype.buildUrl=function(t,e,i,r,o){void 0===i&&(i=lt.Unspecified);var n=gt.CRITEO_BIDDER_URL+this.getHandlerPath();return n+="?ptv=92",!0===e.isAdBlocked&&(n+="&abp=1"),n=this.appendCommonParameters(n,t,r,o),n+=e.ctoIdOnPublisherDomain?"&idcpy="+e.ctoIdOnPublisherDomain:"",n+=e.idfs?"&idfs="+e.idfs:"",n+=e.secureId?"&sid="+e.secureId:"",n+=e.isOptOut?"&optout=1":"",n+=e.bundle?"&bundle="+e.bundle:"",i!==lt.Unspecified&&(n+="&im="+i),n+=e.silentModeIgnored?"&smi=1":"",n+="&cb="+String(pt.generateCacheBuster()),n+=e.getContextFlags()},gt.prototype.buildCsmUrl=function(t,e,i){var r=gt.CRITEO_BIDDER_URL+gt.CRITEO_CSM_HANDLER;return r+="?ptv=92",this.appendCommonParameters(r,t,e,i)},gt.prototype.buildErrorUrl=function(){return gt.CRITEO_BIDDER_URL+gt.CRITEO_ERROR_HANDLER},gt.prototype.buildCsmEventsUrl=function(){return gt.CRITEO_BIDDER_URL+gt.CRITEO_CSM_EVENTS_HANDLER},gt.prototype.buildCsmCountersUrl=function(){return gt.CRITEO_BIDDER_URL+gt.CRITEO_CSM_COUNTERS_HANDLER},gt.prototype.appendCommonParameters=function(t,e,i,r){return t+="&profileId="+String(e),void 0!==i&&(t+="&av="+String(i)),void 0!==r&&(t+="&wv="+encodeURIComponent(r)),t},gt.prototype.getHandlerPath=function(){return this.auditMode?gt.CRITEO_BIDDER_AUDIT_HANDLER:gt.CRITEO_BIDDER_HANDLER},gt.CRITEO_BIDDER_URL="https://bidder.criteo.com/",gt.CRITEO_BIDDER_HANDLER="cdb",gt.CRITEO_CSM_HANDLER="csm",gt.CRITEO_CSM_EVENTS_HANDLER="csm/events",gt.CRITEO_CSM_COUNTERS_HANDLER="csm/counters",gt.CRITEO_ERROR_HANDLER="error",gt.CRITEO_BIDDER_AUDIT_HANDLER="prebid/audit",gt);function gt(t){void 0===t&&(t=!1),this.auditMode=t}var mt=(yt.prototype.getMetrics=function(t,e){if(void 0===e&&(e=yt.TIMING_METRICS_STORAGE_KEY),this.localStorageEnabled){var i=this.localStorageHelper.getItem(e),r=i?f(i):[];return t&&this.localStorageHelper.removeItem(e),Array.isArray(r)?r:[]}return[]},yt.prototype.setMetrics=function(t,e){void 0===e&&(e=yt.TIMING_METRICS_STORAGE_KEY),this.localStorageEnabled&&this.localStorageHelper.setItem(e,JSON.stringify(t),36e5)},yt.prototype.addMetric=function(t,e){void 0===e&&(e=yt.TIMING_METRICS_STORAGE_KEY);var i=this.getMetrics(!1,e);i.push(t),this.setMetrics(i,e)},yt.prototype.storeMetric=function(t){var e=this;if(this.localStorageEnabled){this.addMetric(t);var i=(t&&t.adapterTimeout||2e3)+1e3;setTimeout(function(){e.sendMetrics(e.getMetrics(!0))},i)}},yt.prototype.getManagerMetrics=function(){var t=this.localStorageHelper.getItem(yt.MANAGER_METRICS_STORAGE_KEY);if(null==t)return{};var e=f(t);return void 0===e?{}:e},yt.prototype.setManagerMetrics=function(t){this.localStorageHelper.setItem(yt.MANAGER_METRICS_STORAGE_KEY,JSON.stringify(t))},yt.prototype.getPreviousBuildRequestTimestamp=function(){var t=this.getManagerMetrics().previousBuildRequestTimestamp;return isNaN(t)?void 0:t},yt.prototype.resetPreviousBuildRequestTimestamp=function(){var t=this.getManagerMetrics();t.previousBuildRequestTimestamp=(new Date).getTime().toString(),this.setManagerMetrics(t)},yt.prototype.getSilentModeRequestCount=function(t){void 0===t&&(t=!1);var e=this.getManagerMetrics().silentModeRequestCount;return t&&this.resetSilentModeRequestCount(),isNaN(e)?0:e},yt.prototype.incSilentModeRequestCount=function(){var t=this.getManagerMetrics();t.silentModeRequestCount=isNaN(t.silentModeRequestCount)?1:t.silentModeRequestCount+1,this.setManagerMetrics(t)},yt.prototype.resetSilentModeRequestCount=function(){var t=this.getManagerMetrics();t.silentModeRequestCount=0,this.setManagerMetrics(t)},yt.prototype.getLocalStorageKeyCount=function(){return this.localStorageHelper.getAllItemsByPrefix("criteo_").length+this.localStorageHelper.getAllItemsByPrefix("cto_").length},yt.prototype.sendMetric=function(t){this.sendMetrics([t])},yt.prototype.sendMetrics=function(t){if(!(t.length<=0)){this.resetPreviousBuildRequestTimestamp();var e=new dt(this.urlBuilder,this.profileId,t,this.adapterVersion,this.wrapperVersion),i=e.getUrl(),r=JSON.stringify(e.getRequest());navigator.sendBeacon&&navigator.sendBeacon(i,r)}},yt.TIMING_METRICS_STORAGE_KEY="criteo_pt_cdb_metrics",yt.MANAGER_METRICS_STORAGE_KEY="criteo_pt_cdb_mngr_metrics",yt.EVENTS_METRICS_STORAGE_KEY="criteo_pt_cdb_events_metrics",yt.COUNTERS_METRICS_STORAGE_KEY="criteo_pt_cdb_counters_metrics",yt);function yt(t,e,i,r){this.urlBuilder=new vt,this.profileId=t,this.adapterVersion=e,this.wrapperVersion=i,this.localStorageHelper=r||new o,this.localStorageEnabled=this.localStorageHelper.checkLocalStorage()}var Et=(Ct.clearState=function(){this.cloneByImpressionId={}},Ct.tryInsertPlaceholder=function(t,e){void 0===e&&(e=!1);var i=document.getElementById(t);if(null===i)return!1;if(i.appendChild(this.createPlaceholder()),!e&&this.isVisible(i))return!0;this.removePlaceholder(t);var r=i.parentElement;if(null===r)return!1;var o=this.createClone(i);return r.insertBefore(o,i),o.appendChild(this.createPlaceholder()),this.isVisible(o)?(this.cloneByImpressionId[t]=o,!0):(r.removeChild(o),!1)},Ct.isVisible=function(t){return 0!==t.offsetWidth&&0!==t.offsetHeight&&0!==t.getClientRects().length},Ct.createClone=function(t){var e=t.cloneNode(!1);return e.id=this.generateRandomId(),e.className="","none"===e.style.display&&e.style.removeProperty("display"),e},Ct.generateRandomId=function(){for(var t="1234567890abcdefghijklmnopqrstuvwxyz",e="",i=0;i<20;i++){var r=Math.floor(Math.random()*t.length);e+=t.charAt(r)}return e},Ct.createPlaceholder=function(){var t=document.createElement("div");return t.style.width="1px",t.style.height="1px",t.style.display="block",t.className=Ct.PLACEHOLDER_NAME,t},Ct.removePlaceholder=function(t){var e=this.cloneByImpressionId[t];if(void 0===e){var i=document.getElementById(t);if(null!==i)for(var r=0,o=i.getElementsByClassName(Ct.PLACEHOLDER_NAME);r<o.length;r++){var n=o[r];null!==n.parentNode&&n.parentNode.removeChild(n)}}else null!==e.parentNode&&e.parentNode.removeChild(e)},Ct.insertAdIFrame=function(t){var e,i=this.cloneByImpressionId[t];if(void 0!==i)e=i;else{var r=document.getElementById(t);if(null===r)return null;e=r}for(var o=0,n=e.getElementsByClassName(Ct.PLACEHOLDER_NAME);o<n.length;o++){for(var s=n[o],a=0,d=s.childNodes;a<d.length;a++){var c=d[a];null!==c.parentNode&&c.parentNode.removeChild(c)}var l=this.createAdIFrame();return s.appendChild(l),s.style.width="",s.style.height="",s.style.display="",l}return null},Ct.createAdIFrame=function(){var t=document.createElement("iframe");return t.scrolling="no",t.marginWidth="0",t.marginHeight="0",t.frameBorder="0",t.style.border="0",t.style.verticalAlign="bottom",t},Ct.removePlaceholders=function(t,e){void 0===e&&(e=[]);for(var i=0,r=t;i<r.length;i++){var o=r[i].impId;-1===e.indexOf(o)&&Ct.removePlaceholder(o)}},Ct.tryInsertPlaceholders=function(t,e){void 0===e&&(e=!1);for(var i=[],r=0,o=t;r<o.length;r++){var n=o[r],s=n.impId;Ct.tryInsertPlaceholder(s,e)&&i.push(n)}return i},Ct.PLACEHOLDER_NAME="criteo_placeholder",Ct.cloneByImpressionId={},Ct);function Ct(){}var It=(bt.prototype.isValid=function(){return 0<this.slots.length},bt.prototype.getRequest=function(){for(var t=[],e=0,i=this.slots;e<i.length;e++){var r=i[e],o={slotid:r.slotId,impid:r.impId};if(void 0!==r.zoneId&&(o.zoneid=r.zoneId),void 0!==r.nativeCallback&&(o.native=!0),void 0!==r.transactionId&&(o.transactionid=r.transactionId),void 0!==r.publisherSubId&&(o.publishersubid=r.publisherSubId),void 0!==r.sizes){for(var n=[],s=0,a=r.sizes;s<a.length;s++){var d=a[s];n.push(d.width+"x"+d.height)}o.sizes=n}if(void 0!==r.video){var c={playersizes:this.parsePlayerSizes(r.video.playersize),mimes:r.video.mimes,protocols:r.video.protocols,maxduration:r.video.maxduration,api:r.video.api,skip:r.video.skip,placement:r.video.placement,playbackmethod:r.video.playbackmethod,minduration:r.video.minduration,startdelay:r.video.startdelay};o.video=c}if(void 0!==this.viewportComputer){var l=this.viewportComputer.getSlotPosition(r);void 0!==l&&(o.position={top:l.top,left:l.left})}void 0!==r.ext&&(o.ext=r.ext),t.push(o)}var u={ceh:this.context.ceh,uspOptout:this.context.ccpaOptout,ext:this.context.userExt},p={publisher:{url:this.context.highestAccessibleUrl,ext:this.context.publisherExt},slots:t,user:u};void 0!==this.networkId&&(p.publisher.networkid=this.networkId);var h=this.metricsManager.getMetrics(!0);if(h.length&&(p.previousBidFeedback=h),this.privacyWrapper&&(this.privacyWrapper.gdprConsent&&(p.gdprConsent=this.privacyWrapper.gdprConsent),this.privacyWrapper.ccpaIabConsent&&(u.uspIab=this.privacyWrapper.ccpaIabConsent.uspString)),void 0!==this.viewportComputer){var f=this.viewportComputer.getViewport();p.viewport={width:f.width,height:f.height,scrollTop:f.scrollTop,scrollLeft:f.scrollLeft}}return void 0!==this.adapterTimeout&&(p.tmax=this.adapterTimeout),void 0!==this.clientRequestId&&(p.id=this.clientRequestId),p},bt.parsePlayerSize=function(t){return t[0]+"x"+t[1]},bt.prototype.parsePlayerSizes=function(t){return Array.isArray(t[0])?t.map(function(t){return bt.parsePlayerSize(t)}):[bt.parsePlayerSize(t)]},bt.prototype.getUrl=function(){return this.urlBuilder.buildUrl(this.profileId,this.context,this.integrationMode,this.adapterVersion,this.wrapperVersion)},bt);function bt(t,e,i,r,o,n,s,a,d,c,l,u,p){this.slots=t,this.context=e,this.metricsManager=i,this.urlBuilder=r,this.profileId=o,this.integrationMode=n||lt.Unspecified,this.networkId=s,this.adapterVersion=a,this.privacyWrapper=d,this.wrapperVersion=c,this.viewportComputer=l,this.adapterTimeout=u,this.clientRequestId=p}function _t(t){var e={slots:void 0,time_to_next_call:0};return void 0!==t.exd&&(void 0!==t.exd.time_to_next_call&&(e.time_to_next_call=t.exd.time_to_next_call),e.slots=t.exd.slots,delete t.exd),e}function St(){var i=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?e:3&e|8).toString(16)})}var wt=function(t,e,i,r,o,n,s,a,d){this.slotId=St().replace(/-/g,""),this.impId=t,this.zoneId=e,this.nativeCallback=i,this.transactionId=r,this.sizes=o,this.publisherSubId=n,this.mediaTypes=s,this.video=a,this.ext=d},Tt=function(t,e,i,r,o,n,s,a,d,c){this.playersize=t,this.mimes=e,this.protocols=i,this.maxduration=r,this.api=o,this.skip=n,this.placement=s,this.playbackmethod=a,this.minduration=d,this.startdelay=c},Mt=(Rt.CreateRunning=function(){var t=new Rt;return t.start(),t},Rt.CreateWithStartTime=function(t){var e=new Rt(!1);return e.startTime=t,e},Rt.TimeSincePageLoad=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.timing&&window.performance.timing.navigationStart)return(new Date).getTime()-performance.timing.navigationStart}return 0},Rt.prototype.start=function(){this.startTime=this.now()},Rt.prototype.elapsed=function(){return this.now()-this.startTime},Rt);function Rt(t){void 0===t&&(t=!0),t&&window.performance&&window.performance.now?this.now=window.performance.now.bind(window.performance):Date.now?this.now=Date.now:this.now=function(){return(new Date).getTime()}}var At=(Pt.prototype.sendRequest=function(t){this.url=t,this.sendTime=Mt.CreateRunning(),this.builder.withCdbCallStartElapsed(this.timer.elapsed())},Pt.prototype.requestReceived=function(t){void 0===t&&(t=!1),this.builder.withElapsed(function(t){if(window.performance&&window.performance.getEntries)for(var e=window.performance.getEntries(),i=e.length-1;0<=i;--i){var r=e[i];if(r.name===t&&r.duration)return Math.round(r.duration)}}(this.url)||this.sendTime.elapsed()),this.builder.withCdbCallEndElapsed(this.timer.elapsed()),this.builder.withIsTimeout(t)},Pt.prototype.setTargeting=function(){this.hasSetTargetingBeenCalled||(this.builder.withSetTargetingElapsed(this.timer.elapsed()),this.hasSetTargetingBeenCalled=!0)},Pt.prototype.finish=function(t){if(this.builder.withAdapterEndElapsed(this.timer.elapsed()),t&&0!==t.length)for(var e=0,i=t;e<i.length;e++){var r=i[e];this.builder.addSlot(r.imp_id,r.zone_id,r.ad_unit_id,r.is_dsc)}else this.builder.addSlot("");var o=Pt.getLastCdbTiming();return void 0!==o&&(this.builder.withTimeToFirstByte(Pt.computeTimeToFirstByte(o)),this.builder.withConnectionEstablishmentTime(Pt.computeConnectionEstablishmentTime(o)),this.builder.withDomainLookupTime(Pt.computeDomainLookupTime(o))),this.build()},Pt.getLastCdbTiming=function(){if(void 0!==window.performance&&void 0!==window.performance.getEntriesByType&&"function"==typeof window.performance.getEntriesByType){var t=window.performance.getEntriesByType("resource");if(void 0!==t){var e=t.filter(function(t){return 0<=t.name.indexOf("cdb")});return void 0!==e&&0<e.length?e[e.length-1]:void 0}}},Pt.computeTimeToFirstByte=function(t){var e=t.responseStart,i=t.requestStart;if(void 0!==e&&void 0!==i)return e-i},Pt.computeConnectionEstablishmentTime=function(t){var e=t.connectEnd-t.connectStart;return isNaN(e)?void 0:e},Pt.computeDomainLookupTime=function(t){var e=t.domainLookupEnd-t.domainLookupStart;return isNaN(e)?void 0:e},Pt.prototype.build=function(){return this.builder.build()},Pt);function Pt(t,e,i,r){this.hasSetTargetingBeenCalled=!1,this.builder=t,this.timer=void 0!==e?Mt.CreateWithStartTime(e):Mt.CreateRunning();var o=this.timer.elapsed();this.builder.withAdapterStartElapsed(o),this.builder.withPageLoadElapsed(Mt.TimeSincePageLoad()-o),this.builder.withClientRequestId(r||St()),void 0!==i&&this.builder.withAdapterTimeout(i)}function Ot(t){var e="number"==typeof window.PREBID_TIMEOUT?window.PREBID_TIMEOUT:void 0;return t&&e?Math.min(t,e):t||e||void 0}var Bt=function(t,e){this.top=t,this.left=e},Dt=function(t,e,i,r){this.width=t,this.height=e,this.scrollTop=i,this.scrollLeft=r},xt=(kt.getHighestAccessibleWindow=function(t){var e=t,i=!1;try{for(;e.parent.document!==e.document;){if(!e.parent.document){i=!0;break}e=e.parent}}catch(t){i=!0}return{topFrame:e,err:i}},kt.getHighestAccessibleUrl=function(t){var e=t.topFrame;if(!t.err)return e.location.href;try{var i=e.top.location.href;if(i)return i}catch(t){}try{var r=e.location.ancestorOrigins;if(r)return r[r.length-1]}catch(t){}return e.document.referrer},kt.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}},kt);function kt(){}var Lt=(Ft.prototype.getViewport=function(){var t=xt.getHighestAccessibleWindow(window).topFrame,e=t.document,i=t.innerWidth||e.documentElement.clientWidth,r=t.innerHeight||e.documentElement.clientHeight,o=e.documentElement.scrollTop||e.body&&e.body.scrollTop||0,n=e.documentElement.scrollLeft||e.body&&e.body.scrollLeft||0;return new Dt(i,r,o,n)},Ft.prototype.getSlotPosition=function(t){var e=t.impId,i=document.getElementById(e);if(null!==i){var r=i.getBoundingClientRect();return new Bt(r.top,r.left)}},Ft);function Ft(){}var Nt,Ut,qt=function(){return(qt=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};(Ut=Nt=Nt||{}).Native="native",Ut.Banner="banner",Ut.Video="video";var Wt=(Ht.prototype.hasValidNativeParams=function(t){return!(t.nativeParams&&(t.nativeParams.image&&!0!==t.nativeParams.image.sendId||t.nativeParams.icon&&!0!==t.nativeParams.icon.sendId||t.nativeParams.clickUrl&&!0!==t.nativeParams.clickUrl.sendId||t.nativeParams.displayUrl&&!0!==t.nativeParams.displayUrl.sendId||t.nativeParams.privacyLink&&!0!==t.nativeParams.privacyLink.sendId||t.nativeParams.privacyIcon&&!0!==t.nativeParams.privacyIcon.sendId))},Ht.prototype.setEnableSendAllBids=function(t){this.enableSendAllBids=t},Ht.prototype.buildCdbUrl=function(){return this.url},Ht.prototype.buildCdbRequest=function(){if(this.cache.silentModeEnabled())return R.Debug("Request ignored because the global silent mode is enabled"),void this.metricsManager.incSilentModeRequestCount();if(this.requestBuilder.isValid()){var t=Math.min((this.timeout||5e3)+1e3,5e3);return this.adBlockFlagManager.setAdBlockFlagTimer(t),this.timer.sendRequest(this.url),this.requestBuilder.getRequest()}R.Debug("Request ignored because it doesnt contain any slot")},Ht.GetAllAdapters=function(){return window.Criteo.prebid_adapters},Ht.GetAdapter=function(t){var e="string"==typeof t?t:t.bidRequests[0].auctionId,i=Ht.GetAllAdapters();if(i&&e in i)return i[e]},Ht.createCriteoNativeAdWithCallback=function(t,e,i){return window.criteo_prebid_native_slots=window.criteo_prebid_native_slots||{},window.criteo_prebid_native_slots[t]={callback:i,payload:e},'<script type="text/javascript">\n            var win = window;\n            for (var i = 0; i < 10; ++i) {\n                win = win.parent;\n                if (win.criteo_prebid_native_slots) {\n                    var responseSlot = win.criteo_prebid_native_slots["'+t+'"];\n                    responseSlot.callback(responseSlot.payload);\n                    break;\n                }\n            }\n        <\/script>'},Ht.createPrebidNativeAd=function(t){return{title:t.products[0].title,body:t.products[0].description,sponsoredBy:t.advertiser.description,icon:t.advertiser.logo,image:t.products[0].image,clickUrl:t.products[0].click_url,privacyLink:t.privacy.optout_click_url,privacyIcon:t.privacy.optout_image_url,cta:t.products[0].call_to_action,price:t.products[0].price,impressionTrackers:t.impression_pixels.map(function(t){return t.url})}},Ht.prototype.getBidRequestForSlot=function(t){for(var e=0,i=this.bidRequests;e<i.length;e++){var r=i[e];if(r.adUnitCode===t.impid&&(!r.params.zoneId||parseInt(r.params.zoneId,10)===t.zoneid))return r}},Ht.prototype.getSlotForAdUnitCode=function(t){for(var e=0,i=this.slots;e<i.length;e++){var r=i[e];if(r&&r.impId===t)return r}},Ht.getVideoInfoFromBidRequest=function(t){if(Ht.hasVideoMediaType(t))return new Tt(t.mediaTypes.video.playerSize,t.mediaTypes.video.mimes,t.mediaTypes.video.protocols,t.mediaTypes.video.maxduration,t.mediaTypes.video.api,t.params.video.skip,t.params.video.placement,t.params.video.playbackmethod,t.params.video.minduration,t.params.video.startdelay)},Ht.hasVideoMediaType=function(t){return void 0!==t.params&&void 0!==t.params.video&&!(void 0===t.mediaTypes||void 0===t.mediaTypes.video)},Ht.prototype.interpretResponse=function(t,e){this.timer.requestReceived(),this.adBlockFlagManager.disableAdBlockFlagTimer();var i=_t(t),r={};if(void 0!==i.slots)for(var o=0,n=i.slots;o<n.length;o++)r[(C=n[o]).imp_id]=C;var s,a,d,c,l,u,p,h,f,v,g,m=[];if(t.slots&&Array.isArray(t.slots))for(var y=0,E=t.slots;y<E.length;y++){var C=E[y],I=this.getBidRequestForSlot(C);if(I)if(!0===window.criteo_pubtag.context.isAdBlocked){if(void 0!==(s=C.slotid,a=C.impid,d=C.cpm,c=C.width,l=C.height,u=C.zoneid,p=I.params.nativeCallback,h=C.native,f=C.displayurl,v=C.creative,g=C.deal,T=void 0!==p&&void 0!==h?new et(s,a,d,c,l,u,p,h,g):void 0===f||void 0!==v&&"<script"!==v.substr(0,7)?void 0!==v?new Z(s,a,d,c,l,u,v,g):void 0:new j(s,a,d,c,l,u,f,g))&&Et.tryInsertPlaceholder(I.adUnitCode,!0)){var b=Et.insertAdIFrame(I.adUnitCode);if(null!=b){var _=new M(b.contentDocument);T.GenerateEvent(_).eval(window.criteo_pubtag)}}}else{var S=I.bidId,w=C.ttl||r[C.slotid]&&r[C.slotid].ttl||60,T={requestId:S,adId:St(),cpm:C.cpm,currency:C.currency,netRevenue:!0,ttl:w,creativeId:S,width:C.width,height:C.height,dealId:C.deal};if(C.native)if(I.params.nativeCallback)T.ad=Ht.createCriteoNativeAdWithCallback(S,C.native,I.params.nativeCallback);else{if(this.enableSendAllBids){R.Error("Not supporting non mediation mode");continue}T.native=Ht.createPrebidNativeAd(C.native),T.mediaType=Nt.Native}else C.video?(T.vastUrl=C.displayurl,T.mediaType=Nt.Video):T.ad=C.creative;m.push(T)}else R.Error("Unable to bid request for slot "+C)}return this.cache.handleResponse(this.slots,t,i,!1),this.metricsManager.storeMetric(this.timer.finish(i.slots)),this.cache.clearExpiredItems(),m},Ht.prototype.handleBidWon=function(t){this.updateMetric(t,function(t){t.adapterBidWon=!0})},Ht.prototype.handleBidTimeout=function(){this.timer.requestReceived(!0),this.metricsManager.sendMetric(this.timer.finish()),this.cache.clearExpiredItems()},Ht.prototype.handleSetTargeting=function(t){var e=this;this.timer.setTargeting(),this.updateMetric(t,function(){return e.timer.build()})},Ht.prototype.updateMetric=function(t,e){for(var i=this.metricsManager.getMetrics(!1),r=0;r<i.length;++r)for(var o=0,n=i[r].slots;o<n.length;o++){var s=n[o];if(s.adUnitId===t.adUnitCode){var a=e(s);a&&(i[r]=a)}}this.metricsManager.setMetrics(i)},Ht);function Ht(t,e,i,r,o){var n;this.enableSendAllBids=!0;var s,a,d,c=St();this.timeout=Ot(r.timeout),this.metricsManager=new mt(t,e,o),this.metricBuilder=new st(this.metricsManager),this.timer=new At(this.metricBuilder,r.start,this.timeout,c),this.adBlockFlagManager=E.create(),this.adBlockFlagManager.adBlockFlagEnabled()&&(t=280,window.criteo_pubtag.context.isAdBlocked=!0,s=new Lt),this.auctionId=r.auctionId,this.bidRequests=i,this.slots=[];for(var l,u=!0,p=0,h=i;p<h.length;p++){var f=h[p],v=void 0;f.fpd&&f.fpd.context&&(v=f.fpd.context),f.params.ext&&(v=qt(qt({},v),f.params.ext)),u=this.hasValidNativeParams(f);var g=f.sizes.map(function(t){return new C(t[0],t[1])});(null===(n=f.mediaTypes)||void 0===n?void 0:n.native)&&(0===g.length?g=[new C(2,2)]:g.forEach(function(t,e,i){void 0===t.height&&void 0===t.width&&(i[e]=new C(2,2))})),this.slots.push(new wt(f.adUnitCode,f.params.zoneId,f.params.nativeCallback,f.transactionId,g,f.params.publisherSubId,f.mediaTypes,Ht.getVideoInfoFromBidRequest(f),v)),a=f.params.networkId||a,l=r.ceh,window.criteo_pubtag.context.ceh=l,f.params.integrationMode&&(d=ft(f.params.integrationMode))}u||R.Warning("All native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, privacyLink, privacyIcon)");var m={};r.gdprConsent&&(void 0!==r.gdprConsent.consentString&&(m.consentData=r.gdprConsent.consentString),void 0!==r.gdprConsent.gdprApplies&&(m.gdprApplies=!!r.gdprConsent.gdprApplies),m.version=r.gdprConsent.apiVersion);var y={uspString:r.uspConsent};window.criteo_pubtag.context.publisherExt=r.publisherExt,window.criteo_pubtag.context.userExt=r.userExt,this.cache=new k(window.criteo_pubtag.context,this.slots,a),this.requestBuilder=new It(this.cache.filterNoBidSlots(this.slots),window.criteo_pubtag.context,this.metricsManager,new vt(!1),t,d,a,e,{ccpaIabConsent:y,gdprConsent:m},o,s,this.timeout,c),this.url=this.requestBuilder.getUrl(),window.Criteo.prebid_adapters=window.Criteo.prebid_adapters||{},window.Criteo.prebid_adapters[this.auctionId]=this}var Gt=(Kt.prototype.getCMPFrame=function(){for(var t,e=this.currentWindow,i=0;i<10;++i){try{e.frames.__uspapiLocator&&(t=e)}catch(t){}if(e===this.currentWindow.top)break;e=e.parent}return t},Kt.prototype.hasCallerFunctionInWindow=function(){return"function"==typeof this.currentWindow.__uspapi},Kt.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInWindow()||void 0!==this.getCMPFrame()},Kt.prototype.retrieveConsent=function(i){var t=this,r=Mt.CreateRunning(),o=!1,n=setTimeout(function(){o=!0,R.Warning("Timeout: Unable to resolve CCPA consent after "+t.timeout+"ms"),i(void 0)},this.timeout);this.executeCommand("getUSPData",1,function(t,e){o||(clearTimeout(n),e?(R.Debug("CCPA consent retrieved in "+r.elapsed()+"ms"),Kt.processResponseData(t,i)):(R.Warning("Error retrieving CCPA consent data from CMP"),i(void 0)))})},Kt.processResponseData=function(t,e){t?e(t):(R.Warning("Unable to read CCPA consent data from CMP"),e(void 0))},Kt.prototype.executeCommand=function(t,e,i){var n=this;if(!this.hasCallerFunctionInWindow()){R.Debug("No CCPA CMP defined on current frame");var s=this.getCMPFrame();this.currentWindow.__uspapi=function(t,e,i){if(!s)return R.Warning("CCPA CMP not found in any frame"),void i({msg:"CCPA CMP not found in any frame"},!1);var r=Math.random().toString(10),o={__uspapiCall:{command:t,parameter:e,callId:r}};n.uspapiCallbacks[r]=i,s.postMessage(o,"*")},this.currentWindow.addEventListener("message",function(t){var e="string"==typeof t.data?f(t.data):t.data;if(e&&e.__uspapiReturn&&e.__uspapiReturn.callId&&e.__uspapiReturn.returnValue){var i=e.__uspapiReturn;n.uspapiCallbacks&&n.uspapiCallbacks[i.callId]&&(n.uspapiCallbacks[i.callId](i.returnValue,i.success),delete n.uspapiCallbacks[i.callId])}},!1)}this.currentWindow.__uspapi(t,e,i)},Kt.prototype.hasUserOptOut=function(t){return!(!t||!t.uspString||"1YNY"===t.uspString.toUpperCase()||"1YNN"===t.uspString.toUpperCase()||"1YN-"===t.uspString.toUpperCase()||"1-N-"===t.uspString.toUpperCase()||"1---"===t.uspString)},Kt);function Kt(t,e){void 0===e&&(e=parseInt("50",10)),this.uspapiCallbacks={},this.currentWindow=t,this.timeout=e}var Vt=(zt.prototype.getReadyToRetrieveProvider=function(){return this.tcfv2PrivacyProvider.hasCallerFunctionInFrame()?this.tcfv2PrivacyProvider:this.gdprPrivacyProvider.hasCallerFunctionInFrame()?this.gdprPrivacyProvider:void 0!==this.tcfv2PrivacyProvider.getCMPFrame()?this.tcfv2PrivacyProvider:void 0!==this.gdprPrivacyProvider.getCMPFrame()?this.gdprPrivacyProvider:void 0},zt.prototype.retrieveConsentForPassback=function(t){var e=this.getReadyToRetrieveProvider();void 0===e&&(R.Warning("No compatible GDPR privacy provider found"),t(void 0)),e===this.gdprPrivacyProvider?this.gdprPrivacyProvider.retrieveConsentForPassback(t):e===this.tcfv2PrivacyProvider&&this.tcfv2PrivacyProvider.retrieveConsent(t)},zt.prototype.retrieveConsent=function(t){var e=this.getReadyToRetrieveProvider();void 0===e&&(R.Warning("No compatible GDPR privacy provider found"),t(void 0)),null==e||e.retrieveConsent(t)},zt.prototype.readyToRetrieve=function(){return this.tcfv2PrivacyProvider.readyToRetrieve()||this.gdprPrivacyProvider.readyToRetrieve()},zt);function zt(t,e){this.gdprPrivacyProvider=t,this.tcfv2PrivacyProvider=e}var jt=(Yt.prototype.getCMPFrame=function(){for(var t,e=this.currentWindow,i=0;i<10;++i){try{e.frames.__cmpLocator&&(t=e)}catch(t){}if(e===this.currentWindow.top)break;e=e.parent}return t},Yt.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__cmp},Yt.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},Yt.prototype.pingWithTimeout=function(r,o,t,e,i){function n(t,e){R.Warning(e),clearTimeout(t),i()}var s=this;return setTimeout(function(){var i=setTimeout(function(){n(o,"Timeout: Unable to get ping return after "+t+"ms")},t);s.executeCommand("ping",null,function(t,e){clearTimeout(i),e?(R.Debug("GDPR CMP ping returned in "+r.elapsed()+"ms"),!0!==t.cmpLoaded&&n(o,"GDPR ping returned cmpLoaded which is not true"),R.Debug("GDPR ping returned cmpLoaded which is true")):n(o,"Error sending ping to GDPR CMP")})},e)},Yt.prototype.retrieveConsent=function(i){var t=this,r=Mt.CreateRunning(),o=!1,n=setTimeout(function(){o=!0,R.Warning("Timeout: Unable to resolve GDPR consent after "+t.timeout+"ms"),i(void 0)},this.timeout),s=this.pingWithTimeout(r,n,this.pingTimeout,this.pingDelay,function(){o=!0,R.Warning("Timeout: Unable to ping GDPR API after "+t.pingTimeout+"ms"),i(void 0)});this.executeCommand("getConsentData",null,function(t,e){clearTimeout(s),o||(clearTimeout(n),e?(R.Debug("GDPR consent retrieved in "+r.elapsed()+"ms"),Yt.processConsentData(t,i)):(R.Warning("Error retrieving GDPR consent data from CMP"),i(void 0)))})},Yt.prototype.retrieveConsentForPassback=function(i){var t=this,r=Mt.CreateRunning(),o=!1,n=setTimeout(function(){o=!0,R.Warning("Timeout: Unable to resolve GDPR consent after "+t.timeout+"ms"),i(void 0)},this.timeout),s=this.pingWithTimeout(r,n,this.pingTimeout,this.pingDelay,function(){o=!0,R.Warning("Timeout: Unable to ping GDPR API after "+t.pingTimeout+"ms"),i(void 0)});this.executeCommand("getVendorConsents",[91],function(t,e){clearTimeout(s),o||(clearTimeout(n),e?(R.Debug("Consent (getVendorConsents) retrieved in "+r.elapsed()+"ms"),Yt.processConsentData(t,i)):(R.Warning("Error while calling getVendorConsents from CMP"),i(void 0)))})},Yt.processConsentData=function(t,e){if(t){var i={};void 0!==t.consentData&&(i.consentData=t.consentData),void 0!==t.gdprApplies&&(i.gdprApplies=!!t.gdprApplies),e(i)}else R.Warning("Unable to read GDPR consent data from CMP"),e(void 0)},Yt.prototype.executeCommand=function(t,e,i){var n=this;if(!this.hasCallerFunctionInFrame()){R.Debug("No GDPR CMP defined on current frame");var s=this.getCMPFrame();this.currentWindow.__cmp=function(t,e,i){if(!s)return R.Warning("GDPR CMP not found in any frame"),void i({msg:"GDPR CMP not found in any frame"},!1);var r=Math.random().toString(10),o={__cmpCall:{command:t,parameter:e,callId:r}};n.cmpCallbacks[r]=i,s.postMessage(o,"*")},this.currentWindow.addEventListener("message",function(t){var e="string"==typeof t.data?f(t.data):t.data;if(e&&e.__cmpReturn&&e.__cmpReturn.callId&&e.__cmpReturn.returnValue){var i=e.__cmpReturn;n.cmpCallbacks&&n.cmpCallbacks[i.callId]&&(n.cmpCallbacks[i.callId](i.returnValue,i.success),delete n.cmpCallbacks[i.callId])}},!1)}this.currentWindow.__cmp(t,e,i)},Yt);function Yt(t,e,i,r){void 0===e&&(e=parseInt("10000",10)),void 0===i&&(i=Math.min(e,parseInt("50",10))),void 0===r&&(r=Math.min(e,parseInt("1000",10))),this.cmpCallbacks={},this.currentWindow=t,this.timeout=e,this.pingTimeout=i,this.pingDelay=r}var Xt=(Jt.prototype.getCMPFrame=function(){for(var t,e=this.currentWindow,i=0;i<10;++i){try{e.frames.__tcfapiLocator&&(t=e)}catch(t){}if(e===this.currentWindow.top)break;e=e.parent}return t},Jt.prototype.hasCallerFunctionInFrame=function(){return"function"==typeof this.currentWindow.__tcfapi},Jt.prototype.readyToRetrieve=function(){return this.hasCallerFunctionInFrame()||void 0!==this.getCMPFrame()},Jt.prototype.pingWithTimeout=function(i,r,t,e,o){function n(t,e){R.Warning(e),clearTimeout(t),o()}var s=this;return setTimeout(function(){var e=setTimeout(function(){n(r,"Timeout: Unable to get TCFv2 ping return after "+t+"ms")},t);s.executeCommand("ping",2,function(t){clearTimeout(e),R.Debug("TCFv2 CMP ping returned in "+i.elapsed()+"ms"),"error"===t.cmpStatus?n(r,"Error status on ping to TCFv2 CMP"):(!0!==t.cmpLoaded&&n(r,"TCFv2 ping returned cmpLoaded which is not true"),R.Debug("TCFv2 ping returned cmpLoaded which is true"))})},e)},Jt.prototype.retrieveConsent=function(i){var t=this,r=Mt.CreateRunning(),o=!1,n=setTimeout(function(){o=!0,R.Warning("Timeout: Unable to resolve TCFv2 consent after "+t.timeout+"ms"),i(void 0)},this.timeout),s=this.pingWithTimeout(r,n,this.pingTimeout,this.pingDelay,function(){o=!0,R.Warning("Timeout: Unable to ping TCFv2 API after "+t.pingTimeout+"ms"),i(void 0)});this.executeCommand("getTCData",2,function(t,e){clearTimeout(s),o||(clearTimeout(n),e?(R.Debug("TCFv2 consent retrieved in "+r.elapsed()+"ms"),Jt.processResponseData(t,i)):(R.Warning("Error retrieving TCFv2 consent data from CMP"),i(void 0)))},[91])},Jt.processResponseData=function(t,e){if(t){var i={};void 0!==t.tcData&&(i.consentData=t.tcData),void 0!==t.gdprApplies&&(i.gdprApplies=!!t.gdprApplies),i.version=t.tcfPolicyVersion?t.tcfPolicyVersion:2,e(i)}else R.Warning("Unable to read GDPR consent data from CMP"),e(void 0)},Jt.prototype.executeCommand=function(t,e,i,r){var s=this;if(!this.hasCallerFunctionInFrame()){R.Debug("No TCFv2 CMP defined on current frame");var a=this.getCMPFrame();this.currentWindow.__tcfapi=function(t,e,i,r){if(!a)return R.Warning("TCFv2 CMP not found in any frame"),void i({msg:"TCFv2 CMP not found in any frame"},!1);var o=Math.random().toString(10),n={__tcfapiCall:{command:t,version:e,parameter:r,callId:o}};s.cmpCallbacks[o]=i,a.postMessage(n,"*")},this.currentWindow.addEventListener("message",function(t){var e="string"==typeof t.data?f(t.data):t.data;if(e&&e.__tcfapiReturn&&e.__tcfapiReturn.callId&&e.__tcfapiReturn.returnValue){var i=e.__tcfapiReturn;s.cmpCallbacks&&s.cmpCallbacks[i.callId]&&"function"==typeof s.cmpCallbacks[i.callId]&&(s.cmpCallbacks[i.callId](i.returnValue,i.success),delete s.cmpCallbacks[i.callId])}},!1)}this.currentWindow.__tcfapi(t,e,i,r)},Jt);function Jt(t,e,i,r){void 0===e&&(e=parseInt("10000",10)),void 0===i&&(i=Math.min(e,parseInt("50",10))),void 0===r&&(r=Math.min(e,parseInt("1000",10))),this.cmpCallbacks={},this.currentWindow=t,this.timeout=e,this.pingTimeout=i,this.pingDelay=r}var Zt=(Qt.prototype.send=function(t,e,i,r){var o=void 0!==this.data?"POST":"GET",n=this.getXMLHttpRequest(o,t,e,i,r);if(void 0!==n)n.send(this.data);else{var s=this.getXDomainRequest(o,t,e,i,r);void 0!==s&&s.send(this.data)}},Qt.prototype.getXMLHttpRequest=function(t,e,i,r,o){var n=new XMLHttpRequest;if("withCredentials"in n)return n.open(t,this.url,!0),n.timeout=o||Qt.LOCAL_PASSBACK_TIMEOUT,this.contentType?n.setRequestHeader("Content-type",this.contentType):"POST"===t&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.withCredentials=this.withCredentials,n.onload=function(){4===n.readyState&&200===n.status?e(n.responseText):i(n.readyState,n.status)},n.onerror=function(){i(void 0,void 0)},r&&(n.ontimeout=r),n},Qt.prototype.getXDomainRequest=function(t,e,i,r,o){if("undefined"!=typeof XDomainRequest){var n=new XDomainRequest;return n.timeout=o||Qt.LOCAL_PASSBACK_TIMEOUT,n.open(t,this.url),n.onload=function(){void 0!==n.responseText?e(n.responseText):i(void 0,void 0)},n.onerror&&(n.onerror=function(){i(void 0,void 0)}),n.ontimeout&&r&&(n.ontimeout=r),n}},Qt.LOCAL_PASSBACK_TIMEOUT=3e4,Qt);function Qt(t,e,i,r){void 0===r&&(r=!0),this.url=t,this.data=e,this.contentType=i,this.withCredentials=r}var $t,te,ee=(($t=function(t,e){return($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}$t(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(ie,te=F),ie.prototype.setGDPRConsent=function(t){this.gdprConsent=t},ie.prototype.setCCPAIabConsent=function(t){this.ccpaIabConsent=t},ie.prototype.getMetricBuilder=function(){return this.metricBuilder},ie.prototype.getMetricsManager=function(){return this.metricsManager},ie.prototype.eval=function(t){this.evalWithTimeout(t,void 0)},ie.prototype.evalWithTimeout=function(r,t){var o=this,n=St(),e=ie.getCriteoAdapterBidRequest(),i=ie.getRequestAuctionStart(e),s=t||Ot(e&&e.timeout),a=new At(this.metricBuilder,i,s,n),d=new It(this.slots,r.context,this.metricsManager,this.urlBuilder,this.profileId,this.integrationMode,this.networkId,this.adapterVersion,{ccpaIabConsent:this.ccpaIabConsent,gdprConsent:this.gdprConsent},void 0,this.viewportComputer,s,n);if(d.isValid()&&"undefined"!=typeof JSON){var c=d.getRequest(),l=JSON.stringify(c),u=d.getUrl(),p=new Zt(u,l,"application/x-www-form-urlencoded");a.sendRequest(u),p.send(function(t){try{a.requestReceived();var e=f(t)||{},i=_t(e);void 0!==o.callbackSuccess&&o.callbackSuccess(JSON.stringify(e),i),o.metricsManager.storeMetric(a.finish(i.slots))}catch(t){o.reportAsyncRequestException(r,"onSuccess",t)}r.context.remoteLogging.sendErrorReport(o.urlBuilder,n)},function(t,e){try{a.requestReceived(),void 0!==o.callbackError&&o.callbackError(t,e),o.metricsManager.storeMetric(a.finish())}catch(t){o.reportAsyncRequestException(r,"onError",t)}r.context.remoteLogging.sendErrorReport(o.urlBuilder,n)},function(){try{a.requestReceived(!0),void 0!==o.callbackTimeout&&o.callbackTimeout(),o.metricsManager.storeMetric(a.finish())}catch(t){o.reportAsyncRequestException(r,"onTimeout",t)}r.context.remoteLogging.sendErrorReport(o.urlBuilder,n)},this.timeout)}else{if(!d.isValid()){var h="Request builder invalid";R.Error(h),r.context.remoteLogging.log("Error",h),r.context.remoteLogging.sendErrorReport(this.urlBuilder,n)}this.callbackError(void 0,void 0)}},ie.prototype.reportAsyncRequestException=function(t,e,i){var r=i.stack?i.stack:i.toString();t.context.remoteLogging.log("Exception","Exception caught in AsyncRequest "+e+" callback:\n"+r),R.Error("Error "+e+":\n\t"+r)},ie.getCriteoAdapterBidRequest=function(){try{return window.pbjs._bidsRequested.find(function(t){return"criteo"===t.bidderCode})}catch(t){return}},ie.getRequestAuctionStart=function(t){return t&&t.auctionStart},ie.NAME="directbidding",ie);function ie(t,e,i,r,o,n,s,a,d,c,l,u){var p=te.call(this,ie.NAME)||this;return p.profileId=t,p.urlBuilder=e,p.slots=i,p.metricsManager=u||new mt(t),p.metricBuilder=new st(p.metricsManager),p.callbackSuccess=r,p.callbackError=o,p.callbackTimeout=n,p.timeout=s,p.networkId=a,p.integrationMode=d,p.adapterVersion=c,p.viewportComputer=l,p}var re,oe,ne=((re=function(t,e){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}re(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)})(se,oe=F),se.prototype.eval=function(e){var i=this,t=this.gdprPrivacyProvider.readyToRetrieve(),r=this.ccpaPrivacyProvider.readyToRetrieve();if(t||r){var o,n,s=[];t&&s.push(jt),r&&s.push(Gt),t&&this.gdprPrivacyProvider.retrieveConsent(function(t){s.splice(s.indexOf("GDPR"),1),0===s.length?i.evalWithCmp(e,t,n):o=t}),r&&this.ccpaPrivacyProvider.retrieveConsent(function(t){s.splice(s.indexOf("CCPA"),1),0===s.length?i.evalWithCmp(e,o,t):n=t})}else this.evalWithCmp(e,void 0,void 0)},se.prototype.evalWithCmp=function(t,e,i){var r=this;if(this.cache.silentModeEnabled())return R.Debug("Request ignored because the global silent mode is enabled"),this.getMetricsManager().incSilentModeRequestCount(),void this.callbackSuccess("",void 0);setTimeout(function(){return r.onTimeout()},this.timeout||3e3),this.directBiddingEvent.setGDPRConsent(e),this.directBiddingEvent.setCCPAIabConsent(i),this.directBiddingEvent.evalWithTimeout(t,this.timeout)},se.prototype.onSuccess=function(t,e){if(this.hasResponded=!0,void 0!==e){var i=f(t);this.cache.handleResponse(this.slots,i,e,this.hasTimeouted)}this.hasTimeouted||this.callbackSuccess(t,e),this.cache.clearExpiredItems()},se.prototype.onError=function(t,e){this.hasResponded=!0,this.hasTimeouted||this.callbackError(t,e),this.cache.clearExpiredItems()},se.prototype.onHttpTimeout=function(){this.hasResponded=!0,this.hasTimeouted||this.callbackTimeout(),this.cache.clearExpiredItems()},se.prototype.onTimeout=function(){if(!this.hasResponded){this.hasTimeouted=!0;var e=this.cache.getCachedBids(this.slots),t=Object.keys(e),i=t.map(function(t){return e[t]});0===Object.keys(e).length?this.callbackTimeout():(R.Debug("Cached bids returned because of timeout: ['"+i.map(function(t){return t.impid}).join("', '")+"']"),this.getMetricBuilder().withSlotIdsMatchedByCache(t),this.callbackSuccess(JSON.stringify({slots:i}),void 0))}},se.prototype.getMetricBuilder=function(){return this.directBiddingEvent.getMetricBuilder()},se.prototype.getMetricsManager=function(){return this.directBiddingEvent.getMetricsManager()},se.prototype.getBidCache=function(){return this.cache},se.NAME="directbidding",se);function se(t,e,i,r,o,n,s,a,d,c,l,u,p,h){var f=oe.call(this,se.NAME)||this,v=Math.max(10*(s||3e3),3e3);return f.cache=new k(window.criteo_pubtag.context,i,a),f.directBiddingEvent=new ee(t,e,f.cache.filterNoBidSlots(i),function(t,e){return f.onSuccess(t,e)},function(t,e){return f.onError(t,e)},function(){return f.onHttpTimeout()},v,a,d,c,l,u),f.slots=i,f.callbackSuccess=r,f.callbackError=o,f.callbackTimeout=n,f.timeout=s,f.hasTimeouted=!1,f.hasResponded=!1,f.gdprPrivacyProvider=p||new Vt(new jt(window),new Xt(window)),f.ccpaPrivacyProvider=h||new Gt(window),f}var ae={prebid:"criteo_fast_bid",standalone:"criteo_fast_bid_standalone",index:"criteo_fast_bid_index"};var de=(ce.LoadPolyfills=function(){ce.DefineIsArray(),ce.DefineIndexOf(),ce.DefineFilter()},ce.DefineIsArray=function(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})},ce.DefineIndexOf=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(void 0===e&&(e=0),void 0===this)throw new TypeError("'this' is null or not defined");var i=this.length;if(0===i)return-1;if(i<=e)return-1;for(var r=Math.max(0<=e?e:i-Math.abs(e),0);r<i;){if(r in this&&this[r]===t)return r;r++}return-1})},ce.DefineFilter=function(){Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||void 0===this)throw new TypeError;var e=this.length;if("function"!=typeof t)throw new TypeError;for(var i=[],r=2<=arguments.length?arguments[1]:void 0,o=0;o<e;o++)if(o in this){var n=this[o];t.call(r,n,o,this)&&i.push(n)}return i})},ce);function ce(){}var le,ue,pe=(he.SetCookie=function(t,e,i,r,o){void 0===o&&(o=!1);var n=r||document,s=n.location.hostname,a=new Date;a.setTime(a.getTime()+60*i*60*1e3);var d="expires="+a.toUTCString();if(!o)return he.setCookieString(t,e,d,void 0,n),s;for(var c=s.split("."),l=0;l<c.length;++l){var u=c.slice(c.length-l-1,c.length).join(".");he.setCookieString(t,e,d,u,n);var p=he.GetCookie(t,r);if(p&&p===e)return u}return s},he.DeleteCookie=function(t,e,i){void 0===i&&(i=!1),he.SetCookie(t,"",0,e,i)},he.GetCookie=function(t,e){for(var i=0,r=(e||document).cookie.split(";");i<r.length;i++){var o=r[i],n=o.substr(0,o.indexOf("=")).replace(/^\s+|\s+$/g,""),s=o.substr(o.indexOf("=")+1);if(n===t)return decodeURIComponent(s)}},he.setCookieString=function(t,e,i,r,o){var n=t+"="+encodeURIComponent(e)+";"+i+";";r&&""!==r&&(n+="domain=."+r+";"),o.cookie=n+"path=/"},he);function he(){}function fe(e,i){try{return decodeURIComponent(e)}catch(t){return void 0!==i?i:e}}(ue=le=le||{})[ue.None=0]="None",ue[ue.Cookie=1]="Cookie",ue[ue.LocalStorage=2]="LocalStorage";var ve=(ge.isSafariBrowser=function(){return null!==navigator.userAgent.match(ge.SAFARI_CHECK_REGEX)},ge.isAndroidBrowser=function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")},ge.isFirefoxBrowser=function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")},ge.isEdgeChromiumBrowser=function(){return-1<navigator.userAgent.toLowerCase().indexOf("edg/")},ge.isEdgeLegacyBrowser=function(){return-1<navigator.userAgent.toLowerCase().indexOf("edge/")},ge.prototype.synchronizeCriteoUid=function(t,e){var i=this;if((t||ge.isSafariBrowser()||ge.isAndroidBrowser()||ge.isFirefoxBrowser()||ge.isEdgeChromiumBrowser()||ge.isEdgeLegacyBrowser())&&(e&&(this.tcfV2ConsentString=e),this.topWin.addEventListener))if("complete"===this.topDoc.readyState)this.appendGumIframeIfDoesNotExist();else{var r=function(){i.topDoc.removeEventListener("DOMContentLoaded",r),i.topWin.removeEventListener("load",r),i.appendGumIframeIfDoesNotExist()};this.topWin.addEventListener("load",r,!1),this.topDoc.addEventListener("DOMContentLoaded",r,!1)}},ge.prototype.appendGumIframeIfDoesNotExist=function(){var n=this,t=this.createGumIframe();this.topDoc.getElementById(ge.SYNCFRAME_ID)||(this.topWin.addEventListener("message",function(t){var e=t.data;if(e&&e.isCriteoMessage)if(t.stopImmediatePropagation(),e.optout)n.setClientSideOptOut(),n.deleteClientSideUid(),n.deleteClientSideIdfs(),n.deleteClientSideSecureId(),n.deleteBundle();else{if(e.uid&&n.setClientSideUid(e.uid),e.idfs&&n.setClientSideIdfs(e.idfs),e.callbacks)for(var i=0,r="string"==typeof e.callbacks?[e.callbacks]:e.callbacks;i<r.length;i++){var o=r[i];(new Image).src=o}else e.bundle&&n.setBundle(e.bundle);e.removeSid?n.deleteClientSideSecureId():e.sid&&n.setClientSideSecureId(e.sid)}},!0),this.topDoc.body.appendChild(t))},ge.prototype.getClientSideUid=function(){return this.getFromAllStorages(ge.GUID_COOKIE_NAME)},ge.prototype.setClientSideUid=function(t){this.writeOnAllStorages(ge.GUID_COOKIE_NAME,t,ge.GUID_RETENTION_TIME_HOUR)},ge.prototype.deleteClientSideUid=function(){this.deleteFromAllStorage(ge.GUID_COOKIE_NAME)},ge.prototype.getBundle=function(){return this.getFromAllStorages(ge.BUNDLE_COOKIE_NAME)},ge.prototype.setBundle=function(t){this.writeOnAllStorages(ge.BUNDLE_COOKIE_NAME,t,ge.GUID_RETENTION_TIME_HOUR)},ge.prototype.deleteBundle=function(){this.deleteFromAllStorage(ge.BUNDLE_COOKIE_NAME)},ge.prototype.getClientSideOptOut=function(){var t=this.getFromAllStorages(ge.OPTOUT_COOKIE_NAME);return{value:"1"===t.value,origin:t.origin}},ge.prototype.setClientSideOptOut=function(){this.writeOnAllStorages(ge.OPTOUT_COOKIE_NAME,"1",ge.OPTOUT_RETENTION_TIME_HOUR)},ge.prototype.deleteClientSideIdfs=function(){this.deleteFromAllStorage(ge.IDFS_COOKIE_NAME)},ge.prototype.getClientSideIdfs=function(){return this.getFromAllStorages(ge.IDFS_COOKIE_NAME)},ge.prototype.setClientSideIdfs=function(t){this.writeOnAllStorages(ge.IDFS_COOKIE_NAME,t,ge.GUID_RETENTION_TIME_HOUR)},ge.prototype.getClientSideSecureId=function(){return this.getFromAllStorages(ge.SECURE_ID_COOKIE_NAME)},ge.prototype.setClientSideSecureId=function(t){this.writeOnAllStorages(ge.SECURE_ID_COOKIE_NAME,t,ge.GUID_RETENTION_TIME_HOUR)},ge.prototype.deleteClientSideSecureId=function(){this.deleteFromAllStorage(ge.SECURE_ID_COOKIE_NAME)},ge.prototype.getClientSideLocalWebId=function(){return this.getFromAllStorages(ge.LOCAL_WEB_ID_COOKIE_NAME)},ge.prototype.checkCookiesAreWriteable=function(){var t="cto_writeable";pe.SetCookie(t,"1",1,this.topDoc,!0);var e="1"===pe.GetCookie(t,this.topDoc);return pe.DeleteCookie(t,this.topDoc,!0),e},ge.prototype.createGumIframe=function(){var t=this.topDoc.createElement("iframe");return t.src=this.buildSyncframeSrc(),t.id=ge.SYNCFRAME_ID,t.style.display="none",t},ge.prototype.writeOnAllStorages=function(t,e,i){this.localStorageEnabled&&this.localStorageHelper.setItem(t,e),pe.SetCookie(t,e,i,this.topDoc,!0)},ge.prototype.getFromAllStorages=function(t){var e,i=pe.GetCookie(t,this.topDoc);return this.localStorageEnabled&&(e=this.localStorageHelper.getItem(t)||void 0),{value:i||e,origin:(i&&le.Cookie)|(e&&le.LocalStorage)}},ge.prototype.deleteFromAllStorage=function(t){pe.DeleteCookie(t,this.topDoc,!0),this.localStorageEnabled&&this.localStorageHelper.removeItem(t)},ge.prototype.getTld=function(){var t=pe.SetCookie(ge.TLD_TEST_COOKIE_NAME,"test",1,this.topDoc,!0);return pe.DeleteCookie(ge.TLD_TEST_COOKIE_NAME,this.topDoc,!0),t},ge.prototype.buildSyncframeSrc=function(){var t,e,i=this.getClientSideUid(),r=this.getClientSideIdfs(),o=this.getClientSideOptOut(),n=this.getClientSideSecureId(),s=this.getClientSideLocalWebId(),a=this.getBundle(),d=this.getTld(),c=encodeURIComponent((t=this.topUrl,(e=document.createElement("a")).href=t,{protocol:e.protocol,host:e.host,hostname:e.hostname,pathname:"/"===e.pathname[0]?e.pathname.slice(1):e.pathname,search:e.search,href:e.href}).hostname),l=this.canWriteCookies,u="https://gum.criteo.com/syncframe?topUrl="+c+(this.isDebug?"&debug=1":"")+(this.tcfV2ConsentString?"&gdprString="+this.tcfV2ConsentString:"");return u+="#"+JSON.stringify({optout:o,uid:i,idfs:r,sid:n,origin:"publishertag",version:92,lwid:s,tld:d,bundle:a,topUrl:c,cw:l})},ge.GUID_COOKIE_NAME="cto_idcpy",ge.GUID_RETENTION_TIME_HOUR=9360,ge.IDFS_COOKIE_NAME="cto_idfs",ge.SECURE_ID_COOKIE_NAME="cto_sid",ge.LOCAL_WEB_ID_COOKIE_NAME="cto_lwid",ge.BUNDLE_COOKIE_NAME="cto_bundle",ge.OPTOUT_COOKIE_NAME="cto_optout",ge.OPTOUT_RETENTION_TIME_HOUR=43200,ge.TLD_TEST_COOKIE_NAME="cto_pub_test_tld",ge.SYNCFRAME_ID="criteo-syncframe",ge.SAFARI_CHECK_REGEX=/^Mozilla\/5\.0 \([^)]+\) AppleWebKit\/[^ ]+ \(KHTML, like Gecko\) Version\/([^ ]+)( Mobile\/[^ ]+)? Safari\/[^ ]+$/i,ge);function ge(t,e,i){this.isDebug=e,this.topWin=t,this.topDoc=t.document,this.localStorageHelper=new o(this.topWin),this.localStorageEnabled=this.localStorageHelper.checkLocalStorage(),this.canWriteCookies=this.checkCookiesAreWriteable(),this.topUrl=i}var me=function(t,e){this.errorType=t,this.messages=e},ye=function(t,e,i){this.environment=t,this.errors=e,this.requestId=i},Ee=(Ce.prototype.withMessage=function(t,e){return t in this.messages||(this.messages[t]=new Array),this.messages[t].push(e),this},Ce.prototype.withRequestId=function(t){return this.requestId=t,this},Ce.prototype.build=function(){var t=Array();for(var e in this.messages)null!=e&&t.push(new me(e,this.messages[e]));return new ye(this.environment,t,this.requestId)},Ce);function Ce(t){this.messages={},this.environment=t}var Ie,be,_e=(Se.prototype.reportPending=function(){return this.shouldSend},Se.prototype.sendErrorReport=function(t,e){if(this.shouldSend){void 0!==e&&this.builder.withRequestId(e);var i=this.builder.build(),r=t.buildErrorUrl();r+=this.debug?"?debug=1":"";var o=JSON.stringify(i);navigator.sendBeacon&&navigator.sendBeacon(r,o),this.shouldSend=!1,this.builder=new Ee(Se.environment)}},Se.prototype.log=function(t,e){this.shouldSend=!0,this.builder.withMessage(t,e)},Se.environment="PublisherTag Version 92",Se);function Se(t){void 0===t&&(t=!1),this.builder=new Ee(Se.environment),this.shouldSend=!1,this.debug=t}(be=Ie=Ie||{})[be.InFriendlyIframe=1]="InFriendlyIframe",be[be.InUnfriendlyIframe=2]="InUnfriendlyIframe",be[be.DirectIntegration=3]="DirectIntegration";var we=(Te.prototype.getContextFlags=function(){var t="";return t+=this.debugMode?"&debug=1":"",t+=this.noLog?"&nolog=1":""},Te.prototype.getDisplayContext=function(t){return xt.inIframe()?t.err?Ie.InUnfriendlyIframe:Ie.InFriendlyIframe:Ie.DirectIntegration},Te.prototype.getQueryStringParams=function(t){var e={},i=t.split("?");if(1<i.length)for(var r=0,o=i[1].split("&");r<o.length;r++){var n=o[r].split("=");e[fe(n[0])]=fe(n[1])}return e},Te.prototype.synchronizeCriteoUid=function(t){var e=this.cookieSynchronizerFactory();this.ctoIdOnPublisherDomain=e.getClientSideUid().value,this.isOptOut=e.getClientSideOptOut().value,this.idfs=e.getClientSideIdfs().value,this.secureId=e.getClientSideSecureId().value,this.bundle=e.getBundle().value,e.synchronizeCriteoUid(!1,t)},Te.prototype.getIdfs=function(){return[this.idfs,this.secureId].join(":")},Te.prototype.setIdfs=function(t){var e=t.split(":");e[0]&&(this.idfs=e[0]),e[1]&&(this.secureId=e[1])},Te.prototype.computeShouldIgnoreSilentMode=function(){return Math.floor(100*Math.random())<5},Te.prototype.setSilentModeIgnored=function(){this.silentModeIgnored=!0},Te.prototype.retrievePrivacyConsent=function(e){var t=this.tcfv2PrivacyProvider.readyToRetrieve(),i=this.ccpaPrivacyProvider.readyToRetrieve();t||i||e(void 0,void 0);var r,o,n=[];t&&n.push(Xt),i&&n.push(Gt),t&&this.tcfv2PrivacyProvider.retrieveConsent(function(t){n.splice(n.indexOf("TCF"),1),0===n.length?e(o,t):r=t}),i&&this.ccpaPrivacyProvider.retrieveConsent(function(t){n.splice(n.indexOf("CCPA"),1),0===n.length?e(t,r):o=t})},Te);function Te(t,e,i,r,o){var n=this;this.charset=t.charset||t.characterSet||"";var s=xt.getHighestAccessibleWindow(e);this.displayContext=this.getDisplayContext(s),this.highestAccessibleUrl=xt.getHighestAccessibleUrl(s),this.ccpaPrivacyProvider=i||new Gt(e),this.tcfv2PrivacyProvider=o||new Xt(e),this.cookieSynchronizerFactory=r||function(){return new ve(s.topFrame,n.debugMode,n.highestAccessibleUrl)},this.retrievePrivacyConsent(function(t,e){n.ccpaPrivacyProvider.hasUserOptOut(t)||n.synchronizeCriteoUid(null===e||void 0===e?void 0:e.consentData)});var a,d=this.getQueryStringParams(this.highestAccessibleUrl);this.debugMode="1"===d.pbt_debug||!1,this.noLog="1"===d.pbt_nolog||!1,this.shouldIgnoreSilentMode=this.computeShouldIgnoreSilentMode(),this.silentModeIgnored=!1,this.remoteLogging=new _e(this.debugMode),this.debugMode&&(a=c.Debug,R.LOGLEVEL=a),this.location=e.location,this.dising=!1,this.ct0=void 0,this.wpdt0=void 0,this.isAdBlocked=void 0,this.rtaVarNames=[]}var Me=function(){this.bids={},this.lineItemRanges=[],this.impIds=[]};var Re,Ae,Pe,Oe,Be,De=(xe.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,r=t;i<r.length;i++){var o=r[i];this.events.push(o)}this.evalEvents()},xe.prototype.evalEvents=function(){for(var t=0;t<this.events.length;){var e=this.events[t];if("conditionalEvent"!==e.name||e.canEval()){var i=this.events.splice(t,1);try{i[0].eval(this)}catch(t){R.Error("An exception occurred processing an event: "+t.toString())}}else t++}},xe.VERSION=rt,xe);function xe(){this.standaloneBidder=new Me,this.events=[],this.context=new we(document,window),R.Debug("Publisher Tag loaded")}function ke(t){function e(){try{return i.apply(this,arguments)}catch(t){R.Error("Exception caught: "+t.toString())}}var i=t;for(var r in e.prototype=i.prototype,i)i.hasOwnProperty(r)&&(e[r]=i[r]);return e}window.criteo_pubtag||(de.LoadPolyfills(),window.criteo_pubtag=new De),window.Criteo=function t(e){for(var i in e)if(i in e){var r=e[i];"function"==typeof r?e[i]=ke(r):"object"==typeof r&&(e[i]=t(r))}return e}({PubTag:{Adapters:{Prebid:Wt},DirectBidding:{DirectBiddingEvent:ne,DirectBiddingSlot:wt,DirectBiddingUrlBuilder:vt,Size:C}},events:window.Criteo?window.Criteo.events:[],passbackEvents:window.Criteo?window.Criteo.passbackEvents:[],usePrebidEvents:!window.Criteo||window.Criteo.usePrebidEvents}),!1!==window.Criteo.usePrebidEvents&&(window.Criteo.events=(Re=window.Criteo.events,Ae={push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(void 0!==t)for(var i=0,r=t;i<r.length;i++){var o=r[i];"function"==typeof o&&ke(o)()}}},Re&&Array.isArray(Re)&&Ae.push.apply(Ae,Re),Ae)),Pe="prebid",Oe=new o,Be=ae[Pe],Oe.checkLocalStorage()&&null===Oe.getItem(Be,864e5)&&new Zt("https://static.criteo.net/js/ld/publishertag."+Pe+".js",void 0,void 0,!1).send(function(t){Oe.setItem(Be,t,864e5)},function(t,e){R.Error("Could not update FastBid"+(e?" ("+e+")":""))})}();</script><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
    <!--<base href="/">--><base href=".">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1abc9c">

    <link rel="shortcut icon" href="https://jasonwatmore.com/_content/images/favicon.png" type="image/png">
    <link rel="icon" href="https://jasonwatmore.com/_content/images/favicon.png" type="image/png">

    <title>ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens | Jason Watmore's Blog</title>
    <meta name="description" content="How to implement JWT authentication with refresh tokens in an ASP.NET Core 3.1 API. Includes example client app built with Angular.">

    <meta name="og:image" content="https://jasonwatmore.com/_content/images/jason.jpg">
    <meta name="google-site-verification" content="a4YkrMcfVrBVfqy9-CVlkN8jaezJAAxJCEMhlEo-_CE">

    
        <link rel="canonical" href="https://jasonwatmore.com/post/2020/05/25/aspnet-core-3-api-jwt-authentication-with-refresh-tokens">
    

    

    

    <style>
        /* fonts & icons */
        /* https://fonts.googleapis.com/css?family=Montserrat:400,700 */
@font-face {
    font-family: 'Montserrat';
    font-style: normal;
    font-weight: 400;
    src: local('Montserrat-Regular'), url(https://fonts.gstatic.com/s/montserrat/v7/zhcz-_WihjSQC0oHJ9TCYPk_vArhqVIZ0nv9q090hN8.woff2) format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}
@font-face {
    font-family: 'Montserrat';
    font-style: normal;
    font-weight: 700;
    src: local('Montserrat-Bold'), url(https://fonts.gstatic.com/s/montserrat/v7/IQHow_FEYlDC4Gzy_m8fcoWiMMZ7xLd792ULpGE4W_Y.woff2) format('woff2');
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215, U+E0FF, U+EFFD, U+F000;
}

        @font-face {
  font-family: 'icomoon';
  src:  url('/_content/icomoon/fonts/icomoon.eot?53zxaz');
  src:  url('/_content/icomoon/fonts/icomoon.eot?53zxaz#iefix') format('embedded-opentype'),
    url('/_content/icomoon/fonts/icomoon.ttf?53zxaz') format('truetype'),
    url('/_content/icomoon/fonts/icomoon.woff?53zxaz') format('woff'),
    url('/_content/icomoon/fonts/icomoon.svg?53zxaz#icomoon') format('svg');
  font-weight: normal;
  font-style: normal;
}

[class^="icon-"], [class*=" icon-"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  font-family: 'icomoon' !important;
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;

  /* Better Font Rendering =========== */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icon-cross:before {
  content: "\e900";
}
.icon-twitter:before {
  content: "\ea96";
}
.icon-rss:before {
  content: "\ea9b";
  font-size: 18px;
}
.icon-youtube:before {
  content: "\ea9d";
}
.icon-github:before {
  content: "\eab0";
}


        /* bootstrap */
        /*!
    * Bootstrap v3.0.3 (http://getbootstrap.com)
    * Copyright 2013 Twitter, Inc.
    * Licensed under http://www.apache.org/licenses/LICENSE-2.0
    */

/*! normalize.css v2.1.3 | MIT License | git.io/normalize */
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block}audio:not([controls]){display:none;height:0}[hidden],template{display:none}html{font-family:sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body{margin:0}a{background:transparent}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{margin:.67em 0;font-size:2em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}hr{height:0;-moz-box-sizing:content-box;box-sizing:content-box}mark{color:#000;background:#ff0}code,kbd,pre,samp{font-family:monospace,serif;font-size:1em}pre{white-space:pre-wrap}q{quotes:"\201C" "\201D" "\2018" "\2019"}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:0}fieldset{padding:.35em .625em .75em;margin:0 2px;border:1px solid #c0c0c0}legend{padding:0;border:0}button,input,select,textarea{margin:0;font-family:inherit;font-size:100%}button,input{line-height:normal}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button}button[disabled],html input[disabled]{cursor:default}input[type="checkbox"],input[type="radio"]{padding:0;box-sizing:border-box}input[type="search"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}@media print{*{color:#000!important;text-shadow:none!important;background:transparent!important;box-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100%!important}@page{margin:2cm .5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}select{background:#fff!important}.navbar{display:none}.table td,.table th{background-color:#fff!important}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table-bordered th,.table-bordered td{border:1px solid #ddd!important}}*,*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.428571429;color:#333;background-color:#fff}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#428bca;text-decoration:none}a:hover,a:focus{color:#2a6496;text-decoration:underline}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}img{vertical-align:middle}.img-responsive{display:block;height:auto;max-width:100%}.img-rounded{border-radius:6px}.img-thumbnail{display:inline-block;height:auto;max-width:100%;padding:4px;line-height:1.428571429;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:500;line-height:1.1;color:inherit}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small,.h1 small,.h2 small,.h3 small,.h4 small,.h5 small,.h6 small,h1 .small,h2 .small,h3 .small,h4 .small,h5 .small,h6 .small,.h1 .small,.h2 .small,.h3 .small,.h4 .small,.h5 .small,.h6 .small{font-weight:normal;line-height:1;color:#999}h1,h2,h3{margin-top:20px;margin-bottom:10px}h1 small,h2 small,h3 small,h1 .small,h2 .small,h3 .small{font-size:65%}h4,h5,h6{margin-top:10px;margin-bottom:10px}h4 small,h5 small,h6 small,h4 .small,h5 .small,h6 .small{font-size:75%}h1,.h1{font-size:36px}h2,.h2{font-size:30px}h3,.h3{font-size:24px}h4,.h4{font-size:18px}h5,.h5{font-size:14px}h6,.h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:200;line-height:1.4}@media(min-width:768px){.lead{font-size:21px}}small,.small{font-size:85%}cite{font-style:normal}.text-muted{color:#999}.text-primary{color:#428bca}.text-primary:hover{color:#3071a9}.text-warning{color:#8a6d3b}.text-warning:hover{color:#66512c}.text-danger{color:#a94442}.text-danger:hover{color:#843534}.text-success{color:#3c763d}.text-success:hover{color:#2b542c}.text-info{color:#31708f}.text-info:hover{color:#245269}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ul,ol{margin-top:0;margin-bottom:10px}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline>li{display:inline-block;padding-right:5px;padding-left:5px}.list-inline>li:first-child{padding-left:0}dl{margin-top:0;margin-bottom:20px}dt,dd{line-height:1.428571429}dt{font-weight:bold}dd{margin-left:0}@media(min-width:768px){.dl-horizontal dt{float:left;width:160px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}.dl-horizontal dd:before,.dl-horizontal dd:after{display:table;content:" "}.dl-horizontal dd:after{clear:both}.dl-horizontal dd:before,.dl-horizontal dd:after{display:table;content:" "}.dl-horizontal dd:after{clear:both}}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #999}.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:10px 20px;margin:0 0 20px;border-left:5px solid #eee}blockquote p{font-size:17.5px;font-weight:300;line-height:1.25}blockquote p:last-child{margin-bottom:0}blockquote small,blockquote .small{display:block;line-height:1.428571429;color:#999}blockquote small:before,blockquote .small:before{content:'\2014 \00A0'}blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0}blockquote.pull-right p,blockquote.pull-right small,blockquote.pull-right .small{text-align:right}blockquote.pull-right small:before,blockquote.pull-right .small:before{content:''}blockquote.pull-right small:after,blockquote.pull-right .small:after{content:'\00A0 \2014'}blockquote:before,blockquote:after{content:""}address{margin-bottom:20px;font-style:normal;line-height:1.428571429}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}code{padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;border-radius:4px}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.428571429;color:#333;word-break:break-all;word-wrap:break-word;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.container:before,.container:after{display:table;content:" "}.container:after{clear:both}.container:before,.container:after{display:table;content:" "}.container:after{clear:both}@media(min-width:768px){.container{width:750px}}@media(min-width:992px){.container{width:970px}}@media(min-width:1200px){.container{width:1170px}}.row{margin-right:-15px;margin-left:-15px}.row:before,.row:after{display:table;content:" "}.row:after{clear:both}.row:before,.row:after{display:table;content:" "}.row:after{clear:both}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{position:relative;min-height:1px;padding-right:15px;padding-left:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666666666666%}.col-xs-10{width:83.33333333333334%}.col-xs-9{width:75%}.col-xs-8{width:66.66666666666666%}.col-xs-7{width:58.333333333333336%}.col-xs-6{width:50%}.col-xs-5{width:41.66666666666667%}.col-xs-4{width:33.33333333333333%}.col-xs-3{width:25%}.col-xs-2{width:16.666666666666664%}.col-xs-1{width:8.333333333333332%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666666666666%}.col-xs-pull-10{right:83.33333333333334%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666666666666%}.col-xs-pull-7{right:58.333333333333336%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666666666667%}.col-xs-pull-4{right:33.33333333333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.666666666666664%}.col-xs-pull-1{right:8.333333333333332%}.col-xs-pull-0{right:0}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666666666666%}.col-xs-push-10{left:83.33333333333334%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666666666666%}.col-xs-push-7{left:58.333333333333336%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666666666667%}.col-xs-push-4{left:33.33333333333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.666666666666664%}.col-xs-push-1{left:8.333333333333332%}.col-xs-push-0{left:0}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666666666666%}.col-xs-offset-10{margin-left:83.33333333333334%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666666666666%}.col-xs-offset-7{margin-left:58.333333333333336%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666666666667%}.col-xs-offset-4{margin-left:33.33333333333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.666666666666664%}.col-xs-offset-1{margin-left:8.333333333333332%}.col-xs-offset-0{margin-left:0}@media(min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666666666666%}.col-sm-10{width:83.33333333333334%}.col-sm-9{width:75%}.col-sm-8{width:66.66666666666666%}.col-sm-7{width:58.333333333333336%}.col-sm-6{width:50%}.col-sm-5{width:41.66666666666667%}.col-sm-4{width:33.33333333333333%}.col-sm-3{width:25%}.col-sm-2{width:16.666666666666664%}.col-sm-1{width:8.333333333333332%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666666666666%}.col-sm-pull-10{right:83.33333333333334%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666666666666%}.col-sm-pull-7{right:58.333333333333336%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666666666667%}.col-sm-pull-4{right:33.33333333333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.666666666666664%}.col-sm-pull-1{right:8.333333333333332%}.col-sm-pull-0{right:0}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666666666666%}.col-sm-push-10{left:83.33333333333334%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666666666666%}.col-sm-push-7{left:58.333333333333336%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666666666667%}.col-sm-push-4{left:33.33333333333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.666666666666664%}.col-sm-push-1{left:8.333333333333332%}.col-sm-push-0{left:0}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666666666666%}.col-sm-offset-10{margin-left:83.33333333333334%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666666666666%}.col-sm-offset-7{margin-left:58.333333333333336%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666666666667%}.col-sm-offset-4{margin-left:33.33333333333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.666666666666664%}.col-sm-offset-1{margin-left:8.333333333333332%}.col-sm-offset-0{margin-left:0}}@media(min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666666666666%}.col-md-10{width:83.33333333333334%}.col-md-9{width:75%}.col-md-8{width:66.66666666666666%}.col-md-7{width:58.333333333333336%}.col-md-6{width:50%}.col-md-5{width:41.66666666666667%}.col-md-4{width:33.33333333333333%}.col-md-3{width:25%}.col-md-2{width:16.666666666666664%}.col-md-1{width:8.333333333333332%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666666666666%}.col-md-pull-10{right:83.33333333333334%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666666666666%}.col-md-pull-7{right:58.333333333333336%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666666666667%}.col-md-pull-4{right:33.33333333333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.666666666666664%}.col-md-pull-1{right:8.333333333333332%}.col-md-pull-0{right:0}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666666666666%}.col-md-push-10{left:83.33333333333334%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666666666666%}.col-md-push-7{left:58.333333333333336%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666666666667%}.col-md-push-4{left:33.33333333333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.666666666666664%}.col-md-push-1{left:8.333333333333332%}.col-md-push-0{left:0}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666666666666%}.col-md-offset-10{margin-left:83.33333333333334%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666666666666%}.col-md-offset-7{margin-left:58.333333333333336%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666666666667%}.col-md-offset-4{margin-left:33.33333333333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.666666666666664%}.col-md-offset-1{margin-left:8.333333333333332%}.col-md-offset-0{margin-left:0}}@media(min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666666666666%}.col-lg-10{width:83.33333333333334%}.col-lg-9{width:75%}.col-lg-8{width:66.66666666666666%}.col-lg-7{width:58.333333333333336%}.col-lg-6{width:50%}.col-lg-5{width:41.66666666666667%}.col-lg-4{width:33.33333333333333%}.col-lg-3{width:25%}.col-lg-2{width:16.666666666666664%}.col-lg-1{width:8.333333333333332%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666666666666%}.col-lg-pull-10{right:83.33333333333334%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666666666666%}.col-lg-pull-7{right:58.333333333333336%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666666666667%}.col-lg-pull-4{right:33.33333333333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.666666666666664%}.col-lg-pull-1{right:8.333333333333332%}.col-lg-pull-0{right:0}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666666666666%}.col-lg-push-10{left:83.33333333333334%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666666666666%}.col-lg-push-7{left:58.333333333333336%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666666666667%}.col-lg-push-4{left:33.33333333333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.666666666666664%}.col-lg-push-1{left:8.333333333333332%}.col-lg-push-0{left:0}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666666666666%}.col-lg-offset-10{margin-left:83.33333333333334%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666666666666%}.col-lg-offset-7{margin-left:58.333333333333336%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666666666667%}.col-lg-offset-4{margin-left:33.33333333333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.666666666666664%}.col-lg-offset-1{margin-left:8.333333333333332%}.col-lg-offset-0{margin-left:0}}table{max-width:100%;background-color:transparent}th{text-align:left}.table{width:100%;margin-bottom:20px}.table>thead>tr>th,.table>tbody>tr>th,.table>tfoot>tr>th,.table>thead>tr>td,.table>tbody>tr>td,.table>tfoot>tr>td{padding:8px;line-height:1.428571429;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>th,.table>caption+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>td,.table>thead:first-child>tr:first-child>td{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>thead>tr>th,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>tbody>tr>td,.table-condensed>tfoot>tr>td{padding:5px}.table-bordered{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>tbody>tr>td,.table-bordered>tfoot>tr>td{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>thead>tr>td{border-bottom-width:2px}.table-striped>tbody>tr:nth-child(odd)>td,.table-striped>tbody>tr:nth-child(odd)>th{background-color:#f9f9f9}.table-hover>tbody>tr:hover>td,.table-hover>tbody>tr:hover>th{background-color:#f5f5f5}table col[class*="col-"]{position:static;display:table-column;float:none}table td[class*="col-"],table th[class*="col-"]{display:table-cell;float:none}.table>thead>tr>.active,.table>tbody>tr>.active,.table>tfoot>tr>.active,.table>thead>.active>td,.table>tbody>.active>td,.table>tfoot>.active>td,.table>thead>.active>th,.table>tbody>.active>th,.table>tfoot>.active>th{background-color:#f5f5f5}.table-hover>tbody>tr>.active:hover,.table-hover>tbody>.active:hover>td,.table-hover>tbody>.active:hover>th{background-color:#e8e8e8}.table>thead>tr>.success,.table>tbody>tr>.success,.table>tfoot>tr>.success,.table>thead>.success>td,.table>tbody>.success>td,.table>tfoot>.success>td,.table>thead>.success>th,.table>tbody>.success>th,.table>tfoot>.success>th{background-color:#dff0d8}.table-hover>tbody>tr>.success:hover,.table-hover>tbody>.success:hover>td,.table-hover>tbody>.success:hover>th{background-color:#d0e9c6}.table>thead>tr>.danger,.table>tbody>tr>.danger,.table>tfoot>tr>.danger,.table>thead>.danger>td,.table>tbody>.danger>td,.table>tfoot>.danger>td,.table>thead>.danger>th,.table>tbody>.danger>th,.table>tfoot>.danger>th{background-color:#f2dede}.table-hover>tbody>tr>.danger:hover,.table-hover>tbody>.danger:hover>td,.table-hover>tbody>.danger:hover>th{background-color:#ebcccc}.table>thead>tr>.warning,.table>tbody>tr>.warning,.table>tfoot>tr>.warning,.table>thead>.warning>td,.table>tbody>.warning>td,.table>tfoot>.warning>td,.table>thead>.warning>th,.table>tbody>.warning>th,.table>tfoot>.warning>th{background-color:#fcf8e3}.table-hover>tbody>tr>.warning:hover,.table-hover>tbody>.warning:hover>td,.table-hover>tbody>.warning:hover>th{background-color:#faf2cc}@media(max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-x:scroll;overflow-y:hidden;border:1px solid #ddd;-ms-overflow-style:-ms-autohiding-scrollbar;-webkit-overflow-scrolling:touch}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>thead>tr>th,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tfoot>tr>td{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>thead>tr>th:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.table-responsive>.table-bordered>thead>tr>th:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>th,.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}}fieldset{padding:0;margin:0;border:0}legend{display:block;width:100%;padding:0;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border:0;border-bottom:1px solid #e5e5e5}label{display:inline-block;margin-bottom:5px;font-weight:bold}input[type="search"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}input[type="radio"],input[type="checkbox"]{margin:4px 0 0;margin-top:1px \9;line-height:normal}input[type="file"]{display:block}select[multiple],select[size]{height:auto}select optgroup{font-family:inherit;font-size:inherit;font-style:inherit}input[type="file"]:focus,input[type="radio"]:focus,input[type="checkbox"]:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{height:auto}output{display:block;padding-top:7px;font-size:14px;line-height:1.428571429;color:#555;vertical-align:middle}.form-control{display:block;width:100%;height:34px;padding:6px 12px;font-size:14px;line-height:1.428571429;color:#555;vertical-align:middle;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);-webkit-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}.form-control:focus{border-color:#66afe9;outline:0;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6)}.form-control:-moz-placeholder{color:#999}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{cursor:not-allowed;background-color:#eee}textarea.form-control{height:auto}.form-group{margin-bottom:15px}.radio,.checkbox{display:block;min-height:20px;padding-left:20px;margin-top:10px;margin-bottom:10px;vertical-align:middle}.radio label,.checkbox label{display:inline;margin-bottom:0;font-weight:normal;cursor:pointer}.radio input[type="radio"],.radio-inline input[type="radio"],.checkbox input[type="checkbox"],.checkbox-inline input[type="checkbox"]{float:left;margin-left:-20px}.radio+.radio,.checkbox+.checkbox{margin-top:-5px}.radio-inline,.checkbox-inline{display:inline-block;padding-left:20px;margin-bottom:0;font-weight:normal;vertical-align:middle;cursor:pointer}.radio-inline+.radio-inline,.checkbox-inline+.checkbox-inline{margin-top:0;margin-left:10px}input[type="radio"][disabled],input[type="checkbox"][disabled],.radio[disabled],.radio-inline[disabled],.checkbox[disabled],.checkbox-inline[disabled],fieldset[disabled] input[type="radio"],fieldset[disabled] input[type="checkbox"],fieldset[disabled] .radio,fieldset[disabled] .radio-inline,fieldset[disabled] .checkbox,fieldset[disabled] .checkbox-inline{cursor:not-allowed}.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-sm{height:30px;line-height:30px}textarea.input-sm{height:auto}.input-lg{height:46px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}select.input-lg{height:46px;line-height:46px}textarea.input-lg{height:auto}.has-warning .help-block,.has-warning .control-label,.has-warning .radio,.has-warning .checkbox,.has-warning .radio-inline,.has-warning .checkbox-inline{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-warning .form-control:focus{border-color:#66512c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #c0a16b;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;background-color:#fcf8e3;border-color:#8a6d3b}.has-error .help-block,.has-error .control-label,.has-error .radio,.has-error .checkbox,.has-error .radio-inline,.has-error .checkbox-inline{color:#a94442}.has-error .form-control{border-color:#a94442;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-error .form-control:focus{border-color:#843534;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #ce8483;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;background-color:#f2dede;border-color:#a94442}.has-success .help-block,.has-success .control-label,.has-success .radio,.has-success .checkbox,.has-success .radio-inline,.has-success .checkbox-inline{color:#3c763d}.has-success .form-control{border-color:#3c763d;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-success .form-control:focus{border-color:#2b542c;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #67b168;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;background-color:#dff0d8;border-color:#3c763d}.form-control-static{margin-bottom:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media(min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block}.form-inline select.form-control{width:auto}.form-inline .radio,.form-inline .checkbox{display:inline-block;padding-left:0;margin-top:0;margin-bottom:0}.form-inline .radio input[type="radio"],.form-inline .checkbox input[type="checkbox"]{float:none;margin-left:0}}.form-horizontal .control-label,.form-horizontal .radio,.form-horizontal .checkbox,.form-horizontal .radio-inline,.form-horizontal .checkbox-inline{padding-top:7px;margin-top:0;margin-bottom:0}.form-horizontal .radio,.form-horizontal .checkbox{min-height:27px}.form-horizontal .form-group{margin-right:-15px;margin-left:-15px}.form-horizontal .form-group:before,.form-horizontal .form-group:after{display:table;content:" "}.form-horizontal .form-group:after{clear:both}.form-horizontal .form-group:before,.form-horizontal .form-group:after{display:table;content:" "}.form-horizontal .form-group:after{clear:both}.form-horizontal .form-control-static{padding-top:7px}@media(min-width:768px){.form-horizontal .control-label{text-align:right}}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:normal;line-height:1.428571429;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;background-image:none;border:1px solid transparent;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn:hover,.btn:focus{color:#333;text-decoration:none}.btn:active,.btn.active{background-image:none;outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{pointer-events:none;cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default:hover,.btn-default:focus,.btn-default:active,.btn-default.active,.open .dropdown-toggle.btn-default{color:#333;background-color:#ebebeb;border-color:#adadad}.btn-default:active,.btn-default.active,.open .dropdown-toggle.btn-default{background-image:none}.btn-default.disabled,.btn-default[disabled],fieldset[disabled] .btn-default,.btn-default.disabled:hover,.btn-default[disabled]:hover,fieldset[disabled] .btn-default:hover,.btn-default.disabled:focus,.btn-default[disabled]:focus,fieldset[disabled] .btn-default:focus,.btn-default.disabled:active,.btn-default[disabled]:active,fieldset[disabled] .btn-default:active,.btn-default.disabled.active,.btn-default[disabled].active,fieldset[disabled] .btn-default.active{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#fff}.btn-primary{color:#fff;background-color:#428bca;border-color:#357ebd}.btn-primary:hover,.btn-primary:focus,.btn-primary:active,.btn-primary.active,.open .dropdown-toggle.btn-primary{color:#fff;background-color:#3276b1;border-color:#285e8e}.btn-primary:active,.btn-primary.active,.open .dropdown-toggle.btn-primary{background-image:none}.btn-primary.disabled,.btn-primary[disabled],fieldset[disabled] .btn-primary,.btn-primary.disabled:hover,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary:hover,.btn-primary.disabled:focus,.btn-primary[disabled]:focus,fieldset[disabled] .btn-primary:focus,.btn-primary.disabled:active,.btn-primary[disabled]:active,fieldset[disabled] .btn-primary:active,.btn-primary.disabled.active,.btn-primary[disabled].active,fieldset[disabled] .btn-primary.active{background-color:#428bca;border-color:#357ebd}.btn-primary .badge{color:#428bca;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning:hover,.btn-warning:focus,.btn-warning:active,.btn-warning.active,.open .dropdown-toggle.btn-warning{color:#fff;background-color:#ed9c28;border-color:#d58512}.btn-warning:active,.btn-warning.active,.open .dropdown-toggle.btn-warning{background-image:none}.btn-warning.disabled,.btn-warning[disabled],fieldset[disabled] .btn-warning,.btn-warning.disabled:hover,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning:hover,.btn-warning.disabled:focus,.btn-warning[disabled]:focus,fieldset[disabled] .btn-warning:focus,.btn-warning.disabled:active,.btn-warning[disabled]:active,fieldset[disabled] .btn-warning:active,.btn-warning.disabled.active,.btn-warning[disabled].active,fieldset[disabled] .btn-warning.active{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger:hover,.btn-danger:focus,.btn-danger:active,.btn-danger.active,.open .dropdown-toggle.btn-danger{color:#fff;background-color:#d2322d;border-color:#ac2925}.btn-danger:active,.btn-danger.active,.open .dropdown-toggle.btn-danger{background-image:none}.btn-danger.disabled,.btn-danger[disabled],fieldset[disabled] .btn-danger,.btn-danger.disabled:hover,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger:hover,.btn-danger.disabled:focus,.btn-danger[disabled]:focus,fieldset[disabled] .btn-danger:focus,.btn-danger.disabled:active,.btn-danger[disabled]:active,fieldset[disabled] .btn-danger:active,.btn-danger.disabled.active,.btn-danger[disabled].active,fieldset[disabled] .btn-danger.active{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success:hover,.btn-success:focus,.btn-success:active,.btn-success.active,.open .dropdown-toggle.btn-success{color:#fff;background-color:#47a447;border-color:#398439}.btn-success:active,.btn-success.active,.open .dropdown-toggle.btn-success{background-image:none}.btn-success.disabled,.btn-success[disabled],fieldset[disabled] .btn-success,.btn-success.disabled:hover,.btn-success[disabled]:hover,fieldset[disabled] .btn-success:hover,.btn-success.disabled:focus,.btn-success[disabled]:focus,fieldset[disabled] .btn-success:focus,.btn-success.disabled:active,.btn-success[disabled]:active,fieldset[disabled] .btn-success:active,.btn-success.disabled.active,.btn-success[disabled].active,fieldset[disabled] .btn-success.active{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info:hover,.btn-info:focus,.btn-info:active,.btn-info.active,.open .dropdown-toggle.btn-info{color:#fff;background-color:#39b3d7;border-color:#269abc}.btn-info:active,.btn-info.active,.open .dropdown-toggle.btn-info{background-image:none}.btn-info.disabled,.btn-info[disabled],fieldset[disabled] .btn-info,.btn-info.disabled:hover,.btn-info[disabled]:hover,fieldset[disabled] .btn-info:hover,.btn-info.disabled:focus,.btn-info[disabled]:focus,fieldset[disabled] .btn-info:focus,.btn-info.disabled:active,.btn-info[disabled]:active,fieldset[disabled] .btn-info:active,.btn-info.disabled.active,.btn-info[disabled].active,fieldset[disabled] .btn-info.active{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-link{font-weight:normal;color:#428bca;cursor:pointer;border-radius:0}.btn-link,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;-webkit-box-shadow:none;box-shadow:none}.btn-link,.btn-link:hover,.btn-link:focus,.btn-link:active{border-color:transparent}.btn-link:hover,.btn-link:focus{color:#2a6496;text-decoration:underline;background-color:transparent}.btn-link[disabled]:hover,fieldset[disabled] .btn-link:hover,.btn-link[disabled]:focus,fieldset[disabled] .btn-link:focus{color:#999;text-decoration:none}.btn-lg{padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%;padding-right:0;padding-left:0}.btn-block+.btn-block{margin-top:5px}input[type="submit"].btn-block,input[type="reset"].btn-block,input[type="button"].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition:height .35s ease;transition:height .35s ease}@font-face{font-family:'Glyphicons Halflings';src:url('../fonts/glyphicons-halflings-regular.eot');src:url('../fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'),url('../fonts/glyphicons-halflings-regular.woff') format('woff'),url('../fonts/glyphicons-halflings-regular.ttf') format('truetype'),url('../fonts/glyphicons-halflings-regular.svg#glyphicons-halflingsregular') format('svg')}.glyphicon{position:relative;top:1px;display:inline-block;font-family:'Glyphicons Halflings';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;line-height:1;-moz-osx-font-smoothing:grayscale}.glyphicon:empty{width:1em}.glyphicon-asterisk:before{content:"\2a"}.glyphicon-plus:before{content:"\2b"}.glyphicon-euro:before{content:"\20ac"}.glyphicon-minus:before{content:"\2212"}.glyphicon-cloud:before{content:"\2601"}.glyphicon-envelope:before{content:"\2709"}.glyphicon-pencil:before{content:"\270f"}.glyphicon-glass:before{content:"\e001"}.glyphicon-music:before{content:"\e002"}.glyphicon-search:before{content:"\e003"}.glyphicon-heart:before{content:"\e005"}.glyphicon-star:before{content:"\e006"}.glyphicon-star-empty:before{content:"\e007"}.glyphicon-user:before{content:"\e008"}.glyphicon-film:before{content:"\e009"}.glyphicon-th-large:before{content:"\e010"}.glyphicon-th:before{content:"\e011"}.glyphicon-th-list:before{content:"\e012"}.glyphicon-ok:before{content:"\e013"}.glyphicon-remove:before{content:"\e014"}.glyphicon-zoom-in:before{content:"\e015"}.glyphicon-zoom-out:before{content:"\e016"}.glyphicon-off:before{content:"\e017"}.glyphicon-signal:before{content:"\e018"}.glyphicon-cog:before{content:"\e019"}.glyphicon-trash:before{content:"\e020"}.glyphicon-home:before{content:"\e021"}.glyphicon-file:before{content:"\e022"}.glyphicon-time:before{content:"\e023"}.glyphicon-road:before{content:"\e024"}.glyphicon-download-alt:before{content:"\e025"}.glyphicon-download:before{content:"\e026"}.glyphicon-upload:before{content:"\e027"}.glyphicon-inbox:before{content:"\e028"}.glyphicon-play-circle:before{content:"\e029"}.glyphicon-repeat:before{content:"\e030"}.glyphicon-refresh:before{content:"\e031"}.glyphicon-list-alt:before{content:"\e032"}.glyphicon-lock:before{content:"\e033"}.glyphicon-flag:before{content:"\e034"}.glyphicon-headphones:before{content:"\e035"}.glyphicon-volume-off:before{content:"\e036"}.glyphicon-volume-down:before{content:"\e037"}.glyphicon-volume-up:before{content:"\e038"}.glyphicon-qrcode:before{content:"\e039"}.glyphicon-barcode:before{content:"\e040"}.glyphicon-tag:before{content:"\e041"}.glyphicon-tags:before{content:"\e042"}.glyphicon-book:before{content:"\e043"}.glyphicon-bookmark:before{content:"\e044"}.glyphicon-print:before{content:"\e045"}.glyphicon-camera:before{content:"\e046"}.glyphicon-font:before{content:"\e047"}.glyphicon-bold:before{content:"\e048"}.glyphicon-italic:before{content:"\e049"}.glyphicon-text-height:before{content:"\e050"}.glyphicon-text-width:before{content:"\e051"}.glyphicon-align-left:before{content:"\e052"}.glyphicon-align-center:before{content:"\e053"}.glyphicon-align-right:before{content:"\e054"}.glyphicon-align-justify:before{content:"\e055"}.glyphicon-list:before{content:"\e056"}.glyphicon-indent-left:before{content:"\e057"}.glyphicon-indent-right:before{content:"\e058"}.glyphicon-facetime-video:before{content:"\e059"}.glyphicon-picture:before{content:"\e060"}.glyphicon-map-marker:before{content:"\e062"}.glyphicon-adjust:before{content:"\e063"}.glyphicon-tint:before{content:"\e064"}.glyphicon-edit:before{content:"\e065"}.glyphicon-share:before{content:"\e066"}.glyphicon-check:before{content:"\e067"}.glyphicon-move:before{content:"\e068"}.glyphicon-step-backward:before{content:"\e069"}.glyphicon-fast-backward:before{content:"\e070"}.glyphicon-backward:before{content:"\e071"}.glyphicon-play:before{content:"\e072"}.glyphicon-pause:before{content:"\e073"}.glyphicon-stop:before{content:"\e074"}.glyphicon-forward:before{content:"\e075"}.glyphicon-fast-forward:before{content:"\e076"}.glyphicon-step-forward:before{content:"\e077"}.glyphicon-eject:before{content:"\e078"}.glyphicon-chevron-left:before{content:"\e079"}.glyphicon-chevron-right:before{content:"\e080"}.glyphicon-plus-sign:before{content:"\e081"}.glyphicon-minus-sign:before{content:"\e082"}.glyphicon-remove-sign:before{content:"\e083"}.glyphicon-ok-sign:before{content:"\e084"}.glyphicon-question-sign:before{content:"\e085"}.glyphicon-info-sign:before{content:"\e086"}.glyphicon-screenshot:before{content:"\e087"}.glyphicon-remove-circle:before{content:"\e088"}.glyphicon-ok-circle:before{content:"\e089"}.glyphicon-ban-circle:before{content:"\e090"}.glyphicon-arrow-left:before{content:"\e091"}.glyphicon-arrow-right:before{content:"\e092"}.glyphicon-arrow-up:before{content:"\e093"}.glyphicon-arrow-down:before{content:"\e094"}.glyphicon-share-alt:before{content:"\e095"}.glyphicon-resize-full:before{content:"\e096"}.glyphicon-resize-small:before{content:"\e097"}.glyphicon-exclamation-sign:before{content:"\e101"}.glyphicon-gift:before{content:"\e102"}.glyphicon-leaf:before{content:"\e103"}.glyphicon-fire:before{content:"\e104"}.glyphicon-eye-open:before{content:"\e105"}.glyphicon-eye-close:before{content:"\e106"}.glyphicon-warning-sign:before{content:"\e107"}.glyphicon-plane:before{content:"\e108"}.glyphicon-calendar:before{content:"\e109"}.glyphicon-random:before{content:"\e110"}.glyphicon-comment:before{content:"\e111"}.glyphicon-magnet:before{content:"\e112"}.glyphicon-chevron-up:before{content:"\e113"}.glyphicon-chevron-down:before{content:"\e114"}.glyphicon-retweet:before{content:"\e115"}.glyphicon-shopping-cart:before{content:"\e116"}.glyphicon-folder-close:before{content:"\e117"}.glyphicon-folder-open:before{content:"\e118"}.glyphicon-resize-vertical:before{content:"\e119"}.glyphicon-resize-horizontal:before{content:"\e120"}.glyphicon-hdd:before{content:"\e121"}.glyphicon-bullhorn:before{content:"\e122"}.glyphicon-bell:before{content:"\e123"}.glyphicon-certificate:before{content:"\e124"}.glyphicon-thumbs-up:before{content:"\e125"}.glyphicon-thumbs-down:before{content:"\e126"}.glyphicon-hand-right:before{content:"\e127"}.glyphicon-hand-left:before{content:"\e128"}.glyphicon-hand-up:before{content:"\e129"}.glyphicon-hand-down:before{content:"\e130"}.glyphicon-circle-arrow-right:before{content:"\e131"}.glyphicon-circle-arrow-left:before{content:"\e132"}.glyphicon-circle-arrow-up:before{content:"\e133"}.glyphicon-circle-arrow-down:before{content:"\e134"}.glyphicon-globe:before{content:"\e135"}.glyphicon-wrench:before{content:"\e136"}.glyphicon-tasks:before{content:"\e137"}.glyphicon-filter:before{content:"\e138"}.glyphicon-briefcase:before{content:"\e139"}.glyphicon-fullscreen:before{content:"\e140"}.glyphicon-dashboard:before{content:"\e141"}.glyphicon-paperclip:before{content:"\e142"}.glyphicon-heart-empty:before{content:"\e143"}.glyphicon-link:before{content:"\e144"}.glyphicon-phone:before{content:"\e145"}.glyphicon-pushpin:before{content:"\e146"}.glyphicon-usd:before{content:"\e148"}.glyphicon-gbp:before{content:"\e149"}.glyphicon-sort:before{content:"\e150"}.glyphicon-sort-by-alphabet:before{content:"\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\e152"}.glyphicon-sort-by-order:before{content:"\e153"}.glyphicon-sort-by-order-alt:before{content:"\e154"}.glyphicon-sort-by-attributes:before{content:"\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\e156"}.glyphicon-unchecked:before{content:"\e157"}.glyphicon-expand:before{content:"\e158"}.glyphicon-collapse-down:before{content:"\e159"}.glyphicon-collapse-up:before{content:"\e160"}.glyphicon-log-in:before{content:"\e161"}.glyphicon-flash:before{content:"\e162"}.glyphicon-log-out:before{content:"\e163"}.glyphicon-new-window:before{content:"\e164"}.glyphicon-record:before{content:"\e165"}.glyphicon-save:before{content:"\e166"}.glyphicon-open:before{content:"\e167"}.glyphicon-saved:before{content:"\e168"}.glyphicon-import:before{content:"\e169"}.glyphicon-export:before{content:"\e170"}.glyphicon-send:before{content:"\e171"}.glyphicon-floppy-disk:before{content:"\e172"}.glyphicon-floppy-saved:before{content:"\e173"}.glyphicon-floppy-remove:before{content:"\e174"}.glyphicon-floppy-save:before{content:"\e175"}.glyphicon-floppy-open:before{content:"\e176"}.glyphicon-credit-card:before{content:"\e177"}.glyphicon-transfer:before{content:"\e178"}.glyphicon-cutlery:before{content:"\e179"}.glyphicon-header:before{content:"\e180"}.glyphicon-compressed:before{content:"\e181"}.glyphicon-earphone:before{content:"\e182"}.glyphicon-phone-alt:before{content:"\e183"}.glyphicon-tower:before{content:"\e184"}.glyphicon-stats:before{content:"\e185"}.glyphicon-sd-video:before{content:"\e186"}.glyphicon-hd-video:before{content:"\e187"}.glyphicon-subtitles:before{content:"\e188"}.glyphicon-sound-stereo:before{content:"\e189"}.glyphicon-sound-dolby:before{content:"\e190"}.glyphicon-sound-5-1:before{content:"\e191"}.glyphicon-sound-6-1:before{content:"\e192"}.glyphicon-sound-7-1:before{content:"\e193"}.glyphicon-copyright-mark:before{content:"\e194"}.glyphicon-registration-mark:before{content:"\e195"}.glyphicon-cloud-download:before{content:"\e197"}.glyphicon-cloud-upload:before{content:"\e198"}.glyphicon-tree-conifer:before{content:"\e199"}.glyphicon-tree-deciduous:before{content:"\e200"}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px solid;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:14px;list-style:none;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,0.175);box-shadow:0 6px 12px rgba(0,0,0,0.175);background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:normal;line-height:1.428571429;color:#333;white-space:nowrap}.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus{color:#262626;text-decoration:none;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus{color:#fff;text-decoration:none;background-color:#428bca;outline:0}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{color:#999}.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{text-decoration:none;cursor:not-allowed;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled=false)}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.428571429;color:#999}.dropdown-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px solid;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:1px}@media(min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group>.btn,.btn-group-vertical>.btn{position:relative;float:left}.btn-group>.btn:hover,.btn-group-vertical>.btn:hover,.btn-group>.btn:focus,.btn-group-vertical>.btn:focus,.btn-group>.btn:active,.btn-group-vertical>.btn:active,.btn-group>.btn.active,.btn-group-vertical>.btn.active{z-index:2}.btn-group>.btn:focus,.btn-group-vertical>.btn:focus{outline:0}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar:before,.btn-toolbar:after{display:table;content:" "}.btn-toolbar:after{clear:both}.btn-toolbar:before,.btn-toolbar:after{display:table;content:" "}.btn-toolbar:after{clear:both}.btn-toolbar .btn-group{float:left}.btn-toolbar>.btn+.btn,.btn-toolbar>.btn-group+.btn,.btn-toolbar>.btn+.btn-group,.btn-toolbar>.btn-group+.btn-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child>.btn:last-child,.btn-group>.btn-group:first-child>.dropdown-toggle{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:last-child>.btn:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group-xs>.btn{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-sm>.btn{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-lg>.btn{padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}.btn-group>.btn+.dropdown-toggle{padding-right:8px;padding-left:8px}.btn-group>.btn-lg+.dropdown-toggle{padding-right:12px;padding-left:12px}.btn-group.open .dropdown-toggle{-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn-group.open .dropdown-toggle.btn-link{-webkit-box-shadow:none;box-shadow:none}.btn .caret{margin-left:0}.btn-lg .caret{border-width:5px 5px 0;border-bottom-width:0}.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group:before,.btn-group-vertical>.btn-group:after{display:table;content:" "}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group:before,.btn-group-vertical>.btn-group:after{display:table;content:" "}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-top-right-radius:0;border-bottom-left-radius:4px;border-top-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child>.btn:last-child,.btn-group-vertical>.btn-group:first-child>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child>.btn:first-child{border-top-right-radius:0;border-top-left-radius:0}.btn-group-justified{display:table;width:100%;border-collapse:separate;table-layout:fixed}.btn-group-justified>.btn,.btn-group-justified>.btn-group{display:table-cell;float:none;width:1%}.btn-group-justified>.btn-group .btn{width:100%}[data-toggle="buttons"]>.btn>input[type="radio"],[data-toggle="buttons"]>.btn>input[type="checkbox"]{display:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*="col-"]{float:none;padding-right:0;padding-left:0}.input-group .form-control{width:100%;margin-bottom:0}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:46px;padding:10px 16px;font-size:18px;line-height:1.33;border-radius:6px}select.input-group-lg>.form-control,select.input-group-lg>.input-group-addon,select.input-group-lg>.input-group-btn>.btn{height:46px;line-height:46px}textarea.input-group-lg>.form-control,textarea.input-group-lg>.input-group-addon,textarea.input-group-lg>.input-group-btn>.btn{height:auto}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}select.input-group-sm>.form-control,select.input-group-sm>.input-group-addon,select.input-group-sm>.input-group-btn>.btn{height:30px;line-height:30px}textarea.input-group-sm>.form-control,textarea.input-group-sm>.input-group-addon,textarea.input-group-sm>.input-group-btn>.btn{height:auto}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:normal;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type="radio"],.input-group-addon input[type="checkbox"]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:last-child>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group-btn:first-child>.btn:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{position:relative;white-space:nowrap}.input-group-btn:first-child>.btn{margin-right:-1px}.input-group-btn:last-child>.btn{margin-left:-1px}.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-4px}.input-group-btn>.btn:hover,.input-group-btn>.btn:active{z-index:2}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav:before,.nav:after{display:table;content:" "}.nav:after{clear:both}.nav:before,.nav:after{display:table;content:" "}.nav:after{clear:both}.nav>li{position:relative;display:block}.nav>li>a{position:relative;display:block;padding:10px 15px}.nav>li>a:hover,.nav>li>a:focus{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#999}.nav>li.disabled>a:hover,.nav>li.disabled>a:focus{color:#999;text-decoration:none;cursor:not-allowed;background-color:transparent}.nav .open>a,.nav .open>a:hover,.nav .open>a:focus{background-color:#eee;border-color:#428bca}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.428571429;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:hover,.nav-tabs>li.active>a:focus{color:#555;cursor:default;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent}.nav-tabs.nav-justified{width:100%;border-bottom:0}.nav-tabs.nav-justified>li{float:none}.nav-tabs.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-tabs.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media(min-width:768px){.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:focus{border:1px solid #ddd}@media(min-width:768px){.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:focus{border-bottom-color:#fff}}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:hover,.nav-pills>li.active>a:focus{color:#fff;background-color:#428bca}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified{width:100%}.nav-justified>li{float:none}.nav-justified>li>a{margin-bottom:5px;text-align:center}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media(min-width:768px){.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified{border-bottom:0}.nav-tabs-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus{border:1px solid #ddd}@media(min-width:768px){.nav-tabs-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.navbar:before,.navbar:after{display:table;content:" "}.navbar:after{clear:both}.navbar:before,.navbar:after{display:table;content:" "}.navbar:after{clear:both}@media(min-width:768px){.navbar{border-radius:4px}}.navbar-header:before,.navbar-header:after{display:table;content:" "}.navbar-header:after{clear:both}.navbar-header:before,.navbar-header:after{display:table;content:" "}.navbar-header:after{clear:both}@media(min-width:768px){.navbar-header{float:left}}.navbar-collapse{max-height:340px;padding-right:15px;padding-left:15px;overflow-x:visible;border-top:1px solid transparent;box-shadow:inset 0 1px 0 rgba(255,255,255,0.1);-webkit-overflow-scrolling:touch}.navbar-collapse:before,.navbar-collapse:after{display:table;content:" "}.navbar-collapse:after{clear:both}.navbar-collapse:before,.navbar-collapse:after{display:table;content:" "}.navbar-collapse:after{clear:both}.navbar-collapse.in{overflow-y:auto}@media(min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse,.navbar-fixed-bottom .navbar-collapse{padding-right:0;padding-left:0}}.container>.navbar-header,.container>.navbar-collapse{margin-right:-15px;margin-left:-15px}@media(min-width:768px){.container>.navbar-header,.container>.navbar-collapse{margin-right:0;margin-left:0}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media(min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;right:0;left:0;z-index:1030}@media(min-width:768px){.navbar-fixed-top,.navbar-fixed-bottom{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:15px 15px;font-size:18px;line-height:20px}.navbar-brand:hover,.navbar-brand:focus{text-decoration:none}@media(min-width:768px){.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;padding:9px 10px;margin-top:8px;margin-right:15px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media(min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media(max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu>li>a,.navbar-nav .open .dropdown-menu .dropdown-header{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:hover,.navbar-nav .open .dropdown-menu>li>a:focus{background-image:none}}@media(min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}.navbar-nav.navbar-right:last-child{margin-right:-15px}}@media(min-width:768px){.navbar-left{float:left!important}.navbar-right{float:right!important}}.navbar-form{padding:10px 15px;margin-top:8px;margin-right:-15px;margin-bottom:8px;margin-left:-15px;border-top:1px solid transparent;border-bottom:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1)}@media(min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block}.navbar-form select.form-control{width:auto}.navbar-form .radio,.navbar-form .checkbox{display:inline-block;padding-left:0;margin-top:0;margin-bottom:0}.navbar-form .radio input[type="radio"],.navbar-form .checkbox input[type="checkbox"]{float:none;margin-left:0}}@media(max-width:767px){.navbar-form .form-group{margin-bottom:5px}}@media(min-width:768px){.navbar-form{width:auto;padding-top:0;padding-bottom:0;margin-right:0;margin-left:0;border:0;-webkit-box-shadow:none;box-shadow:none}.navbar-form.navbar-right:last-child{margin-right:-15px}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-nav.pull-right>li>.dropdown-menu,.navbar-nav>li>.dropdown-menu.pull-right{right:0;left:auto}.navbar-btn{margin-top:8px;margin-bottom:8px}.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media(min-width:768px){.navbar-text{float:left;margin-right:15px;margin-left:15px}.navbar-text.navbar-right:last-child{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:hover,.navbar-default .navbar-brand:focus{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a{color:#777}.navbar-default .navbar-nav>li>a:hover,.navbar-default .navbar-nav>li>a:focus{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:hover,.navbar-default .navbar-nav>.active>a:focus{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:hover,.navbar-default .navbar-nav>.disabled>a:focus{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:hover,.navbar-default .navbar-toggle:focus{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#ccc}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:hover,.navbar-default .navbar-nav>.open>a:focus{color:#555;background-color:#e7e7e7}@media(max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-inverse{background-color:#222;border-color:#080808}.navbar-inverse .navbar-brand{color:#999}.navbar-inverse .navbar-brand:hover,.navbar-inverse .navbar-brand:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-text{color:#999}.navbar-inverse .navbar-nav>li>a{color:#999}.navbar-inverse .navbar-nav>li>a:hover,.navbar-inverse .navbar-nav>li>a:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:hover,.navbar-inverse .navbar-nav>.active>a:focus{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:hover,.navbar-inverse .navbar-nav>.disabled>a:focus{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:hover,.navbar-inverse .navbar-toggle:focus{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:hover,.navbar-inverse .navbar-nav>.open>a:focus{color:#fff;background-color:#080808}@media(max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#999}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus{color:#fff;background-color:#080808}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#999}.navbar-inverse .navbar-link:hover{color:#fff}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{padding:0 5px;color:#ccc;content:"/\00a0"}.breadcrumb>.active{color:#999}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;margin-left:-1px;line-height:1.428571429;text-decoration:none;background-color:#fff;border:1px solid #ddd}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-top-right-radius:4px;border-bottom-right-radius:4px}.pagination>li>a:hover,.pagination>li>span:hover,.pagination>li>a:focus,.pagination>li>span:focus{background-color:#eee}.pagination>.active>a,.pagination>.active>span,.pagination>.active>a:hover,.pagination>.active>span:hover,.pagination>.active>a:focus,.pagination>.active>span:focus{z-index:2;color:#fff;cursor:default;background-color:#428bca;border-color:#428bca}.pagination>.disabled>span,.pagination>.disabled>span:hover,.pagination>.disabled>span:focus,.pagination>.disabled>a,.pagination>.disabled>a:hover,.pagination>.disabled>a:focus{color:#999;cursor:not-allowed;background-color:#fff;border-color:#ddd}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-top-right-radius:6px;border-bottom-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-top-right-radius:3px;border-bottom-right-radius:3px}.pager{padding-left:0;margin:20px 0;text-align:center;list-style:none}.pager:before,.pager:after{display:table;content:" "}.pager:after{clear:both}.pager:before,.pager:after{display:table;content:" "}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#999;cursor:not-allowed;background-color:#fff}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:bold;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.label[href]:hover,.label[href]:focus{color:#fff;text-decoration:none;cursor:pointer}.label:empty{display:none}.btn .label{position:relative;top:-1px}.label-default{background-color:#999}.label-default[href]:hover,.label-default[href]:focus{background-color:#808080}.label-primary{background-color:#428bca}.label-primary[href]:hover,.label-primary[href]:focus{background-color:#3071a9}.label-success{background-color:#5cb85c}.label-success[href]:hover,.label-success[href]:focus{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:hover,.label-info[href]:focus{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:hover,.label-warning[href]:focus{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:hover,.label-danger[href]:focus{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:bold;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;background-color:#999;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}a.badge:hover,a.badge:focus{color:#fff;text-decoration:none;cursor:pointer}a.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#428bca;background-color:#fff}.nav-pills>li>a>.badge{margin-left:3px}.jumbotron{padding:30px;margin-bottom:30px;font-size:21px;font-weight:200;line-height:2.1428571435;color:inherit;background-color:#eee}.jumbotron h1,.jumbotron .h1{line-height:1;color:inherit}.jumbotron p{line-height:1.4}.container .jumbotron{border-radius:6px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container .jumbotron{padding-right:60px;padding-left:60px}.jumbotron h1,.jumbotron .h1{font-size:63px}}.thumbnail{display:block;padding:4px;margin-bottom:20px;line-height:1.428571429;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}.thumbnail>img,.thumbnail a>img{display:block;height:auto;max-width:100%;margin-right:auto;margin-left:auto}a.thumbnail:hover,a.thumbnail:focus,a.thumbnail.active{border-color:#428bca}.thumbnail .caption{padding:9px;color:#333}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:bold}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable{padding-right:35px}.alert-dismissable .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{height:20px;margin-bottom:20px;overflow:hidden;background-color:#f5f5f5;border-radius:4px;-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#428bca;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-transition:width .6s ease;transition:width .6s ease}.progress-striped .progress-bar{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-size:40px 40px}.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent);background-image:linear-gradient(45deg,rgba(255,255,255,0.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.15) 50%,rgba(255,255,255,0.15) 75%,transparent 75%,transparent)}.media,.media-body{overflow:hidden;zoom:1}.media,.media .media{margin-top:15px}.media:first-child{margin-top:0}.media-object{display:block}.media-heading{margin:0 0 5px}.media>.pull-left{margin-right:10px}.media>.pull-right{margin-left:10px}.media-list{padding-left:0;list-style:none}.list-group{padding-left:0;margin-bottom:20px}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}a.list-group-item{color:#555}a.list-group-item .list-group-item-heading{color:#333}a.list-group-item:hover,a.list-group-item:focus{text-decoration:none;background-color:#f5f5f5}a.list-group-item.active,a.list-group-item.active:hover,a.list-group-item.active:focus{z-index:2;color:#fff;background-color:#428bca;border-color:#428bca}a.list-group-item.active .list-group-item-heading,a.list-group-item.active:hover .list-group-item-heading,a.list-group-item.active:focus .list-group-item-heading{color:inherit}a.list-group-item.active .list-group-item-text,a.list-group-item.active:hover .list-group-item-text,a.list-group-item.active:focus .list-group-item-text{color:#e1edf7}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.05);box-shadow:0 1px 1px rgba(0,0,0,0.05)}.panel-body{padding:15px}.panel-body:before,.panel-body:after{display:table;content:" "}.panel-body:after{clear:both}.panel-body:before,.panel-body:after{display:table;content:" "}.panel-body:after{clear:both}.panel>.list-group{margin-bottom:0}.panel>.list-group .list-group-item{border-width:1px 0}.panel>.list-group .list-group-item:first-child{border-top-right-radius:0;border-top-left-radius:0}.panel>.list-group .list-group-item:last-child{border-bottom:0}.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive{border-top:1px solid #ddd}.panel>.table>tbody:first-child th,.panel>.table>tbody:first-child td{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.panel>.table-bordered>thead>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:last-child>th,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:last-child>td,.panel>.table-responsive>.table-bordered>thead>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}.panel>.table-responsive{margin-bottom:0;border:0}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.panel-heading>.dropdown .dropdown-toggle{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:16px;color:inherit}.panel-title>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel-group .panel{margin-bottom:0;overflow:hidden;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse .panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse .panel-body{border-top-color:#ddd}.panel-default>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#428bca}.panel-primary>.panel-heading{color:#fff;background-color:#428bca;border-color:#428bca}.panel-primary>.panel-heading+.panel-collapse .panel-body{border-top-color:#428bca}.panel-primary>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#428bca}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse .panel-body{border-top-color:#d6e9c6}.panel-success>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#d6e9c6}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse .panel-body{border-top-color:#faebcc}.panel-warning>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse .panel-body{border-top-color:#ebccd1}.panel-danger>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#ebccd1}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse .panel-body{border-top-color:#bce8f1}.panel-info>.panel-footer+.panel-collapse .panel-body{border-bottom-color:#bce8f1}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,0.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.close{float:right;font-size:21px;font-weight:bold;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.modal-open{overflow:hidden}.modal{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;display:none;overflow:auto;overflow-y:scroll}.modal.fade .modal-dialog{-webkit-transform:translate(0,-25%);-ms-transform:translate(0,-25%);transform:translate(0,-25%);-webkit-transition:-webkit-transform .3s ease-out;-moz-transition:-moz-transform .3s ease-out;-o-transition:-o-transform .3s ease-out;transition:transform .3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.modal-dialog{position:relative;z-index:1050;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,0.2);border-radius:6px;outline:0;-webkit-box-shadow:0 3px 9px rgba(0,0,0,0.5);box-shadow:0 3px 9px rgba(0,0,0,0.5);background-clip:padding-box}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1030;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{min-height:16.428571429px;padding:15px;border-bottom:1px solid #e5e5e5}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.428571429}.modal-body{position:relative;padding:20px}.modal-footer{padding:19px 20px 20px;margin-top:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer:before,.modal-footer:after{display:table;content:" "}.modal-footer:after{clear:both}.modal-footer:before,.modal-footer:after{display:table;content:" "}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-bottom:0;margin-left:5px}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}@media screen and (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{-webkit-box-shadow:0 5px 15px rgba(0,0,0,0.5);box-shadow:0 5px 15px rgba(0,0,0,0.5)}}.tooltip{position:absolute;z-index:1030;display:block;font-size:12px;line-height:1.4;opacity:0;filter:alpha(opacity=0);visibility:visible}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{padding:5px 0;margin-top:-3px}.tooltip.right{padding:0 5px;margin-left:3px}.tooltip.bottom{padding:5px 0;margin-top:3px}.tooltip.left{padding:0 5px;margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;text-decoration:none;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-left .tooltip-arrow{bottom:0;left:5px;border-top-color:#000;border-width:5px 5px 0}.tooltip.top-right .tooltip-arrow{right:5px;bottom:0;border-top-color:#000;border-width:5px 5px 0}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-right-color:#000;border-width:5px 5px 5px 0}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-left-color:#000;border-width:5px 0 5px 5px}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-left .tooltip-arrow{top:0;left:5px;border-bottom-color:#000;border-width:0 5px 5px}.tooltip.bottom-right .tooltip-arrow{top:0;right:5px;border-bottom-color:#000;border-width:0 5px 5px}.popover{position:absolute;top:0;left:0;z-index:1010;display:none;max-width:276px;padding:1px;text-align:left;white-space:normal;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,0.2);border-radius:6px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);box-shadow:0 5px 10px rgba(0,0,0,0.2);background-clip:padding-box}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{padding:8px 14px;margin:0;font-size:14px;font-weight:normal;line-height:18px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover .arrow,.popover .arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover .arrow{border-width:11px}.popover .arrow:after{border-width:10px;content:""}.popover.top .arrow{bottom:-11px;left:50%;margin-left:-11px;border-top-color:#999;border-top-color:rgba(0,0,0,0.25);border-bottom-width:0}.popover.top .arrow:after{bottom:1px;margin-left:-10px;border-top-color:#fff;border-bottom-width:0;content:" "}.popover.right .arrow{top:50%;left:-11px;margin-top:-11px;border-right-color:#999;border-right-color:rgba(0,0,0,0.25);border-left-width:0}.popover.right .arrow:after{bottom:-10px;left:1px;border-right-color:#fff;border-left-width:0;content:" "}.popover.bottom .arrow{top:-11px;left:50%;margin-left:-11px;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,0.25);border-top-width:0}.popover.bottom .arrow:after{top:1px;margin-left:-10px;border-bottom-color:#fff;border-top-width:0;content:" "}.popover.left .arrow{top:50%;right:-11px;margin-top:-11px;border-left-color:#999;border-left-color:rgba(0,0,0,0.25);border-right-width:0}.popover.left .arrow:after{right:1px;bottom:-10px;border-left-color:#fff;border-right-width:0;content:" "}.carousel{position:relative}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner>.item{position:relative;display:none;-webkit-transition:.6s ease-in-out left;transition:.6s ease-in-out left}.carousel-inner>.item>img,.carousel-inner>.item>a>img{display:block;height:auto;max-width:100%;line-height:1}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;bottom:0;left:0;width:15%;font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,0.6);opacity:.5;filter:alpha(opacity=50)}.carousel-control.left{background-image:-webkit-linear-gradient(left,color-stop(rgba(0,0,0,0.5) 0),color-stop(rgba(0,0,0,0.0001) 100%));background-image:linear-gradient(to right,rgba(0,0,0,0.5) 0,rgba(0,0,0,0.0001) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000',endColorstr='#00000000',GradientType=1)}.carousel-control.right{right:0;left:auto;background-image:-webkit-linear-gradient(left,color-stop(rgba(0,0,0,0.0001) 0),color-stop(rgba(0,0,0,0.5) 100%));background-image:linear-gradient(to right,rgba(0,0,0,0.0001) 0,rgba(0,0,0,0.5) 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000',endColorstr='#80000000',GradientType=1)}.carousel-control:hover,.carousel-control:focus{color:#fff;text-decoration:none;outline:0;opacity:.9;filter:alpha(opacity=90)}.carousel-control .icon-prev,.carousel-control .icon-next,.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right{position:absolute;top:50%;z-index:5;display:inline-block}.carousel-control .icon-prev,.carousel-control .glyphicon-chevron-left{left:50%}.carousel-control .icon-next,.carousel-control .glyphicon-chevron-right{right:50%}.carousel-control .icon-prev,.carousel-control .icon-next{width:20px;height:20px;margin-top:-10px;margin-left:-10px;font-family:serif}.carousel-control .icon-prev:before{content:'\2039'}.carousel-control .icon-next:before{content:'\203a'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;padding-left:0;margin-left:-30%;text-align:center;list-style:none}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;cursor:pointer;background-color:#000 \9;background-color:rgba(0,0,0,0);border:1px solid #fff;border-radius:10px}.carousel-indicators .active{width:12px;height:12px;margin:0;background-color:#fff}.carousel-caption{position:absolute;right:15%;bottom:20px;left:15%;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,0.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicons-chevron-left,.carousel-control .glyphicons-chevron-right,.carousel-control .icon-prev,.carousel-control .icon-next{width:30px;height:30px;margin-top:-15px;margin-left:-15px;font-size:30px}.carousel-caption{right:20%;left:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.clearfix:before,.clearfix:after{display:table;content:" "}.clearfix:after{clear:both}.center-block{display:block;margin-right:auto;margin-left:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important;visibility:hidden!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-xs,tr.visible-xs,th.visible-xs,td.visible-xs{display:none!important}@media(max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table}tr.visible-xs{display:table-row!important}th.visible-xs,td.visible-xs{display:table-cell!important}}@media(min-width:768px) and (max-width:991px){.visible-xs.visible-sm{display:block!important}table.visible-xs.visible-sm{display:table}tr.visible-xs.visible-sm{display:table-row!important}th.visible-xs.visible-sm,td.visible-xs.visible-sm{display:table-cell!important}}@media(min-width:992px) and (max-width:1199px){.visible-xs.visible-md{display:block!important}table.visible-xs.visible-md{display:table}tr.visible-xs.visible-md{display:table-row!important}th.visible-xs.visible-md,td.visible-xs.visible-md{display:table-cell!important}}@media(min-width:1200px){.visible-xs.visible-lg{display:block!important}table.visible-xs.visible-lg{display:table}tr.visible-xs.visible-lg{display:table-row!important}th.visible-xs.visible-lg,td.visible-xs.visible-lg{display:table-cell!important}}.visible-sm,tr.visible-sm,th.visible-sm,td.visible-sm{display:none!important}@media(max-width:767px){.visible-sm.visible-xs{display:block!important}table.visible-sm.visible-xs{display:table}tr.visible-sm.visible-xs{display:table-row!important}th.visible-sm.visible-xs,td.visible-sm.visible-xs{display:table-cell!important}}@media(min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table}tr.visible-sm{display:table-row!important}th.visible-sm,td.visible-sm{display:table-cell!important}}@media(min-width:992px) and (max-width:1199px){.visible-sm.visible-md{display:block!important}table.visible-sm.visible-md{display:table}tr.visible-sm.visible-md{display:table-row!important}th.visible-sm.visible-md,td.visible-sm.visible-md{display:table-cell!important}}@media(min-width:1200px){.visible-sm.visible-lg{display:block!important}table.visible-sm.visible-lg{display:table}tr.visible-sm.visible-lg{display:table-row!important}th.visible-sm.visible-lg,td.visible-sm.visible-lg{display:table-cell!important}}.visible-md,tr.visible-md,th.visible-md,td.visible-md{display:none!important}@media(max-width:767px){.visible-md.visible-xs{display:block!important}table.visible-md.visible-xs{display:table}tr.visible-md.visible-xs{display:table-row!important}th.visible-md.visible-xs,td.visible-md.visible-xs{display:table-cell!important}}@media(min-width:768px) and (max-width:991px){.visible-md.visible-sm{display:block!important}table.visible-md.visible-sm{display:table}tr.visible-md.visible-sm{display:table-row!important}th.visible-md.visible-sm,td.visible-md.visible-sm{display:table-cell!important}}@media(min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table}tr.visible-md{display:table-row!important}th.visible-md,td.visible-md{display:table-cell!important}}@media(min-width:1200px){.visible-md.visible-lg{display:block!important}table.visible-md.visible-lg{display:table}tr.visible-md.visible-lg{display:table-row!important}th.visible-md.visible-lg,td.visible-md.visible-lg{display:table-cell!important}}.visible-lg,tr.visible-lg,th.visible-lg,td.visible-lg{display:none!important}@media(max-width:767px){.visible-lg.visible-xs{display:block!important}table.visible-lg.visible-xs{display:table}tr.visible-lg.visible-xs{display:table-row!important}th.visible-lg.visible-xs,td.visible-lg.visible-xs{display:table-cell!important}}@media(min-width:768px) and (max-width:991px){.visible-lg.visible-sm{display:block!important}table.visible-lg.visible-sm{display:table}tr.visible-lg.visible-sm{display:table-row!important}th.visible-lg.visible-sm,td.visible-lg.visible-sm{display:table-cell!important}}@media(min-width:992px) and (max-width:1199px){.visible-lg.visible-md{display:block!important}table.visible-lg.visible-md{display:table}tr.visible-lg.visible-md{display:table-row!important}th.visible-lg.visible-md,td.visible-lg.visible-md{display:table-cell!important}}@media(min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table}tr.visible-lg{display:table-row!important}th.visible-lg,td.visible-lg{display:table-cell!important}}.hidden-xs{display:block!important}table.hidden-xs{display:table}tr.hidden-xs{display:table-row!important}th.hidden-xs,td.hidden-xs{display:table-cell!important}@media(max-width:767px){.hidden-xs,tr.hidden-xs,th.hidden-xs,td.hidden-xs{display:none!important}}@media(min-width:768px) and (max-width:991px){.hidden-xs.hidden-sm,tr.hidden-xs.hidden-sm,th.hidden-xs.hidden-sm,td.hidden-xs.hidden-sm{display:none!important}}@media(min-width:992px) and (max-width:1199px){.hidden-xs.hidden-md,tr.hidden-xs.hidden-md,th.hidden-xs.hidden-md,td.hidden-xs.hidden-md{display:none!important}}@media(min-width:1200px){.hidden-xs.hidden-lg,tr.hidden-xs.hidden-lg,th.hidden-xs.hidden-lg,td.hidden-xs.hidden-lg{display:none!important}}.hidden-sm{display:block!important}table.hidden-sm{display:table}tr.hidden-sm{display:table-row!important}th.hidden-sm,td.hidden-sm{display:table-cell!important}@media(max-width:767px){.hidden-sm.hidden-xs,tr.hidden-sm.hidden-xs,th.hidden-sm.hidden-xs,td.hidden-sm.hidden-xs{display:none!important}}@media(min-width:768px) and (max-width:991px){.hidden-sm,tr.hidden-sm,th.hidden-sm,td.hidden-sm{display:none!important}}@media(min-width:992px) and (max-width:1199px){.hidden-sm.hidden-md,tr.hidden-sm.hidden-md,th.hidden-sm.hidden-md,td.hidden-sm.hidden-md{display:none!important}}@media(min-width:1200px){.hidden-sm.hidden-lg,tr.hidden-sm.hidden-lg,th.hidden-sm.hidden-lg,td.hidden-sm.hidden-lg{display:none!important}}.hidden-md{display:block!important}table.hidden-md{display:table}tr.hidden-md{display:table-row!important}th.hidden-md,td.hidden-md{display:table-cell!important}@media(max-width:767px){.hidden-md.hidden-xs,tr.hidden-md.hidden-xs,th.hidden-md.hidden-xs,td.hidden-md.hidden-xs{display:none!important}}@media(min-width:768px) and (max-width:991px){.hidden-md.hidden-sm,tr.hidden-md.hidden-sm,th.hidden-md.hidden-sm,td.hidden-md.hidden-sm{display:none!important}}@media(min-width:992px) and (max-width:1199px){.hidden-md,tr.hidden-md,th.hidden-md,td.hidden-md{display:none!important}}@media(min-width:1200px){.hidden-md.hidden-lg,tr.hidden-md.hidden-lg,th.hidden-md.hidden-lg,td.hidden-md.hidden-lg{display:none!important}}.hidden-lg{display:block!important}table.hidden-lg{display:table}tr.hidden-lg{display:table-row!important}th.hidden-lg,td.hidden-lg{display:table-cell!important}@media(max-width:767px){.hidden-lg.hidden-xs,tr.hidden-lg.hidden-xs,th.hidden-lg.hidden-xs,td.hidden-lg.hidden-xs{display:none!important}}@media(min-width:768px) and (max-width:991px){.hidden-lg.hidden-sm,tr.hidden-lg.hidden-sm,th.hidden-lg.hidden-sm,td.hidden-lg.hidden-sm{display:none!important}}@media(min-width:992px) and (max-width:1199px){.hidden-lg.hidden-md,tr.hidden-lg.hidden-md,th.hidden-lg.hidden-md,td.hidden-lg.hidden-md{display:none!important}}@media(min-width:1200px){.hidden-lg,tr.hidden-lg,th.hidden-lg,td.hidden-lg{display:none!important}}.visible-print,tr.visible-print,th.visible-print,td.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table}tr.visible-print{display:table-row!important}th.visible-print,td.visible-print{display:table-cell!important}.hidden-print,tr.hidden-print,th.hidden-print,td.hidden-print{display:none!important}}


        /* custom */
        body{background-color:#fff;font-family:Montserrat,sans-serif;font-weight:400;font-size:14px;color:#555;-webkit-font-smoothing:antialiased;-webkit-overflow-scrolling:touch}h1,h2,h3,h4,h5,h6{font-family:Montserrat,sans-serif;font-weight:700;color:#333}h1{font-size:35px;margin-top:30px;margin-bottom:30px}p{line-height:28px;margin-bottom:25px;font-size:16px}ol,ul{margin-bottom:25px;font-size:16px}.centered{text-align:center}a{color:#659cef;word-wrap:break-word;transition:color .1s ease-in,background .1s ease-in}a:focus,a:hover{color:#7b7b7b;text-decoration:none;outline:0}a:after,a:before{transition:color .1s ease-in,background .1s ease-in}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}img{max-width:100%}.ng-cloak{display:none}.navbar{text-transform:uppercase;margin-bottom:0}.navbar .nav{padding-top:20px}.navbar-inverse{padding-bottom:10px;padding-top:10px}.navbar-inverse{background-color:#659cef;border-color:#16a085}.navbar-inverse .navbar-nav>li>a{color:#fff}.navbar-inverse .navbar-nav>li>a:hover{color:#222}.navbar-brand{font-weight:700;font-size:20px;letter-spacing:2px}.navbar-brand img{border-radius:50%;float:left;margin-right:10px}.navbar-brand span{white-space:nowrap;float:left;margin-top:11px}.navbar-brand span small{display:block;font-size:14px}.navbar-nav>li.social-icons>a{display:inline-block;padding:14px 5px;font-size:20px}.navbar-nav>li.social-icons>a:first-child{margin-left:10px}.navbar-nav .language{position:relative}.navbar-nav .language a{padding:13px 8px;cursor:pointer}.navbar-nav .language img{height:16px;margin-right:3px}.navbar-nav .language i.arrow{border:solid #fff;border-width:0 2px 2px 0;display:inline-block;padding:3px}.navbar-nav .language i.arrow.right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.navbar-nav .language i.arrow.left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.navbar-nav .language i.arrow.up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.navbar-nav .language i.arrow.down{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.navbar-nav .language .language-list{display:none;position:absolute;top:44px;right:0;border:1px solid #d3d7dc;background:#fff;padding:10px 0 0 14px;z-index:1000;width:132px;box-shadow:5px 5px 5px rgba(0,0,0,.5)}.navbar-nav .language .language-list ul{margin:0;padding:0}.navbar-nav .language .language-list ul li{list-style:none;padding-bottom:10px}.navbar-nav .language .language-list ul li a{white-space:nowrap;text-transform:none;color:#555;padding:0}.navbar-nav .language .language-list ul li a:hover{color:#1abc9c}.navbar-nav .language:hover .language-list{display:block}@media (max-width:767px){.tile-wrapper{display:none}.tile-wrapper .carbon-container.floating{position:static;margin:20px auto}.navbar-nav .language{display:none}.navbar-brand{font-size:15px}.navbar .nav{padding-top:0}.navbar-inverse{padding-bottom:0;padding-top:0}.container>.navbar-header{margin-right:50px}.post-pager .pagination li{display:none}.post-pager .pagination li.active,.post-pager .pagination li.next,.post-pager .pagination li.previous{display:inline}.post-pager .pagination li.previous a{border-top-left-radius:4px;border-bottom-left-radius:4px}.post-pager .pagination li.next a{border-top-right-radius:4px;border-bottom-right-radius:4px}#footer .col-sm-4{margin-bottom:50px}#footer .col-sm-4 .month-list li,#footer .col-sm-4 .tag-list li{margin:5px 0;font-size:16px}.footer-bottom.container{padding:15px 0 72px 0}}.navbar-inverse .navbar-brand{color:#fff}.navbar-inverse .navbar-toggle{border-color:transparent;position:absolute;float:none;padding:9px 10px;top:0;right:0}.progress-bar-theme{background-color:#659cef}.mt{margin-top:40px;margin-bottom:40px}.pt{padding-top:50px;padding-bottom:50px}#ww{padding-top:70px;padding-bottom:70px;background-color:#f2f2f2}#footer{background-color:#2f2f2f;padding-top:50px;padding-bottom:50px}#footer .social-icons a{color:#fff;font-size:20px;display:inline-block;margin:0 7px}#footer .social-icons a.first{margin-left:14px}#footer .footer-col .tag-list li{float:left;margin-right:8px}#footer .footer-col .tag-list li:not(:last-child) a:after{content:", "}#footer .footer-col .month-list .year{cursor:pointer}#footer .footer-col .month-list .year:not(:first-child) .months{display:none}#footer p{color:#fff}#footer h4{color:#fff;text-transform:uppercase;padding-bottom:20px}#footer ul{margin:0;padding:0}#footer ul ul{padding-left:20px}#footer li{margin:0;padding:0;list-style:none}.post-list .post{padding-top:60px;padding-bottom:60px;background-color:#f2f2f2}.post-list .post:nth-child(even){background-color:#fff}.post-list .post h2{font-size:24px;margin-top:10px}.post-pager{text-align:center}.post-pager .pagination li.active a{background:#1abc9c;border-color:#1abc9c}.post-details{padding:40px 0}.page-details{padding:40px 0}.page-details h1{margin-top:0}.publish-date{font-size:12px;text-transform:uppercase;color:#c2c2c2;font-weight:700}ba{font-size:12px;text-transform:uppercase}.bq{font-size:22px;padding-top:30px}bt{font-size:12px}.post-footer{padding-top:20px}.post-footer p{font-size:14px;margin-bottom:10px}.post-footer .social-share-buttons{margin-bottom:25px}.post-footer .related-posts{margin-bottom:25px}.post-footer .related-posts h2{margin-bottom:15px}.post-footer .related-posts li{margin-top:8px}.social-share-buttons span{line-height:58px;padding-right:5px;vertical-align:top}.social-share-buttons a{display:inline-block;background:url(/_content/images/social-icons.svg) no-repeat;background-size:570% 340%;width:46px;height:50px;overflow:hidden;text-indent:100%;white-space:nowrap}.social-share-buttons .facebook-button{background-position:0 -56px}.social-share-buttons .twitter-button{background-position:-54px -56px}.social-share-buttons .googleplus-button{background-position:-108px -56px}.social-share-buttons .pinterest-button{background-position:-163px -56px}.glyphicon{font-size:40px;color:#659cef}.glyphicon,.progress-bar-theme,a{color:#1abc9c}.navbar-inverse{background-color:#1abc9c;border-color:#16a085}.footer-bottom{padding:15px 0 60px 0;text-align:center}.footer-bottom .powered-by{margin-bottom:10px;font-weight:700;font-size:15px}.footer-bottom .copyright{font-size:12px}.form-group-honeypot{display:none}.plunker{border:1px solid #ccc}.small-text{font-size:12px}.blog-post{position:relative}.post-date{float:left;padding-top:25px;white-space:nowrap}h4.first{margin-top:30px}.codefund-container{display:none;position:fixed;bottom:64px;right:20px;width:232px;border:1px solid #d3d7dc;background:#fff;padding:8px 15px 0 15px;z-index:1000;box-shadow:10px 10px 5px rgba(0,0,0,.5)}.codefund-container .tile-title{font-size:12px;position:absolute;width:200px}.codefund-container .tile-title .icon-cross{position:absolute;right:0;top:0;font-size:16px;cursor:pointer}.codefund-container #codefund-tile{padding-top:21px}.codefund-container #codefund-tile .cf-wrapper{display:block;overflow:hidden}.codefund-container #codefund-tile .cf-wrapper .cf-img{display:block;margin-bottom:10px;padding-top:27px;width:200px}.codefund-container #codefund-tile .cf-wrapper .cf-text{display:block;font-size:12px}.codefund-container #codefund-tile .cf-powered-by{display:block;color:#555;font-size:12px;margin-top:9px}.carbon-container{position:static;margin:20px auto;bottom:64px;right:20px;width:162px;border:1px solid #d3d7dc;background:#fff;z-index:1000;box-shadow:10px 10px 5px rgba(0,0,0,.5)}.carbon-container.floating{position:fixed;margin:0}.carbon-container .tile-title{font-size:12px;position:absolute;width:144px;margin-left:10px;margin-top:5px}.carbon-container .tile-title .icon-cross{position:absolute;right:0;top:0;font-size:16px;cursor:pointer}.carbon-container #carbon-tile .native-carbon [id=_custom_]:not(:last-child){display:none}.carbon-container #carbon-tile .native-carbon .native-container .native-banner{display:block;overflow:hidden;padding-top:27px}.carbon-container #carbon-tile .native-carbon .native-container .native-banner .native-img{display:flex;margin-bottom:10px;width:100%;height:120px;line-height:0;align-items:center;justify-content:center}.carbon-container #carbon-tile .native-carbon .native-container .native-banner .native-img img{max-height:50px;line-height:0}.carbon-container #carbon-tile .native-carbon .native-container .native-banner .native-details{display:block;font-size:12px;padding:0 10px}.carbon-container #carbon-tile .native-carbon .native-via{display:block;color:#555;font-size:12px;padding:5px 10px}#native-fixed-js .native-fixed{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;box-shadow:inset 0 1px 0 hsla(0,0%,0%,.075);position:fixed;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center;background-color:#111}#native-fixed-js .native-fixed .native-link{text-decoration:none;display:flex;justify-content:center;align-items:center;padding:10px 14px;color:#eee}#native-fixed-js .native-fixed .native-sponsor{font-size:11px;border-radius:2px;margin-right:1em;line-height:1;padding:6px 10px;font-weight:600;text-transform:uppercase}#native-fixed-js .native-fixed .native-text{font-size:14px;line-height:1.3}#amazon-links .amzn-native-header .amzn-native-header-text{display:block!important;margin-top:60px!important;padding-bottom:10px!important;font-family:Montserrat,sans-serif!important;font-size:30px!important;font-weight:700!important}#disqus_thread iframe:nth-child(2),#disqus_thread iframe:nth-child(4){display:none}.adsbygoogle{margin-bottom:20px}.bsa_leaderboard{text-align:center;margin-bottom:20px;background:#f5f5f5;height:250px;display:flex;flex-direction:column;align-items:center;justify-content:center}.vdo-wrapper{max-width:560px;max-height:315px;margin:30px auto 20px auto}.box-sizing{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}.text-size-adjust{-ms-text-size-adjust:100%;-moz-text-size-adjust:100%;-webkit-text-size-adjust:100%}
    </style>

    
    <script async="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/analytics.js.download"></script><script type="text/javascript">
        (function(){
            var bsa_optimize=document.createElement('script');
            bsa_optimize.type='text/javascript';
            bsa_optimize.async=true;
            bsa_optimize.src='https://cdn-s2s.buysellads.net/pub/jasonwatmore.js?' + (new Date()-new Date()%3600000);
            (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa_optimize);
        })();
    </script><script type="text/javascript" async="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/jasonwatmore.js.download"></script>
    <script type="text/javascript" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/monetization.js.download"></script>

    
        <!-- analytics -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '/analytics.js?d=' + new Date().toISOString().slice(0, 13), 'ga');
        </script>
    
<script type="text/javascript" async="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/embed.js(1).download"></script><script async="" type="text/javascript" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/gpt.js.download" dropped-by="bsaoptimize"></script><link rel="preload" href="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/f.txt" as="script"><script type="text/javascript" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/f.txt"></script><link rel="preload" href="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/f(1).txt" as="script"><script type="text/javascript" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/f(1).txt"></script><script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/pubads_impl_2020071408.js.download" async=""></script><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.4ccc2ba08c360cad557fd79f7fdaa34f.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.5439bce5811a3908f603eb4fa66869dd.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.1af790aed9f2d4e4d1280d1e4a06f523.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><link rel="prefetch" href="https://99a349cf52d79a1ecc1bf8024ba09f62.safeframe.googlesyndication.com/safeframe/1-0-37/html/container.html"><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-37/html/container.html"><div id="_bsa_srv-CE7I523U_9"></div><div id="_bsa_srv-CK7I423E_10"></div></head>
<body>
    <!-- nav -->
    <div class="navbar navbar-inverse navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" ng-click="showNav = !showNav">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://jasonwatmore.com/">
                    <img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/jason-watmore.jpg">
                    <span>
                        Jason Watmore's Blog
                        <small>A Web Developer in Sydney</small>
                    </span>
                </a>
            </div>
            <div class="navbar-collapse collapse" ng-class="{&#39;in&#39;: showNav, &#39;collapse&#39;: !showNav}">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://jasonwatmore.com/">Home</a></li>
                    <li><a href="https://jasonwatmore.com/page/code-snippets">Code Snippets</a></li>
                    <li><a href="https://jasonwatmore.com/archive">Archive</a></li>
                    <li><a href="https://jasonwatmore.com/contact">Contact</a></li>
                    <li class="social-icons">
                        <a href="https://twitter.com/jason_watmore" rel="nofollow" target="_blank" title="Twitter"><span class="icon-twitter"></span></a>
                        <a href="https://github.com/cornflourblue" rel="nofollow" target="_blank" title="GitHub"><span class="icon-github"></span></a>
                        <a href="https://www.youtube.com/c/JasonWatmore" rel="nofollow" target="_blank" title="YouTube"><span class="icon-youtube"></span></a>
                        <a href="https://jasonwatmore.com/rss" target="_self" class="feed-link" title="RSS"><span class="icon-rss"></span></a>
                    </li>
                    <!-- ngIf: alternates.length -->
                </ul>
            </div>
        </div>
    </div>

    <!-- main -->
    <!-- uiView: --><main ui-view="" class="ng-scope">
        
            <div ng-non-bindable="" class="ng-scope">
                <div class="post-details" itemscope="" itemtype="http://schema.org/CreativeWork">
    <div class="container">
        <div class="publish-date">
            <div>Published: <time itemprop="datePublished" content="2020-05-25">May 25 2020</time></div>
            
        </div>
        <h1 itemprop="headline">ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens</h1>

        <div id="bsa-zone_1572457011545-7_123456" class="bsa_leaderboard" data-google-query-id="CLSx4oGF1uoCFR2dSwUdLq8B4A"><div id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_ATF_0__container__" style="border: 0pt none; display: inline-block; width: 970px; height: 250px;"><iframe frameborder="0" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/container.html" id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_ATF_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="970" height="250" data-is-safeframe="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="2s" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div>

        

        <div itemprop="text" ng-non-bindable=""><p>Tutorial built with <strong>ASP.NET Core 3.1</strong></p>

<p style="margin-bottom:0;">Other versions available:</p>

<ul>
	<li><strong>Node: </strong> <a href="https://jasonwatmore.com/post/2020/06/17/nodejs-mongodb-api-jwt-authentication-with-refresh-tokens">Node.js + MongoDB</a></li>
</ul>

<p>In this tutorial we'll go through an example of how to implement JWT (JSON Web Token) authentication with refresh tokens in an ASP.NET Core 3.1 API.</p>

<p>For an extended example that includes email sign up, verification,&nbsp;forgot password and user management (CRUD) functionality see <a href="https://jasonwatmore.com/post/2020/07/06/aspnet-core-3-boilerplate-api-with-email-sign-up-verification-authentication-forgot-password">ASP.NET Core 3.1 - Boilerplate API with Email Sign Up, Verification, Authentication &amp; Forgot Password</a>.</p>

<p>The example API has the following endpoints/routes to demonstrate authenticating with JWT, refreshing and revoking tokens, and accessing secure routes:</p>

<ul>
	<li><code>/users/authenticate</code> - public route that accepts HTTP POST requests containing a username and password in the body. If the username and password are correct then a JWT authentication token and the user details are returned in the response body, and a refresh token cookie (HTTP Only) is returned in the response headers.</li>
	<li><code>/users/refresh-token</code> - public route that accepts HTTP POST requests with a refresh token cookie. If the cookie exists and the refresh token is valid then a new JWT authentication token and the user details are returned in the response body, a new refresh token cookie (HTTP Only) is returned in the response headers and the old refresh token is revoked.</li>
	<li><code>/users/revoke-token</code> - secure route that accepts HTTP POST requests containing a refresh token either in the body or in a cookie, if both are present the token in the body is used. If the refresh token is valid and active then it is revoked and can no longer be used to refresh JWT tokens.</li>
	<li><code>/users</code> - secure route that accepts HTTP GET requests and returns a list of all the users in the application if the HTTP Authorization header contains a valid JWT token. If there is no auth token or the token is invalid then a 401 Unauthorized response is returned.</li>
	<li><code>/users/{id}</code> - secure route that accepts HTTP GET requests and returns the details of the user with the specified id.</li>
	<li><code>/users/{id}/refresh-tokens</code> - secure route that accepts HTTP GET requests and returns a list of all refresh tokens (active and revoked) of the user with the specified id.</li>
</ul>

<p>To keep the api code as simple as possible, it is configured to use the EF Core InMemory database provider which allows Entity Framework Core to create and connect to an in-memory database rather than you having to install a real db server. This can be easily switched out to a real db provider when you're ready to work with a database such as SQL Server, Oracle, MySql etc. For an example api that uses SQLite in development and SQL Server in production see <a href="https://jasonwatmore.com/post/2019/10/14/aspnet-core-3-simple-api-for-authentication-registration-and-user-management">this post</a>.</p>

<p>The tutorial project is available on GitHub at&nbsp;<a href="https://github.com/cornflourblue/aspnet-core-3-jwt-refresh-tokens-api" rel="nofollow" target="_blank">https://github.com/cornflourblue/aspnet-core-3-jwt-refresh-tokens-api</a>.</p>

<h2><br>
Tutorial Contents</h2>

<ul>
	<li><a href="https://jasonwatmore.com/#tools-required">Tools required to develop ASP.NET Core 3.1 applications</a></li>
	<li><a href="https://jasonwatmore.com/#running-api">Running the example API locally</a></li>
	<li><a href="https://jasonwatmore.com/#testing-postman">Testing the API with Postman</a></li>
	<li><a href="https://jasonwatmore.com/#running-angular">Running an Angular 9 app with the ASP.NET Core API</a></li>
	<li><a href="https://jasonwatmore.com/#project-structure">ASP.NET Core API project structure</a></li>
</ul>

<h2><br>
<a name="tools-required"></a>Tools required to run the ASP.NET Core 3.1 JWT Example Locally</h2>

<p>To develop and run ASP.NET Core applications locally, download and&nbsp;install the following:</p>

<ul>
	<li><a href="https://www.microsoft.com/net/download/core" target="_blank">.NET Core SDK</a>&nbsp;- includes the .NET Core runtime and command line tools</li>
	<li><a href="https://code.visualstudio.com/" target="_blank">Visual Studio Code</a>&nbsp;- code editor that runs on Windows, Mac and Linux</li>
	<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp" target="_blank">C# extension</a> for Visual Studio Code - adds support to VS Code for developing .NET Core applications</li>
</ul>

<p>For detailed instructions see <a href="https://jasonwatmore.com/post/2020/05/26/aspnet-core-setup-development-environment">ASP.NET Core - Setup Development Environment</a>.</p>

<h2><br>
<a name="running-api"></a>Running the ASP.NET Core JWT with Refresh Tokens API Locally</h2>

<ol>
	<li>Download or clone the tutorial project code from <a href="https://github.com/cornflourblue/aspnet-core-3-jwt-refresh-tokens-api" rel="nofollow" target="_blank">https://github.com/cornflourblue/aspnet-core-3-jwt-refresh-tokens-api</a></li>
	<li>Start the api by running <code>dotnet run</code> from the command line in the project root folder (where the WebApi.csproj file is located), you should see the message <code>Now listening on: http://localhost:4000</code>. Follow the instructions below to test with Postman or hook up with the example Angular application available.</li>
</ol>

<h4>Starting in debug mode</h4>

<p>You can also start the application in debug mode in VS Code by opening the project root folder in VS Code and pressing F5 or by selecting Debug -&gt; Start Debugging from the top menu. Running in debug mode allows you to attach breakpoints to pause execution and step through the application code.</p>

<h4>Before running in production</h4>

<p>Before running in production make sure that you update the <code>Secret</code> property in the <a href="https://jasonwatmore.com/#app-settings-json">appsettings.json</a> file, it is used to sign and verify JWT tokens for authentication, change it to a random string to ensure nobody else can generate a JWT with the same secret and gain unauthorized access to your api. A quick and easy way is join a couple of GUIDs together to make a long random string (e.g. from <a href="https://www.guidgenerator.com/" rel="nofollow" target="_blank">https://www.guidgenerator.com/</a>).</p>

<p style="text-align:center;"><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/B-epDSW3Ou8.html" style="max-width:560px; max-height:315px; width:100%; height:56vw"></iframe></p>

<h2><br>
<a name="testing-postman"></a>Testing the API with Postman</h2>

<p>Postman is a great tool for testing APIs, you can download it at <a href="https://www.getpostman.com/" rel="nofollow" target="_blank">https://www.getpostman.com/</a>.</p>

<p>Below are instructions on how to use Postman to authenticate a user to get a JWT token and refresh token from the api, refresh and revoke tokens, and retrieve user details from secure routes using JWT.</p>

<h3>How to authenticate a user with Postman</h3>

<p>To authenticate a user to get a JWT token and refresh token follow these steps:</p>

<ol>
	<li>Open a new request tab by clicking the plus (+) button at the end of the tabs.</li>
	<li>Change the http request method to "POST" with the dropdown selector on the left of the URL input field.</li>
	<li>In the URL field enter the address to the authenticate route of your local API - <code>http://localhost:4000/users/authenticate</code>.</li>
	<li>Select the "Body" tab below the URL field, change the body type radio button to "raw", and change the format dropdown selector to "JSON".</li>
	<li>Enter a JSON object containing the test username and password in the "Body" textarea:
	<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">{</span>
    <span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span>
    <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"test"</span>
<span class="token punctuation">}</span></code></pre>
	</li>
	<li>Click the "Send" button, you should receive a "200 OK" response with the user details including a JWT token in the response body and a refresh token in the response cookies.</li>
</ol>

<p>Here's a screenshot of Postman after the request is sent and the user has been authenticated:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/authenticate-user.png"></p>

<p>And this is the response cookies tab with the refresh token:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/authenticate-user-cookies.png"></p>

<h3><br>
How to refresh a token with Postman</h3>

<p>This step can only be done after the above authenticate step because a valid refresh token cookie is required.</p>

<p>To use a refresh token cookie to get a new JWT token and a new refresh token follow these steps:</p>

<ol>
	<li>Open a new request tab by clicking the plus (+) button at the end of the tabs.</li>
	<li>Change the http request method to "POST" with the dropdown selector on the left of the URL input field.</li>
	<li>In the URL field enter the address to the refresh token route of your local API - <code>http://localhost:4000/users/refresh-token</code>.</li>
	<li>Click the "Send" button, you should receive a "200 OK" response with the user details including a JWT token in the response body and a refresh token in the response cookies. Make a copy of the JWT token value because we'll be using it in the next steps to make authenticated requests.</li>
</ol>

<p>Here's a screenshot of Postman after the request is sent and the token has been refreshed:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/refresh-token.png"></p>

<p>And this is the response cookies tab with the new refresh token:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/refresh-token-cookies.png"></p>

<h3><br>
How to make an authenticated request to retrieve all users</h3>

<p>To make an authenticated request to get all users with the JWT token from the previous step, follow these steps:</p>

<ol>
	<li>Open a new request tab by clicking the plus (+) button at the end of the tabs.</li>
	<li>Change the http request method to "GET" with the dropdown selector on the left of the URL input field.</li>
	<li>In the URL field enter the address to the users route of your local API - <code>http://localhost:4000/users</code>.</li>
	<li>Select the "Authorization" tab below the URL field, change the type to "Bearer Token" in the type dropdown selector, and paste the JWT token from the previous step into the "Token" field.</li>
	<li>Click the "Send" button, you should receive a "200 OK" response containing a JSON array with all the user records in the system (just the one test user in the example).</li>
</ol>

<p>Here's a screenshot of Postman after making an authenticated request to get all users:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/get-users.png"></p>

<h3><br>
How to retrieve all of a user's refresh tokens</h3>

<p>To get all refresh tokens for a user including active and revoked tokens, follow these steps:</p>

<ol>
	<li>Open a new request tab by clicking the plus (+) button at the end of the tabs.</li>
	<li>Change the http request method to "GET" with the dropdown selector on the left of the URL input field.</li>
	<li>In the URL field enter the address to the users route of your local API - <code>http://localhost:4000/users/1/refresh-tokens</code>.</li>
	<li>Select the "Authorization" tab below the URL field, change the type to "Bearer Token" in the type dropdown selector, and paste the JWT token from the previous authenticate (or refresh token) step into the "Token" field.</li>
	<li>Click the "Send" button, you should receive a "200 OK" response containing a JSON array with all the test user's refresh tokens. Make a copy of the last token value (the active token) because we'll use it in the next step to revoke the token.</li>
</ol>

<p>Here's a screenshot of Postman after making an authenticated request to get all refresh tokens for the test user:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/get-refresh-tokens.png"></p>

<h3><br>
How to revoke a token with Postman</h3>

<p>To revoke a refresh token so it can no longer be used to generate JWT tokens, follow these steps:</p>

<ol>
	<li>Open a new request tab by clicking the plus (+) button at the end of the tabs.</li>
	<li>Change the http request method to "POST" with the dropdown selector on the left of the URL input field.</li>
	<li>In the URL field enter the address to the authenticate route of your local API - <code>http://localhost:4000/users/revoke-token</code>.</li>
	<li>Select the "Authorization" tab below the URL field, change the type to "Bearer Token" in the type dropdown selector, and paste the JWT token from the previous authenticate (or refresh token) step into the "Token" field.</li>
	<li>Select the "Body" tab below the URL field, change the body type radio button to "raw", and change the format dropdown selector to "JSON".</li>
	<li>Enter a JSON object containing the active refresh token from the previous step in the "Body" textarea, e.g:
	<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">{</span>
    <span class="token string">"token"</span><span class="token punctuation">:</span> <span class="token string">"ENTER THE ACTIVE REFRESH TOKEN HERE"</span>
<span class="token punctuation">}</span></code></pre>
	</li>
	<li>Click the "Send" button, you should receive a "200 OK" response with the message <code>Token revoked</code>.</li>
</ol>

<p>NOTE: You can also revoke the token in the <code>refreshToken</code> cookie with the <code>/users/revoke-token</code> route, to revoke the refresh token cookie simply send the same request with an empty body.</p>

<p>Here's a screenshot of Postman after making the request and the token has been revoked:<br>
<img src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/revoke-token.png"></p>

<p>&nbsp;</p>

<h2><br>
<a name="running-angular"></a>Running an Angular app with the JWT Refresh Tokens API</h2>

<p>For full details about the example Angular &nbsp;application see the post <a href="https://jasonwatmore.com/post/2020/05/22/angular-9-jwt-authentication-with-refresh-tokens">Angular 9 - JWT Authentication with Refresh Tokens</a>. But to get up and running quickly just follow the below steps.</p>

<ol>
	<li>Download or clone the Angular 9 tutorial code from <a href="https://github.com/cornflourblue/angular-9-jwt-refresh-tokens" rel="nofollow" target="_blank">https://github.com/cornflourblue/angular-9-jwt-refresh-tokens</a></li>
	<li>Install all required npm packages by running <code>npm install</code> from the command line in the project root folder (where the package.json is located).</li>
	<li>Remove or comment out the line below the comment <code>// provider used to create fake backend</code> located in the <code>/src/app/app.module.ts</code> file.</li>
	<li>Start the application by running <code>npm start</code> from the command line in the project root folder, this will launch a browser displaying the Angular example application and it should be hooked up with the ASP.NET Core JWT Refresh Tokens API that you already have running.</li>
</ol>

<div>&nbsp;</div>

<h2><a name="project-structure"></a>ASP.NET Core API Project Structure</h2>

<p>The tutorial project is organised into the following folders:<br>
<strong>Controllers</strong> - define the end points / routes for the web api, controllers are the&nbsp;entry point into the web api from client applications via http requests.<br>
<strong>Models</strong> - represent request and response models for controller methods, request models define the parameters for incoming requests, and response models can be used to define what data is returned.<br>
<strong>Services</strong> - contain core business logic, validation and data access code.<br>
<strong>Entities</strong> - represent the application data stored in the database.<br>
<strong>Helpers</strong> - anything that doesn't fit into the above folders.</p>

<p>Click any of the below links to jump down to a description of each file along with its code:</p>

<ul>
	<li>Controllers
	<ul>
		<li><a href="https://jasonwatmore.com/#users-controller-cs">UsersController.cs</a></li>
	</ul>
	</li>
	<li>Entities
	<ul>
		<li><a href="https://jasonwatmore.com/#refresh-token-cs">RefreshToken.cs</a></li>
		<li><a href="https://jasonwatmore.com/#user-cs">User.cs</a></li>
	</ul>
	</li>
	<li>Helpers
	<ul>
		<li><a href="https://jasonwatmore.com/#app-settings-cs">AppSettings.cs</a></li>
		<li><a href="https://jasonwatmore.com/#data-context-cs">DataContext.cs</a></li>
	</ul>
	</li>
	<li>Models
	<ul>
		<li><a href="https://jasonwatmore.com/#authenticate-request-cs">AuthenticateRequest.cs</a></li>
		<li><a href="https://jasonwatmore.com/#authenticate-response-cs">AuthenticateResponse.cs</a></li>
		<li><a href="https://jasonwatmore.com/#revoke-token-request-cs">RevokeTokenRequest.cs</a></li>
	</ul>
	</li>
	<li>Services
	<ul>
		<li><a href="https://jasonwatmore.com/#user-service-cs">UserService.cs</a></li>
	</ul>
	</li>
	<li><a href="https://jasonwatmore.com/#app-settings-development-json">appsettings.Development.json</a></li>
	<li><a href="https://jasonwatmore.com/#app-settings-json">appsettings.json</a></li>
	<li><a href="https://jasonwatmore.com/#program-cs">Program.cs</a></li>
	<li><a href="https://jasonwatmore.com/#startup-cs">Startup.cs</a></li>
	<li><a href="https://jasonwatmore.com/#web-api-csproj">WebApi.csproj</a></li>
</ul>

<div>&nbsp;</div>

<h2><a name="users-controller-cs"></a>Users Controller</h2>

<div><strong>Path: /Controllers/UsersController.cs</strong></div>

<p>The ASP.NET Core users controller defines and handles all routes / endpoints for the api that relate to users, this includes authentication, refreshing and revoking tokens, and retrieving user and refresh token data. Within each route the controller calls the user service to perform the action required, this enables the controller to stay 'lean' and completely separate from the business logic and data access code.</p>

<p>The controller actions are secured with JWT using the <code>[Authorize]</code> attribute, with the exception of the <code>Authenticate</code> and <code>RefreshToken</code> methods which allow public access by overriding the <code>[Authorize]</code> attribute on the controller with an <code>[AllowAnonymous]</code> attribute on each action method. I chose this approach so any new action methods added to the controller will be secure by default unless explicitly made public.</p>

<p>The <code>setTokenCookie()</code> helper method appends an HTTP Only cookie with the refresh token to the response for increased security. HTTP Only cookies are not accessible to client-side javascript which prevents XSS (cross site scripting), and the refresh token can only be used to fetch a new token from the <code>/users/refresh-token</code> route which prevents CSRF (cross site request forgery).</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Authorization<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Services<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Models<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Http<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Controllers
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">Authorize</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">ApiController</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">Route</span><span class="token punctuation">(</span><span class="token string">"[controller]"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UsersController</span> <span class="token punctuation">:</span> <span class="token class-name">ControllerBase</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">IUserService</span> _userService<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">UsersController</span><span class="token punctuation">(</span><span class="token class-name">IUserService</span> userService<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">AllowAnonymous</span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"authenticate"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">FromBody</span><span class="token punctuation">]</span> <span class="token class-name">AuthenticateRequest</span> model<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> response <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">Authenticate</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token function">ipAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> message <span class="token operator">=</span> <span class="token string">"Username or password is incorrect"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">setTokenCookie</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>RefreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">AllowAnonymous</span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"refresh-token"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">RefreshToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> refreshToken <span class="token operator">=</span> Request<span class="token punctuation">.</span>Cookies<span class="token punctuation">[</span><span class="token string">"refreshToken"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> response <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">RefreshToken</span><span class="token punctuation">(</span>refreshToken<span class="token punctuation">,</span> <span class="token function">ipAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>response <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">Unauthorized</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> message <span class="token operator">=</span> <span class="token string">"Invalid token"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">setTokenCookie</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>RefreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">HttpPost</span><span class="token punctuation">(</span><span class="token string">"revoke-token"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">RevokeToken</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token class-name">FromBody</span><span class="token punctuation">]</span> <span class="token class-name">RevokeTokenRequest</span> model<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// accept token from request body or cookie</span>
            <span class="token keyword">var</span> token <span class="token operator">=</span> model<span class="token punctuation">.</span>Token <span class="token operator">??</span> Request<span class="token punctuation">.</span>Cookies<span class="token punctuation">[</span><span class="token string">"refreshToken"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> message <span class="token operator">=</span> <span class="token string">"Token is required"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> response <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">RevokeToken</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token function">ipAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> message <span class="token operator">=</span> <span class="token string">"Token not found"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> message <span class="token operator">=</span> <span class="token string">"Token revoked"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">HttpGet</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> users <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">HttpGet</span><span class="token punctuation">(</span><span class="token string">"{id}"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">GetById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> user <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">GetById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">HttpGet</span><span class="token punctuation">(</span><span class="token string">"{id}/refresh-tokens"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">IActionResult</span> <span class="token function">GetRefreshTokens</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> user <span class="token operator">=</span> _userService<span class="token punctuation">.</span><span class="token function">GetById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// helper methods</span>

        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setTokenCookie</span><span class="token punctuation">(</span><span class="token keyword">string</span> token<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> cookieOptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CookieOptions</span>
            <span class="token punctuation">{</span>
                HttpOnly <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
                Expires <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            Response<span class="token punctuation">.</span>Cookies<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span><span class="token string">"refreshToken"</span><span class="token punctuation">,</span> token<span class="token punctuation">,</span> cookieOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token keyword">string</span> <span class="token function">ipAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Request<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span><span class="token string">"X-Forwarded-For"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> Request<span class="token punctuation">.</span>Headers<span class="token punctuation">[</span><span class="token string">"X-Forwarded-For"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                <span class="token keyword">return</span> HttpContext<span class="token punctuation">.</span>Connection<span class="token punctuation">.</span>RemoteIpAddress<span class="token punctuation">.</span><span class="token function">MapToIPv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="refresh-token-cs"></a>Refresh Token Entity</h2>

<div><strong>Path: /Entities/RefreshToken.cs</strong></div>

<p>The refresh token entity class represents the data for a refresh token in the application.</p>

<p>Entity classes define the tables and properties stored in the database, they are also used to pass data between different parts of the application (e.g. between services and controllers) and can be used to return http response data from controller action methods. If a controller action method requires custom data to be returned (e.g. multiple different entity types) then a custom response model class can be created in the <code>Models</code> folder.</p>

<p>The <code>[Owned]</code> attribute marks the refresh token class as an <em>owned entity type</em>, meaning it can only exist as a child / dependant of another entity class. In this example a refresh token is always owned by a <a href="https://jasonwatmore.com/#user-cs">user entity</a>.</p>

<p>The <code>[Key]</code> attribute explicitly sets the id field as the primary key in the database table. Properties with the name <code>Id</code> are automatically made primary keys by EF Core, however in the case of <code>Owned</code> entities EF Core creates a composite primary key consisting of the id and the owner id which can cause errors with auto generated id fields. Explicitly marking the id with the <code>[Key]</code> attribute tells EF Core to make only the id field the primary key in the db table.</p>

<p>The <code>[JsonIgnore]</code> attribute prevents the id from being serialized and returned with refresh token data in api responses.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>DataAnnotations<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Json<span class="token punctuation">.</span>Serialization<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>EntityFrameworkCore<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Entities
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token class-name">Owned</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RefreshToken</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token class-name">Key</span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token class-name">JsonIgnore</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        
        <span class="token keyword">public</span> <span class="token keyword">string</span> Token <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">DateTime</span> Expires <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">bool</span> IsExpired <span class="token operator">=&gt;</span> DateTime<span class="token punctuation">.</span>UtcNow <span class="token operator">&gt;=</span> Expires<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">DateTime</span> Created <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> CreatedByIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> DateTime<span class="token punctuation">?</span> Revoked <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> RevokedByIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> ReplacedByToken <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">bool</span> IsActive <span class="token operator">=&gt;</span> Revoked <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>IsExpired<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="user-cs"></a>User Entity</h2>

<div><strong>Path: /Entities/User.cs</strong></div>

<p>The user entity class represents the data for a user in the application.</p>

<p>Entity classes define the tables and properties stored in the database, they are also used to pass data between different parts of the application (e.g. between services and controllers) and can be used to return http response data from controller action methods. If a controller action method requires custom data to be returned (e.g. multiple different entity types) then a custom response model class can be created in the <code>Models</code> folder.</p>

<p>The <code>[JsonIgnore]</code> attribute prevents the password and refresh tokens properties from being serialized and returned with user data in api responses. There is a dedicated route for fetching refresh token data (<code>/users/{id}/refresh-tokens</code>).</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Json<span class="token punctuation">.</span>Serialization<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Entities
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">JsonIgnore</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Password <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">JsonIgnore</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> List<span class="token operator">&lt;</span>RefreshToken<span class="token operator">&gt;</span> RefreshTokens <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="app-settings-cs"></a>App Settings Class</h2>

<div><strong>Path: /Helpers/AppSettings.cs</strong></div>

<p>The app settings class contains properties defined in the appsettings.json file and is used for accessing application settings via objects that are injected into classes using the ASP.NET Core built in dependency injection (DI) system. For example the User Service accesses app settings via an <code>IOptions&lt;AppSettings&gt; appSettings</code> object that is injected into the constructor.</p>

<p>Mapping of configuration sections to classes is done in the <code>ConfigureServices</code> method of the <a href="https://jasonwatmore.com/#startup-cs">Startup.cs</a> file.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Helpers
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppSettings</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Secret <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="data-context-cs"></a>Data Context</h2>

<div><strong>Path: /Helpers/DataContext.cs</strong></div>

<p>The data context class is used for accessing application data through Entity Framework Core. It derives from the EF Core DbContext class and has a public <code>Users</code> property for accessing and managing user data. The data context is used by services such as the <a href="https://jasonwatmore.com/#user-service-cs">user service</a> for handling all low level data (CRUD) operations.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>EntityFrameworkCore<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Entities<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Helpers
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataContext</span> <span class="token punctuation">:</span> <span class="token class-name">DbContext</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> DbSet<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> Users <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token function">DataContext</span><span class="token punctuation">(</span>DbContextOptions<span class="token operator">&lt;</span>DataContext<span class="token operator">&gt;</span> options<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="authenticate-request-cs"></a>Authenticate Request Model</h2>

<div><strong>Path: /Models/AuthenticateRequest.cs</strong></div>

<p>The authenticate request model defines the parameters for incoming requests to the <code>/users/authenticate</code> route, it is attached to the route as the parameter to the <code>Authenticate</code> action method of the <a href="https://jasonwatmore.com/#users-controller-cs">users controller</a>. When an HTTP POST request is received by the route, the data from the body is bound to an instance of the <code>AuthenticateRequest</code> class, validated and passed to the method.</p>

<p>ASP.NET Core Data Annotations are used to automatically handle model validation, the <code>[Required]</code> attribute sets both the username and password as required fields so if either are missing a validation error message is returned from the api.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>DataAnnotations<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Models
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticateRequest</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token class-name">Required</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">Required</span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Password <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="authenticate-response-cs"></a>Authenticate Response Model</h2>

<div><strong>Path: /Models/AuthenticateResponse.cs</strong></div>

<p>The authenticate response model defines the data returned after successful authentication. It includes basic user details, a JWT token and a refresh token.</p>

<p>The refresh token has the <code>[JsonIgnore]</code> attribute so it isn't returned in the api response body because it is returned in an HTTP Only cookie for increased security. HTTP Only cookies are not accessible to client-side javascript which prevents XSS (cross site scripting), and the refresh token can only be used to fetch a new token from the <code>/users/refresh-token</code> route which prevents CSRF (cross site request forgery).</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Json<span class="token punctuation">.</span>Serialization<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Entities<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Models
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticateResponse</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> FirstName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> LastName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Username <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> JwtToken <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token class-name">JsonIgnore</span><span class="token punctuation">]</span> <span class="token comment">// refresh token is returned in http only cookie</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> RefreshToken <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token function">AuthenticateResponse</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token keyword">string</span> jwtToken<span class="token punctuation">,</span> <span class="token keyword">string</span> refreshToken<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Id <span class="token operator">=</span> user<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>
            FirstName <span class="token operator">=</span> user<span class="token punctuation">.</span>FirstName<span class="token punctuation">;</span>
            LastName <span class="token operator">=</span> user<span class="token punctuation">.</span>LastName<span class="token punctuation">;</span>
            Username <span class="token operator">=</span> user<span class="token punctuation">.</span>Username<span class="token punctuation">;</span>
            JwtToken <span class="token operator">=</span> jwtToken<span class="token punctuation">;</span>
            RefreshToken <span class="token operator">=</span> refreshToken<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="revoke-token-request-cs"></a>Revoke Token Request Model</h2>

<div><strong>Path: /Models/RevokeTokenRequest.cs</strong></div>

<p>The revoke token request model defines the parameters for incoming requests to the <code>/users/revoke-token</code> route of the api, it is attached to the route as the parameter to the <code>RevokeToken</code> action method of the <a href="https://jasonwatmore.com/#users-controller-cs">users controller</a>. When an HTTP POST request is received by the route, the data from the body is bound to an instance of the <code>RevokeTokenRequest</code> class, validated and passed to the method.</p>

<p>The <code>Token</code> property is optional in the request body because the route also supports revoking the token sent in the <code>refreshToken</code> cookie. If both are present then the token in the request body is used.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Models
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RevokeTokenRequest</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Token <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="user-service-cs"></a>User Service</h2>

<div><strong>Path: /Services/UserService.cs</strong></div>

<p>The user service contains the core logic for authentication, generating JWT and refresh tokens, refreshing and revoking tokens, and fetching user data.</p>

<p>The top of the <code>UserService.cs</code> file contains the <code>IUserService</code> interface which defines the public methods for the user service, below the interface is the concrete <code>UserService</code> class that implements the interface.</p>

<p>The <code>Authenticate()</code> method finds a user by username and password to verify credentials and returns the user details with a JWT token and a refresh token. For simplicity passwords are stored as plain text in the example but in production passwords should be hashed, for an example of how to save and verify hashed passwords see the user service in <a href="https://jasonwatmore.com/post/2019/10/14/aspnet-core-3-simple-api-for-authentication-registration-and-user-management#user-service-cs">this post</a>.</p>

<p>The <code>RefreshToken()</code> method accepts an active refresh token and returns the user details with a JWT token and a new refresh token. The old refresh token is revoked and can no longer be used, this technique is called "refresh token rotation" and is used to increase application security by making refresh tokens short lived. When a refresh token is rotated the new token is saved in the <code>ReplacedByToken</code> field of the revoked token to create an audit trail.</p>

<p>The <code>RevokeToken()</code> method accepts an active refresh token and revokes it so it can no longer be used. A token is revoked when it has a <code>Revoked</code> date. The ip address of the user that revoked the token is saved in the <code>RevokedByIp</code> field.</p>

<p>The <code>GetAll()</code> method returns a list of all users in the system, and the <code>GetById()</code> method returns the user with the specified id.</p>

<p>The <code>generateJwtToken()</code> helper method returns a short lived JWT token that expires after 15 minutes. The token is created with the <code>JwtSecurityTokenHandler</code> class and digitally signed using the secret key stored in the <a href="https://jasonwatmore.com/#app-settings-json">app settings</a> file.</p>

<p>The <code>generateRefreshToken()</code> helper method returns a new refresh token that expires after 7 days. The created date and user ip address are saved against the token to help in identifying any unusual activity.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>IdentityModel<span class="token punctuation">.</span>Tokens<span class="token punctuation">.</span>Jwt<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Security<span class="token punctuation">.</span>Claims<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Security<span class="token punctuation">.</span>Cryptography<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Options<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>IdentityModel<span class="token punctuation">.</span>Tokens<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Models<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Entities<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Helpers<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi<span class="token punctuation">.</span>Services
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">AuthenticateResponse</span> <span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token class-name">AuthenticateRequest</span> model<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AuthenticateResponse</span> <span class="token function">RefreshToken</span><span class="token punctuation">(</span><span class="token keyword">string</span> token<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token function">RevokeToken</span><span class="token punctuation">(</span><span class="token keyword">string</span> token<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        IEnumerable<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> <span class="token function">GetById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">:</span> <span class="token class-name">IUserService</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">DataContext</span> _context<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">AppSettings</span> _appSettings<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">UserService</span><span class="token punctuation">(</span>
            <span class="token class-name">DataContext</span> context<span class="token punctuation">,</span>
            IOptions<span class="token operator">&lt;</span>AppSettings<span class="token operator">&gt;</span> appSettings<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _context <span class="token operator">=</span> context<span class="token punctuation">;</span>
            _appSettings <span class="token operator">=</span> appSettings<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">AuthenticateResponse</span> <span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token class-name">AuthenticateRequest</span> model<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> user <span class="token operator">=</span>  _context<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">SingleOrDefault</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Username <span class="token operator">==</span> model<span class="token punctuation">.</span>Username <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>Password <span class="token operator">==</span> model<span class="token punctuation">.</span>Password<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// return null if user not found</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

            <span class="token comment">// authentication successful so generate jwt and refresh tokens</span>
            <span class="token keyword">var</span> jwtToken <span class="token operator">=</span> <span class="token function">generateJwtToken</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> refreshToken <span class="token operator">=</span> <span class="token function">generateRefreshToken</span><span class="token punctuation">(</span>ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// save refresh token</span>
            user<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>refreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticateResponse</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> refreshToken<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">AuthenticateResponse</span> <span class="token function">RefreshToken</span><span class="token punctuation">(</span><span class="token keyword">string</span> token<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> user <span class="token operator">=</span> _context<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">SingleOrDefault</span><span class="token punctuation">(</span>u <span class="token operator">=&gt;</span> u<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Token <span class="token operator">==</span> token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// return null if no user found with token</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> refreshToken <span class="token operator">=</span> user<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Token <span class="token operator">==</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// return null if token is no longer active</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>refreshToken<span class="token punctuation">.</span>IsActive<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

            <span class="token comment">// replace old refresh token with a new one and save</span>
            <span class="token keyword">var</span> newRefreshToken <span class="token operator">=</span> <span class="token function">generateRefreshToken</span><span class="token punctuation">(</span>ipAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
            refreshToken<span class="token punctuation">.</span>Revoked <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
            refreshToken<span class="token punctuation">.</span>RevokedByIp <span class="token operator">=</span> ipAddress<span class="token punctuation">;</span>
            refreshToken<span class="token punctuation">.</span>ReplacedByToken <span class="token operator">=</span> newRefreshToken<span class="token punctuation">.</span>Token<span class="token punctuation">;</span>
            user<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>newRefreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// generate new jwt</span>
            <span class="token keyword">var</span> jwtToken <span class="token operator">=</span> <span class="token function">generateJwtToken</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticateResponse</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> jwtToken<span class="token punctuation">,</span> newRefreshToken<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">RevokeToken</span><span class="token punctuation">(</span><span class="token keyword">string</span> token<span class="token punctuation">,</span> <span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> user <span class="token operator">=</span> _context<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">SingleOrDefault</span><span class="token punctuation">(</span>u <span class="token operator">=&gt;</span> u<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>Token <span class="token operator">==</span> token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token comment">// return false if no user found with token</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> refreshToken <span class="token operator">=</span> user<span class="token punctuation">.</span>RefreshTokens<span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Token <span class="token operator">==</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// return false if token is not active</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>refreshToken<span class="token punctuation">.</span>IsActive<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>

            <span class="token comment">// revoke token and save</span>
            refreshToken<span class="token punctuation">.</span>Revoked <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
            refreshToken<span class="token punctuation">.</span>RevokedByIp <span class="token operator">=</span> ipAddress<span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _context<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> _context<span class="token punctuation">.</span>Users<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">GetById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> _context<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// helper methods</span>

        <span class="token keyword">private</span> <span class="token keyword">string</span> <span class="token function">generateJwtToken</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> tokenHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JwtSecurityTokenHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> key <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>ASCII<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span>_appSettings<span class="token punctuation">.</span>Secret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> tokenDescriptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecurityTokenDescriptor</span>
            <span class="token punctuation">{</span>
                Subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClaimsIdentity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Claim</span><span class="token punctuation">[</span><span class="token punctuation">]</span> 
                <span class="token punctuation">{</span>
                    <span class="token keyword">new</span> <span class="token class-name">Claim</span><span class="token punctuation">(</span>ClaimTypes<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> user<span class="token punctuation">.</span>Id<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Expires <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">.</span><span class="token function">AddMinutes</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                SigningCredentials <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SigningCredentials</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SymmetricSecurityKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> SecurityAlgorithms<span class="token punctuation">.</span>HmacSha256Signature<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> token <span class="token operator">=</span> tokenHandler<span class="token punctuation">.</span><span class="token function">CreateToken</span><span class="token punctuation">(</span>tokenDescriptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> tokenHandler<span class="token punctuation">.</span><span class="token function">WriteToken</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token class-name">RefreshToken</span> <span class="token function">generateRefreshToken</span><span class="token punctuation">(</span><span class="token keyword">string</span> ipAddress<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">using</span><span class="token punctuation">(</span><span class="token keyword">var</span> rngCryptoServiceProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RNGCryptoServiceProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">var</span> randomBytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                rngCryptoServiceProvider<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span>randomBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RefreshToken</span>
                <span class="token punctuation">{</span>
                    Token <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToBase64String</span><span class="token punctuation">(</span>randomBytes<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Expires <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    Created <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">,</span>
                    CreatedByIp <span class="token operator">=</span> ipAddress
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="app-settings-development-json"></a>App Settings (Development)</h2>

<div><strong>Path: /appsettings.Development.json</strong></div>

<p>Configuration file with application settings that are specific to the development environment.</p>

<pre class="line-numbers language-javascript"><code class=" language-javascript"><span class="token punctuation">{</span>
    <span class="token string">"Logging"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"LogLevel"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">"Default"</span><span class="token punctuation">:</span> <span class="token string">"Debug"</span><span class="token punctuation">,</span>
            <span class="token string">"System"</span><span class="token punctuation">:</span> <span class="token string">"Information"</span><span class="token punctuation">,</span>
            <span class="token string">"Microsoft"</span><span class="token punctuation">:</span> <span class="token string">"Information"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="app-settings-json"></a>App Settings</h2>

<div><strong>Path: /appsettings.json</strong></div>

<p>Root configuration file containing&nbsp;application settings for all environments.</p>

<p>IMPORTANT: The <code>"Secret"</code> property is used to sign and verify JWT tokens for authentication, change it to a random string to ensure nobody else can generate a JWT with the same secret and gain unauthorized access to your api. A quick and easy way is join a couple of GUIDs together to make a long random string (e.g. from <a href="https://www.guidgenerator.com/" rel="nofollow" target="_blank">https://www.guidgenerator.com/</a>).</p>

<pre class="line-numbers language-javascript"><code class=" language-javascript"><span class="token punctuation">{</span>
    <span class="token string">"AppSettings"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"Secret"</span><span class="token punctuation">:</span> <span class="token string">"THIS IS USED TO SIGN AND VERIFY JWT TOKENS, REPLACE IT WITH YOUR OWN SECRET, IT CAN BE ANY STRING"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"Logging"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"LogLevel"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">"Default"</span><span class="token punctuation">:</span> <span class="token string">"Information"</span><span class="token punctuation">,</span>
            <span class="token string">"Microsoft"</span><span class="token punctuation">:</span> <span class="token string">"Warning"</span><span class="token punctuation">,</span>
            <span class="token string">"Microsoft.Hosting.Lifetime"</span><span class="token punctuation">:</span> <span class="token string">"Information"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"AllowedHosts"</span><span class="token punctuation">:</span> <span class="token string">"*"</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="program-cs"></a>ASP.NET Core Program.cs</h2>

<div><strong>Path: /Program.cs</strong></div>

<p>The program class is a console app that is the main entry point to&nbsp;start the application, it configures and launches the web api host&nbsp;and&nbsp;web server using an instance of <code>IHostBuilder</code>. ASP.NET Core applications require a host in which to execute.</p>

<p>Kestrel is the web server used in the example, it's a new cross-platform web server for ASP.NET Core that's included in new project templates by default. Kestrel is fine to use on it's own for internal applications and development, but for public facing websites and applications it should sit behind a more mature reverse proxy server (IIS, Apache,&nbsp;Nginx etc) that will receive HTTP requests from the internet and forward them to Kestrel after initial handling and security checks.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Hosting<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Hosting<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">CreateHostBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">IHostBuilder</span> <span class="token function">CreateHostBuilder</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            Host<span class="token punctuation">.</span><span class="token function">CreateDefaultBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ConfigureWebHostDefaults</span><span class="token punctuation">(</span>webBuilder <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    webBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseStartup</span><span class="token punctuation">&lt;</span><span class="token class-name">Startup</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">UseUrls</span><span class="token punctuation">(</span><span class="token string">"http://localhost:4000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="startup-cs"></a>ASP.NET Core Startup Class</h2>

<div><strong>Path: /Startup.cs</strong></div>

<p>The startup class configures the request pipeline of the application, dependency injection and how all requests are handled.</p>

<p>The below file contains configuration for:</p>

<ul>
	<li>The EF Core in memory database and mapping it to the <code>DataContext</code> class for dependency injection.</li>
	<li>CORS (cross origin resource sharing) requests to the api.</li>
	<li>Strongly typed access to app settings with the <code>AppSettings</code> class.</li>
	<li>Enabling JWT Authentication.</li>
	<li>Mapping the <code>UserService</code> class to the <code>IUserService</code> interface for dependency injection.</li>
</ul>

<p>The <code>Configure()</code> method also creates a user in the db when the api starts for testing.</p>

<pre class="line-numbers language-csharp"><code class=" language-csharp"><span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Builder<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Hosting<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>DependencyInjection<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Helpers<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Services<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>IdentityModel<span class="token punctuation">.</span>Tokens<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Authentication<span class="token punctuation">.</span>JwtBearer<span class="token punctuation">;</span>
<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>EntityFrameworkCore<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApi<span class="token punctuation">.</span>Entities<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApi
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// This method gets called by the runtime. Use this method to add services to the container.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// in memory database used for simplicity, change to a real db for production applications</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token punctuation">&lt;</span><span class="token class-name">DataContext</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">UseInMemoryDatabase</span><span class="token punctuation">(</span><span class="token string">"TestDb"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token function">AddCors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token function">AddControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddJsonOptions</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>JsonSerializerOptions<span class="token punctuation">.</span>IgnoreNullValues <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// configure strongly typed settings objects</span>
            <span class="token keyword">var</span> appSettingsSection <span class="token operator">=</span> Configuration<span class="token punctuation">.</span><span class="token function">GetSection</span><span class="token punctuation">(</span><span class="token string">"AppSettings"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Configure</span><span class="token punctuation">&lt;</span><span class="token class-name">AppSettings</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>appSettingsSection<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// configure jwt authentication</span>
            <span class="token keyword">var</span> appSettings <span class="token operator">=</span> appSettingsSection<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token punctuation">&lt;</span><span class="token class-name">AppSettings</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> key <span class="token operator">=</span> Encoding<span class="token punctuation">.</span>ASCII<span class="token punctuation">.</span><span class="token function">GetBytes</span><span class="token punctuation">(</span>appSettings<span class="token punctuation">.</span>Secret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token function">AddAuthentication</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                x<span class="token punctuation">.</span>DefaultAuthenticateScheme <span class="token operator">=</span> JwtBearerDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">;</span>
                x<span class="token punctuation">.</span>DefaultChallengeScheme <span class="token operator">=</span> JwtBearerDefaults<span class="token punctuation">.</span>AuthenticationScheme<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">AddJwtBearer</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                x<span class="token punctuation">.</span>RequireHttpsMetadata <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                x<span class="token punctuation">.</span>SaveToken <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                x<span class="token punctuation">.</span>TokenValidationParameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenValidationParameters</span>
                <span class="token punctuation">{</span>
                    ValidateIssuerSigningKey <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
                    IssuerSigningKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SymmetricSecurityKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    ValidateIssuer <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
                    ValidateAudience <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
                    <span class="token comment">// set clockskew to zero so tokens expire exactly at token expiration time (instead of 5 minutes later)</span>
                    ClockSkew <span class="token operator">=</span> TimeSpan<span class="token punctuation">.</span>Zero
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// configure DI for application services</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token punctuation">&lt;</span><span class="token class-name">IUserService</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">,</span> <span class="token class-name">DataContext</span> context<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// add hardcoded test user to db on startup,  </span>
            <span class="token comment">// plain text password is used for simplicity, hashed passwords should be used in production applications</span>
            context<span class="token punctuation">.</span>Users<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span> <span class="token punctuation">{</span> FirstName <span class="token operator">=</span> <span class="token string">"Test"</span><span class="token punctuation">,</span> LastName <span class="token operator">=</span> <span class="token string">"User"</span><span class="token punctuation">,</span> Username <span class="token operator">=</span> <span class="token string">"test"</span><span class="token punctuation">,</span> Password <span class="token operator">=</span> <span class="token string">"test"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// global cors policy</span>
            app<span class="token punctuation">.</span><span class="token function">UseCors</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x
                <span class="token punctuation">.</span><span class="token function">SetIsOriginAllowed</span><span class="token punctuation">(</span>origin <span class="token operator">=&gt;</span> <span class="token keyword">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AllowAnyMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AllowAnyHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AllowCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            app<span class="token punctuation">.</span><span class="token function">UseAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app<span class="token punctuation">.</span><span class="token function">UseAuthorization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">MapControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<div>&nbsp;</div>

<h2><a name="web-api-csproj"></a>ASP.NET Core CSProj File</h2>

<div><strong>Path: /WebApi.csproj</strong></div>

<p>The csproj (C# project) is an MSBuild based file that contains target framework and NuGet package dependency information for the application.</p>

<pre class="line-numbers language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Project</span> <span class="token attr-name">Sdk</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Microsoft.NET.Sdk.Web<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TargetFramework</span><span class="token punctuation">&gt;</span></span>netcoreapp3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TargetFramework</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageReference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Microsoft.AspNetCore.Authentication.JwtBearer<span class="token punctuation">"</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3.1.4<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageReference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Microsoft.EntityFrameworkCore.InMemory<span class="token punctuation">"</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3.1.4<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageReference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>System.IdentityModel.Tokens.Jwt<span class="token punctuation">"</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6.5.1<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<div><a href="https://jasonwatmore.com/#project-structure">Back to top</a></div>

<p>&nbsp;</p>
</div>

        <h2>Subscribe or Follow Me For Updates</h2>
        <p>Subscribe to my YouTube channel or follow me on Twitter or GitHub to be notified when I post new content.</p>
        <ul>
            <li>Subscribe on YouTube at <a href="https://www.youtube.com/c/JasonWatmore?sub_confirmation=1" rel="nofollow" target="_blank">https://www.youtube.com/c/JasonWatmore</a></li>
            <li>Follow me on Twitter at <a href="https://twitter.com/jason_watmore" rel="nofollow" target="_blank">https://twitter.com/jason_watmore</a></li>
            <li>Follow me on GitHub at <a href="https://github.com/cornflourblue" rel="nofollow" target="_blank">https://github.com/cornflourblue</a></li>
            <li>
                Feeds formats available: 
                <a href="https://jasonwatmore.com/rss" target="_self" title="RSS">RSS</a>,
                <a href="https://jasonwatmore.com/atom" target="_self" title="Atom">Atom</a>,
                <a href="https://jasonwatmore.com/json" target="_self" title="JSON">JSON</a>
            </li>
        </ul>
        <p>&nbsp;</p>

        <div id="bsa-zone_1572457461257-9_123456" class="bsa_leaderboard" data-google-query-id="CLWx4oGF1uoCFR2dSwUdLq8B4A"><div id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_Mid_0__container__" style="border: 0pt none; display: inline-block; width: 320px; height: 50px;"><iframe frameborder="0" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/container(1).html" id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_Mid_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="320" height="50" data-is-safeframe="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="2t" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div>

        

        <div class="post-footer">
            
                <p>
                    Tags: 
                    <a href="https://jasonwatmore.com/posts/tag/aspnet-core">ASP.NET Core</a>, <a href="https://jasonwatmore.com/posts/tag/c">C#</a>, <a href="https://jasonwatmore.com/posts/tag/authentication-and-authorization">Authentication and Authorization</a>, <a href="https://jasonwatmore.com/posts/tag/security">Security</a>, <a href="https://jasonwatmore.com/posts/tag/jwt">JWT</a>
                </p>
            
            <p class="social-share-buttons">
                <span>Share: </span>
                <a class="facebook-button" href="https://facebook.com/sharer.php?u=https://jasonwatmore.com/post/2020/05/25/aspnet-core-3-api-jwt-authentication-with-refresh-tokens" target="_blank">Facebook</a>
                <a class="twitter-button" href="https://twitter.com/intent/tweet?url=https://jasonwatmore.com/post/2020/05/25/aspnet-core-3-api-jwt-authentication-with-refresh-tokens&amp;text=ASP.NET%20Core%203.1%20API%20-%20JWT%20Authentication%20with%20Refresh%20Tokens" target="_blank">Twitter</a>
            </p>
            
                <hr>
                <div class="related-posts">
                    <h2>More ASP.NET Core Posts</h2>
                    <ul>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/07/16/aspnet-core-3-hash-and-verify-passwords-with-bcrypt">ASP.NET Core 3.1 - Hash and Verify Passwords with BCrypt</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/07/15/aspnet-core-3-send-emails-via-smtp-with-mailkit">ASP.NET Core 3.1 - Send Emails via SMTP with MailKit</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/07/06/aspnet-core-3-boilerplate-api-with-email-sign-up-verification-authentication-forgot-password">ASP.NET Core 3.1 - Boilerplate API with Email Sign Up, Verification, Authentication &amp; Forgot Password</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/05/26/aspnet-core-setup-development-environment">ASP.NET Core - Setup Development Environment</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/05/20/aspnet-core-api-allow-cors-requests-from-any-origin-and-with-credentials">ASP.NET Core API - Allow CORS requests from any origin and with credentials</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/01/11/vuejs-aspnet-core-on-azure-with-sql-server-how-to-deploy-a-full-stack-app-to-microsoft-azure">Vue.js + ASP.NET Core on Azure with SQL Server - How to Deploy a Full Stack App to Microsoft Azure</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/01/10/react-aspnet-core-on-azure-with-sql-server-how-to-deploy-a-full-stack-app-to-microsoft-azure">React + ASP.NET Core on Azure with SQL Server - How to Deploy a Full Stack App to Microsoft Azure</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/01/08/angular-net-core-sql-on-azure-how-to-deploy-a-full-stack-app-to-microsoft-azure">Angular + .NET Core + SQL on Azure - How to Deploy a Full Stack App to Microsoft Azure</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2020/01/03/aspnet-core-ef-core-migrations-for-multiple-databases-sqlite-and-sql-server">ASP.NET Core - EF Core Migrations for Multiple Databases (SQLite and SQL Server)</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/12/27/aspnet-core-automatic-ef-core-migrations-to-sql-database-on-startup">ASP.NET Core - Automatic EF Core Migrations to SQL Database on Startup</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/10/21/aspnet-core-3-basic-authentication-tutorial-with-example-api">ASP.NET Core 3.1 - Basic Authentication Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/10/16/aspnet-core-3-role-based-authorization-tutorial-with-example-api">ASP.NET Core 3.1 - Role Based Authorization Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/10/14/aspnet-core-3-simple-api-for-authentication-registration-and-user-management">ASP.NET Core 3.1 - Simple API for Authentication, Registration and User Management</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/10/11/aspnet-core-3-jwt-authentication-tutorial-with-example-api">ASP.NET Core 3.1 - JWT Authentication Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2019/01/08/aspnet-core-22-role-based-authorization-tutorial-with-example-api">ASP.NET Core 2.2 - Role Based Authorization Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2018/10/17/c-pure-pagination-logic-in-c-aspnet">C# - Pure Pagination Logic in C# / ASP.NET</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2018/10/15/aspnet-core-razor-pages-pagination-example">ASP.NET Core Razor Pages - Pagination Example</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2018/09/08/aspnet-core-21-basic-authentication-tutorial-with-example-api">ASP.NET Core 2.2 - Basic Authentication Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2018/08/14/aspnet-core-21-jwt-authentication-tutorial-with-example-api">ASP.NET Core 2.2 - JWT Authentication Tutorial with Example API</a>
                            </li>
                        
                            <li>
                                <a href="https://jasonwatmore.com/post/2018/06/26/aspnet-core-21-simple-api-for-authentication-registration-and-user-management">ASP.NET Core 2.2 - Simple API for Authentication, Registration and User Management</a>
                            </li>
                        
                    </ul>
                </div>
            
        </div>

        <div id="bsa-zone_1572457546822-4_123456" class="bsa_leaderboard" data-google-query-id="CLax4oGF1uoCFR2dSwUdLq8B4A"><div id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_BTF_0__container__" style="border: 0pt none; display: inline-block; width: 320px; height: 50px;"><iframe frameborder="0" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/container(2).html" id="google_ads_iframe_/8691100/JasonWatmore_S2S_Leaderboard_ROS_BTF_0" title="3rd party ad content" name="" scrolling="no" marginwidth="0" marginheight="0" width="320" height="50" data-is-safeframe="true" sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" data-google-container-id="2u" style="border: 0px; vertical-align: bottom;" data-load-complete="true"></iframe></div></div>

        <hr>

        <!-- alternate language urls -->
        <input type="hidden" id="alternates" value="[]">

        <!-- comments -->
        <div id="disqus_thread"><iframe id="dsq-app1565" name="dsq-app1565" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/saved_resource.html" horizontalscrolling="no" verticalscrolling="no" style="height: 3078px !important;"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 1140px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 1140px !important; max-width: 1140px !important; position: fixed !important; z-index: 2147483646 !important; height: 0px !important; min-height: 0px !important; max-height: 0px !important; display: none !important;" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/saved_resource(1).html"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 1140px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 1140px !important; max-width: 1140px !important; position: fixed !important; z-index: 2147483646 !important; height: 0px !important; min-height: 0px !important; max-height: 0px !important; display: none !important;" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/saved_resource(2).html"></iframe></div>
        <script>
            // update page title
            var metaTitle = 'ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens | Jason Watmore\'s Blog';
            document.title = metaTitle;

            var disqus_config = function () {
                this.page.url = 'http://jasonwatmore.com/post.aspx?id=5ecb9023fceb9316d27ad8f6';
                this.page.title = metaTitle;
            };

            if (!window.postViewLoaded) {
                // load disqus script the first time the view loads
                (function () {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'https://jasonwatmoresblog.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();

                window.postViewLoaded = true;
            } else if (window.DISQUS) {
                // else if disqus already loaded call DISQUS.reset
                DISQUS.reset({
                    reload: true,
                    config: disqus_config
                });
            }
        </script>
    </div>
</div>

            </div>
        
	</main>

    <!-- footer -->
    <div id="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <h4>About</h4>
                    <p>
                        I'm a web developer in Sydney Australia and the technical lead at <a href="https://www.pointblankdevelopment.com.au/" target="_blank">Point Blank Development</a>, 
                        I've been building websites and web applications in Sydney since 1998.
                    </p>
                    <p class="social-icons">
                        <span>Find me on:</span>
                        <a class="first" href="https://twitter.com/jason_watmore" rel="nofollow" target="_blank" title="Twitter"><span class="icon-twitter"></span></a>
                        <a href="https://github.com/cornflourblue" rel="nofollow" target="_blank" title="GitHub"><span class="icon-github"></span></a>
                        <a href="https://www.youtube.com/c/JasonWatmore" rel="nofollow" target="_blank" title="YouTube"><span class="icon-youtube"></span></a>
                    </p>
                    <p>
                        Subscribe to Feed: 
                        <a href="https://jasonwatmore.com/rss" class="feed-link" target="_self" title="RSS">RSS</a>,
                        <a href="https://jasonwatmore.com/atom" class="feed-link" target="_self" title="Atom">Atom</a>,
                        <a href="https://jasonwatmore.com/json" class="feed-link" target="_self" title="JSON">JSON</a>
                    </p>
                </div>
                <div class="col-sm-2 footer-col">
                    <h4>Months</h4>
                    <ul class="month-list">
    
        <li class="year">
            <div>2020</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/07">July</a> (11)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/06">June</a> (5)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/05">May</a> (7)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/04">April</a> (17)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/03">March</a> (5)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/02">February</a> (6)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2020/01">January</a> (5)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2019</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/12">December</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/11">November</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/10">October</a> (4)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/09">September</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/08">August</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/07">July</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/06">June</a> (10)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/05">May</a> (4)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/04">April</a> (6)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/03">March</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/02">February</a> (4)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2019/01">January</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2018</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/12">December</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/11">November</a> (5)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/10">October</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/09">September</a> (7)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/08">August</a> (4)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/07">July</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/06">June</a> (5)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/05">May</a> (6)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/04">April</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/02">February</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2018/01">January</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2017</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/12">December</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/09">September</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/06">June</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/05">May</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/04">April</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/03">March</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/02">February</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2017/01">January</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2016</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/12">December</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/11">November</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/10">October</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/09">September</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/08">August</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/07">July</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/06">June</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/05">May</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/04">April</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/03">March</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/02">February</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2016/01">January</a> (2)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2015</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/12">December</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/11">November</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/10">October</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/07">July</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/06">June</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/04">April</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/03">March</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2015/01">January</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2014</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/12">December</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/09">September</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/08">August</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/07">July</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/05">May</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/04">April</a> (3)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/03">March</a> (2)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2014/02">February</a> (2)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2013</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2013/11">November</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2013/10">October</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2013/07">July</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2013/04">April</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2012</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/10">October</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/09">September</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/08">August</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/07">July</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/06">June</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/05">May</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/04">April</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/03">March</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2012/02">February</a> (1)
                    </li>
                
            </ul>
        </li>
    
        <li class="year">
            <div>2011</div>
            <ul class="months">
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2011/12">December</a> (1)
                    </li>
                
                    <li>
                        <a href="https://jasonwatmore.com/posts/2011/11">November</a> (3)
                    </li>
                
            </ul>
        </li>
    
</ul>

                </div>
                <div class="col-sm-6 footer-col">
                    <h4>Tags</h4>
                    <ul class="tag-list">
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/alerts">Alerts</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular">Angular</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-10">Angular 10</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-2">Angular 2</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-4">Angular 4</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-5">Angular 5</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-6">Angular 6</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-7">Angular 7</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-8">Angular 8</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-9">Angular 9</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-directive">Angular Directive</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angular-ui-router">Angular UI Router</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/angularjs">AngularJS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/animation">Animation</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/aspnet">ASP.NET</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/aspnet-core">ASP.NET Core</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/aspnet-web-api">ASP.NET Web API</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/authentication-and-authorization">Authentication and Authorization</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/aws">AWS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/axios">Axios</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/azure">Azure</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/basic-authentication">Basic Authentication</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/bootstrap">Bootstrap</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/c">C#</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/chai">Chai</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ckeditor">CKEditor</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/css3">CSS3</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ddd">DDD</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/deployment">Deployment</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/design-patterns">Design Patterns</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/dynamic-linq">Dynamic LINQ</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ef-core">EF Core</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/elmah">ELMAH</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/es6">ES6</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/exchange">Exchange</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/facebook">Facebook</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/fetch">Fetch</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/fluent-nhibernate">Fluent NHibernate</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/formik">Formik</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/google-analytics">Google Analytics</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/google-api">Google API</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/google-maps-api">Google Maps API</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/google-plus">Google Plus</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/heroku">Heroku</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/html5">HTML5</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/http">HTTP</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/iis">IIS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/insecure-content">Insecure Content</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/instagram-api">Instagram API</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ionic-framework">Ionic Framework</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ios">iOS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/iphone">iPhone</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/javascript">JavaScript</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/jquery">jQuery</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/jwt">JWT</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/linkedin">LinkedIn</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/linq">LINQ</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/login">Login</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mean-stack">MEAN Stack</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mern-stack">MERN Stack</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mevn-stack">MEVN Stack</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mocha">Mocha</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/modal">Modal</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mongodb">MongoDB</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/moq">Moq</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mvc">MVC</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/mvc5">MVC5</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/nginx">NGINX</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ngmock">ngMock</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/nhibernate">NHibernate</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ninject">Ninject</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/nodejs">NodeJS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/npm">npm</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/pagination">Pagination</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/pinterest">Pinterest</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/razor-pages">Razor Pages</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/react">React</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/react-hooks">React Hooks</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/redmine">Redmine</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/redux">Redux</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/registration">Registration</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/repository">Repository</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/rxjs">RxJS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/security">Security</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/shell-scripting">Shell Scripting</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/sinon">Sinon</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/sinonjs">SinonJS</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ssh">SSH</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/tdd">TDD</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/terraform">Terraform</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/twitter">Twitter</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/typescript">TypeScript</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/ubuntu">Ubuntu</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/umbraco">Umbraco</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/unit-of-work">Unit of Work</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/unit-testing">Unit Testing</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/url-rewrite">URL Rewrite</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/validation">Validation</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/vue">Vue</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/vuex">Vuex</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/webpack">Webpack</a> 
        </li>
    
        <li>
            <a href="https://jasonwatmore.com/posts/tag/windows-server-2008">Windows Server 2008</a> 
        </li>
    
</ul>

                </div>
            </div>
        </div>
    </div>

    <!-- tile -->
    <div class="tile-wrapper">
        
        <!-- ngIf: showCarbon --><div ng-if="showCarbon" class="carbon-container ng-scope">
            <div class="tile-title">Supported by <span class="icon-cross"></span></div>
            <div id="carbon-tile">
                <div class="native-carbon"></div>
            </div>
        </div><!-- end ngIf: showCarbon -->
    </div>

    <div class="container footer-bottom">
        <div class="powered-by">
            Powered by <a href="https://jasonwatmore.com/post/2016/10/29/meanie-mean-stack-blogging-platform">MEANie</a>
        </div>
        <div class="copyright">
             2020 JasonWatmore.com
        </div>
    </div>

    <!-- prism -->
    <link href="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-okaidia.min.css" rel="stylesheet">
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism.min.js.download"></script>
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-clike.min.js.download"></script>
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-csharp.min.js.download"></script>
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-bash.min.js.download"></script>
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-yaml.min.js.download"></script>

    <!-- prism plugins -->
    <link href="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-line-numbers.min.css" rel="stylesheet">
    <script defer="" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/prism-line-numbers.min.js.download"></script>
    
    <!-- jquery -->
    <script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/jquery.min.js.download"></script>

    <script>
        $(function () {
            // enable expanding of month lists
            $('#footer .month-list .year > div').click(function () {
                $(this).closest('.year').find('.months').slideToggle();
            });

            // feed page view analytics
            $('.feed-link').click(function() {
                ga && ga('send', 'pageview', $(this).attr('href'));
            });
        });
    </script>

    <!-- angular -->
    <script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/angular.min.js.download"></script>
    <script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/angular-messages.min.js.download"></script>
    <script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/angular-ui-router.min.js.download"></script>

    <!-- meanie -->
    <script src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/app.min.js.download"></script>

    

    <!-- ngIf: showCarbon --><div ng-if="showCarbon" class="ng-scope">
        <!-- carbon -->
        <div id="native-fixed-js"><div id="_custom_" data-attributes="{&quot;type&quot;:&quot;custom&quot;,&quot;key&quot;:&quot;CK7I423E&quot;,&quot;segment&quot;:&quot;placement:jasonwatmorecom&quot;,&quot;options&quot;:{&quot;target&quot;:&quot;#native-fixed-js&quot;,&quot;template&quot;:&quot;\n&lt;div style=\&quot;background-color: ##backgroundColor##\&quot; class=\&quot;native-fixed\&quot;&gt;\n    &lt;a style=\&quot;color: ##textColor##\&quot; class=\&quot;native-link\&quot; href=\&quot;##link##\&quot;&gt;\n        &lt;div class=\&quot;native-sponsor\&quot; style=\&quot;background-color: ##textColor##; color: ##backgroundColor##\&quot;&gt;Sponsor&lt;/div&gt;\n        &lt;div class=\&quot;native-text\&quot;&gt;##company##  ##description##&lt;/div&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n&quot;,&quot;script_id&quot;:&quot;_bsa_srv-CK7I423E_10&quot;,&quot;platforms&quot;:[&quot;desktop&quot;,&quot;mobile&quot;]},&quot;ads&quot;:[{&quot;active&quot;:&quot;1&quot;,&quot;ad_via_link&quot;:&quot;https://buy.buysellads.com/checkout/new/?utm_source=jasonwatmore-com-custom&amp;utm_medium=ad_via_link&amp;utm_campaign=in_unit&amp;utm_term=custom&quot;,&quot;backgroundColor&quot;:&quot;#030303&quot;,&quot;backgroundHoverColor&quot;:&quot;#030303&quot;,&quot;bannerid&quot;:&quot;407565&quot;,&quot;callToAction&quot;:&quot;Sign Up Now&quot;,&quot;company&quot;:&quot;Authentic Jobs&quot;,&quot;companyTagline&quot;:&quot;The Leading Job Board For Developers&quot;,&quot;creativeid&quot;:&quot;421980&quot;,&quot;ctaBackgroundColor&quot;:&quot;#30ace3&quot;,&quot;ctaBackgroundHoverColor&quot;:&quot;#30ace3&quot;,&quot;ctaTextColor&quot;:&quot;#FFFFFF&quot;,&quot;ctaTextColorHover&quot;:&quot;#FFFFFF&quot;,&quot;description&quot;:&quot;Your new development career awaits. Check out the latest listings.&quot;,&quot;evenodd&quot;:&quot;0&quot;,&quot;external_id&quot;:&quot;25104&quot;,&quot;height&quot;:&quot;0&quot;,&quot;i&quot;:&quot;0&quot;,&quot;identifier&quot;:&quot;ed2e37d569d6b6ea90d54c98acbbea26&quot;,&quot;image&quot;:&quot;https://cdn4.buysellads.net/uu/1/54760/1570204560-authenticjobs-icon.png&quot;,&quot;logo&quot;:&quot;https://cdn4.buysellads.net/uu/1/54760/1570204565-authenticjobs-logo.png&quot;,&quot;longimp&quot;:&quot;TD45V6LXTTTTTTHRZWPHOTTTTTT5YHVWZATTTTTTN3LJ6UYTTTTTT&quot;,&quot;longlink&quot;:&quot;TF45V6LXTTTTTTHRZWPHOTTTTTT5YHVWZATTTTTTN3LJ6UYTTTTTTBDW5JYFC5JGHREUPRDVKMUFVBZD2QUN6A75K2UNBZ7X5MBCBUSI2RBU6YSHFMUC4RDQ57LLBAIH2WIFPRD2ZRNNP7DQ5MNIBYI327UCPAJC5MBCBUSDKHNUTYZQKRUDBSI35JWUK7QCZRJFCYPX5QLU4GQH6M7CPAZVKH7NEQQH&quot;,&quot;num_slots&quot;:&quot;1&quot;,&quot;rendering&quot;:&quot;custom&quot;,&quot;statimp&quot;:&quot;//srv.buysellads.com/ads/imp/x/GTND42Q7CWYD5K7UCK74YKQMF6BI427ECV7I5Z3JCWAIPKQMC6ADPKJKC6BDP5QIC6BDL2JWC6SDC53YCTADV5QWHEYIP5QMCTBD4KJECTNCLSZE5QLUCASQ2RUT&quot;,&quot;statlink&quot;:&quot;//srv.buysellads.com/ads/click/x/GTND42Q7CWYD5K7UCK74YKQMF6BI427ECV7I5Z3JCWAIPKQMC6ADPKJKC6BDP5QIC6BDL2JWC6SDC53YCTADV5QWHEYIP5QMCTBD4KJECTNCYBZ52K&quot;,&quot;textColor&quot;:&quot;#FFFFFF&quot;,&quot;textColorHover&quot;:&quot;#FFFFFF&quot;,&quot;timestamp&quot;:&quot;1595043358&quot;,&quot;transparentLogo&quot;:&quot;https://cdn4.buysellads.net/uu/1/54760/1570204571-authenticjobs-fit.png&quot;,&quot;width&quot;:&quot;0&quot;,&quot;zoneid&quot;:&quot;33140&quot;,&quot;zonekey&quot;:&quot;CK7I423E&quot;}]}">
<div style="background-color: #030303" class="native-fixed">
    <a style="color: #FFFFFF" class="native-link" href="https://srv.buysellads.com/ads/click/x/GTND42Q7CWYD5K7UCK74YKQMF6BI427ECV7I5Z3JCWAIPKQMC6ADPKJKC6BDP5QIC6BDL2JWC6SDC53YCTADV5QWHEYIP5QMCTBD4KJECTNCYBZ52K?segment=placement:jasonwatmorecom;">
        <div class="native-sponsor" style="background-color: #FFFFFF; color: #030303">Sponsor</div>
        <div class="native-text">Authentic Jobs  Your new development career awaits. Check out the latest listings.</div>
    </a>
</div>
</div></div>
        <script>
            $(function () {
                // init after parent element is added to dom
                setTimeout(function () {
                    window.initFooterBar();
                    window.initTileWrapper();
                });
                
                window.initFooterBar = function() {
                    if (typeof _bsa !== 'undefined' && _bsa) {
                        $('[id*=CK7I423E]').remove();
                        $('#native-fixed-js *').remove();
                        _bsa.init('custom', 'CK7I423E', 'placement:jasonwatmorecom', {
                            target: '#native-fixed-js',
                            template: `
<div style="background-color: ##backgroundColor##" class="native-fixed">
    <a style="color: ##textColor##" class="native-link" href="##link##">
        <div class="native-sponsor" style="background-color: ##textColor##; color: ##backgroundColor##">Sponsor</div>
        <div class="native-text">##company##  ##description##</div>
    </a>
</div>
`
                        });
                    }
                }

                window.initTileWrapper = function() {
                    if (typeof _bsa !== 'undefined' && _bsa && $('.tile-wrapper').is(':visible') && !window.inittingTile) {
                        window.inittingTile = true;
                        initTile();

                        // handle tile behaviour
                        awaitTile().then(function () {
                            $('.carbon-container .icon-cross').show();
                            $('.carbon-container').hide().addClass('floating').fadeIn();

                            // move tile to bottom on close
                            $('.carbon-container .icon-cross').click(function () {
                                $('.carbon-container').removeClass('floating');
                                $('.carbon-container .icon-cross').hide();
                            });
                        });
                    }

                    function awaitTile() {
                        return new Promise(resolve => {
                            var waitCounter = 0;
                            (function checkTile() {
                                if (!$('.native-carbon *').length) {
                                    waitCounter += 1;
                                    if (waitCounter > 1 && waitCounter <= 10) {
                                        initTile();
                                    }
                                    setTimeout(checkTile, 2000);
                                } else {
                                    window.inittingTile = false;
                                    resolve();
                                }
                            })()
                        })
                    }
                }

                function initTile() {
                    $('.carbon-container').removeClass('floating');
                    $('[id*=CE7I523U]').remove();
                    $('.native-carbon *').remove();
                    _bsa.init('custom', 'CE7I523U', 'placement:jasonwatmorecom', {
                        target: '.native-carbon',
                        template: `
<div class="native-container">
<a href="##link##" class="native-banner">
        <div class="native-img" style="background: ##backgroundColor##;"><img src="##logo##"></div>
        <div class="native-details">
        <span class="native-desc">##company##  ##description##</span>
        </div>
    </a>
    <a class="native-via" href="##adViaLink##"">Ad via BuySellAds</a>
</div>
`
                    });  
                }
            });
        </script>
    </div><!-- end ngIf: showCarbon -->

<iframe style="display: none;" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/saved_resource(3).html"></iframe><iframe id="google_osd_static_frame_1908787902448" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/saved_resource(4).html"></iframe></body><iframe sandbox="allow-scripts allow-same-origin" id="2576f2f56f6d34" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/async_usersync(4).html">
    </iframe><iframe sandbox="allow-scripts allow-same-origin" id="267e13e419e5078" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/pd.html">
    </iframe><iframe sandbox="allow-scripts allow-same-origin" id="2714ebb63815464" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0px;width:0px;display:none;" scrolling="no" src="./ASP.NET Core 3.1 API - JWT Authentication with Refresh Tokens _ Jason Watmore&#39;s Blog_files/sync(1).html">
    </iframe></html>